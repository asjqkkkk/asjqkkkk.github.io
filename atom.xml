<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>è€æ™¨å­ã®åšå®¢</title>
  
  <subtitle>æƒ³å†™çš„æ—¶å€™å†™ä¸€äº›</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-10-30T11:13:28.519Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Old Chen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Room Databaseå…¥é—¨æŒ‡å—</title>
    <link href="http://yoursite.com/2018/10/30/Room-Database%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/"/>
    <id>http://yoursite.com/2018/10/30/Room-Databaseå…¥é—¨æŒ‡å—/</id>
    <published>2018-10-30T11:12:38.000Z</published>
    <updated>2018-10-30T11:13:28.519Z</updated>
    
    <content type="html"><![CDATA[<p>è¯´åˆ°Androidç«¯æœ‰å“ªäº›å¯ä»¥ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯SQLiteè¿™ç§å¸¦æœ‰å®˜æ–¹å±æ€§åŠ æŒçš„è½»å‹çš„æ•°æ®åº“ã€‚</p><p>ä¸è¿‡å¯¹äºåƒæˆ‘è¿™ç§åŸºæœ¬ä¸Šæ²¡æœ‰æ¥è§¦è¿‡SQLæ•°æ®åº“è¯­è¨€ç¼–å†™çš„äººæ¥è¯´ï¼Œè¦é€šè¿‡å»å†™éš¾ä»¥æŸ¥é”™ä¸”åˆæ¯«ä¸ç†Ÿæ‚‰çš„æ•°æ®åº“ä»£ç æ‰èƒ½æ“ä½œæ•°æ®åº“çš„è¯ï¼Œé‚£å°±å¤ªä»¤äººå¤´å¤§äº†ã€‚</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001-001.jpg" alt="image"></p><p>äºæ˜¯ä¹ï¼Œä¾¿äºAndroidå¼€å‘è€…æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ä¹Ÿå°±å¤šäº†èµ·æ¥ï¼Œå…¶ä¸­äººæ°”è¾ƒé«˜çš„å°±æœ‰GreenDaoã€Realmï¼ŒObjectBoxç­‰ï¼Œè€ŒRoomåˆ™æ˜¯è°·æ­Œå®˜æ–¹ååˆ†æ¨èçš„ï¼Œå¯ä»¥ä»£æ›¿SQliteçš„ä¸äºŒä¹‹é€‰ã€‚<br><a id="more"></a><br>æœ¬ç¯‡çš„ä¸»è¦ä»‹ç»å¯¹è±¡ä¹Ÿæ˜¯Roomæ•°æ®åº“ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜å¾—ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢æåˆ°è¿‡çš„å…¶ä»–å‡ ä½ï¼ŒåŒæ—¶åšä¸ªå°å°çš„å¯¹æ¯”ã€‚</p><h1 id="ä¸€ã€ä»‹ç»ä¸æ¯”è¾ƒ"><a href="#ä¸€ã€ä»‹ç»ä¸æ¯”è¾ƒ" class="headerlink" title="ä¸€ã€ä»‹ç»ä¸æ¯”è¾ƒ"></a>ä¸€ã€ä»‹ç»ä¸æ¯”è¾ƒ</h1><p>ç”±äºæˆ‘ç”¨è¿‡çš„æ•°æ®åº“æ¡†æ¶å¹¶ä¸å¤šï¼Œæ‰€ä»¥å¯¹äºç”¨è¿‡çš„å¯ä»¥è¯´ä¸€ä¸‹æ„Ÿå—ï¼Œæ²¡ç”¨è¿‡çš„å°±ç®€å•å¸¦è¿‡äº†ã€‚</p><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><h3 id="GreenDao-å’Œ-ObjectBox"><a href="#GreenDao-å’Œ-ObjectBox" class="headerlink" title="GreenDao å’Œ ObjectBox"></a>GreenDao å’Œ ObjectBox</h3><p>åœ¨è¿™äº›æ•°æ®åº“ä¸­ï¼Œ <strong>GreenDao</strong> ç®—æ˜¯æ—©é—»å…¶åï¼Œä¸è¿‡ä¸€ç›´æ²¡æœ‰ç”¨è¿‡ï¼Œåæ¥å®ƒçš„ä½œè€…åˆå‡ºäº†ä¸ª <strong>ObjectBox</strong> ï¼Œè€Œä¸”ä½ å¯ä»¥åœ¨ <a href="https://github.com/greenrobot/greenDAO" target="_blank" rel="noopener"><strong>GreenDao</strong>çš„GitHubé¡µé¢</a> æ‰¾åˆ°æ¨èä½¿ç”¨ <strong>ObjectBox</strong> çš„ <a href="https://objectbox.io/" target="_blank" rel="noopener">ObjectBoxåœ°å€</a> .</p><h3 id="Realm"><a href="#Realm" class="headerlink" title="Realm"></a>Realm</h3><p>æˆ‘çœŸæ­£ä½¿ç”¨è¿‡çš„è¿˜åªæœ‰ <strong>Realm</strong> æ•°æ®åº“ï¼Œè¿™é‡Œè¦æä¸€ä¸‹ï¼Œ<strong>Realm</strong> æ•°æ®åº“å¯¹äºä¸­å›½çš„å¼€å‘è€…éå¸¸çš„å‹å¥½ï¼Œå°±åƒå¤§åé¼é¼çš„Glideä¸€æ ·ï¼Œ <strong>Realm</strong> ä¹Ÿæœ‰ä¸­æ–‡çš„ä»‹ç»æ–‡æ¡£ï¼Œæ–‡æ¡£åœ°å€åœ¨æ­¤ï¼š<br><a href="https://realm.io/cn/docs/java/latest/" target="_blank" rel="noopener">å¼€å§‹ä½¿ç”¨Realm</a><br>è™½ç„¶è¿™ä»½æ–‡æ¡£å¯¹åº”çš„ç‰ˆæœ¬ä¸æ˜¯æœ€æ–°çš„. ä¸è¿‡å¯¹äºåˆæ¬¡æ¥è§¦ <strong>Realm</strong> äººæ¥è¯´ï¼Œçœ‹è¿™ä»½æ–‡æ¡£å°±å¯ä»¥ä¸Šæ‰‹äº†</p><p>æœ€å¼€å§‹ä½¿ç”¨Realmçš„æ—¶å€™ä¹Ÿæ˜¯ç¢°è¿‡ä¸å°‘å‘ï¼Œä¸è¿‡æœ€ä¸»è¦çš„æ˜¯æ‰€æœ‰æ•°æ®åº“å¯¹è±¡éœ€è¦ç»§æ‰¿ <strong>RealmObject</strong> è¿™ä¸ªç±»(ä¹Ÿå¯ä»¥é€šè¿‡æ¥å£å®ç°)ï¼Œè¿™æ ·å¯¹é¡¹ç›®å·²æœ‰çš„æ•°æ®ç»“æ„ä¸å¤ªå‹å¥½ï¼ŒåŒæ—¶æˆ‘è¿˜å‘ç°ç»§æ‰¿äº† <strong>RealmObject</strong> çš„å¯¹è±¡å¹¶ä¸èƒ½ä¸ <strong>Gson</strong> å®Œç¾ç»“åˆï¼Œå¦‚æœéœ€è¦è½¬æ¢çš„è¯ï¼Œè¿˜æ˜¯å¾—è´¹ä¸€ç•ªå‘¨æŠ˜çš„ã€‚<br>ç§ç§åŸå› ï¼Œå¯¼è‡´æˆ‘æœ€åä»é¡¹ç›®ä¸­æŠ½å»äº†Realmè¿™ä¸ªæ•°æ®åº“.</p><h3 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h3><p>ä¸ Realm åˆ†æ‰‹åçš„æ—¥å­é‡Œï¼Œæˆ‘å¹¶æ²¡æœ‰æ”¾å¼ƒå¯¹æ–°çš„æ•°æ®åº“çš„å¯»æ‰¾ï¼Œåæ¥åœ¨æµè§ˆ Googleå®˜æ–¹æ–‡æ¡£çš„æ—¶å€™æ‰å‘ç°äº† <strong>Room</strong> è¿™ä¸ªæ–°çš„æ•°æ®åº“ï¼Œç»è¿‡æˆ‘ä¸€ç•ªä½¿ç”¨åï¼Œå°±å†³å®šæ˜¯å®ƒäº†ï¼<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001-002.jpg" alt="image"></p><h2 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h2><p>å› ä¸ºæ‡’æƒ°çš„åŸå› ï¼Œæˆ‘å¹¶æ²¡æœ‰åšè¿‡æ·±å…¥çš„æµ‹è¯•ï¼Œä¸‹é¢ä¼šç»™å‡ºä»ç½‘ä¸Šæ‰¾åˆ°çš„å…³äºè¿™äº›æ•°æ®åº“çš„å¯¹æ¯”ï¼ŒåŸæ–‡åœ°å€å¦‚ä¸‹ï¼š</p><p><a href="https://notes.devlabs.bg/realm-objectbox-or-room-which-one-is-for-you-3a552234fd6e" target="_blank" rel="noopener"><strong>Realm, ObjectBox or Room. Which one is for you?</strong></a></p><p>ç„¶åæ˜¯æ•°æ®é‡è¾¾åˆ° <strong>100k/10k</strong> çš„æ—¶å€™ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œæ¶ˆè€—çš„æ—¶é—´å¯¹æ¯”ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001.jpeg" alt="image"><br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/002.jpeg" alt="image"></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/003.jpeg" alt="image"><br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/004.jpeg" alt="image"></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/005.jpeg" alt="image"><br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/006.jpeg" alt="image"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å„ä¸ªæ–¹é¢ï¼Œç»Ÿç»Ÿéƒ½æ˜¯ <strong>ObjectBox</strong> å‚²è§†ç¾¤é›„ã€‚<br>é‚£è¿™ç¯‡æ–‡ç« ä¸ºä»€ä¹ˆè¿˜æ˜¯è¦å†™ä»‹ç»å…³äº <strong>Room Database</strong> å‘¢ï¼Ÿ</p><p>é¦–å…ˆæ˜¯å®˜æ–¹BuffåŠ æŒï¼Œå’Œä»‹ç»æ–‡æ¡£é‡Œçš„ä¸€å¥è¯ï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/007.png" alt="image"><br><a href="https://developer.android.google.cn/training/data-storage/room/" target="_blank" rel="noopener">è¿™é‡Œæ˜¯Roomçš„å®˜æ–¹ä»‹ç»æ–‡æ¡£åœ°å€</a></p><p>å¤§è‡´æ„æ€å°±æ˜¯ï¼š<strong>æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç”¨Roonå»ä»£æ›¿SQLiteï¼Œä¸è¿‡å¦‚æœä½ æ˜¯ä¸ªé“å¤´å¨ƒéå¾—ç”¨SQLiteï¼Œé‚£æˆ‘ä»¬ä¹Ÿæ²¡æœ‰åŠæ³•ã€‚</strong></p><p>é™¤äº†ä¸Šé¢è¿™æ®µè¯ï¼Œè¿˜æœ‰ä¸€ç‚¹ä¹Ÿå¯ä»¥ä½œä¸ºé€‰æ‹©Roomçš„åŸå› ï¼Œå°±æ˜¯å¯¹äºApkçš„â€œå¢é‡â€æ˜¯å¤šå°‘ã€‚æ®åˆ«äººçš„æµ‹è¯•</p><blockquote><p>ObjectBoxå’ŒRealmåˆ†åˆ«å ç”¨1-1.5MBå’Œ3-4MBï¼ˆå¤§å°å–å†³äºæ‰‹æœºæ¶æ„ï¼‰ï¼Œè€Œä½œä¸ºSQLå°è£…çš„Roomåªå ç”¨å¤§çº¦50KBã€‚åœ¨æ–¹æ³•çš„å¢é‡ä¸Šï¼ŒRoomåªæœ‰300å¤šä¸ªï¼ŒObjectBoxå’ŒRealmåˆ™åˆ†åˆ«æ˜¯1300å’Œ2000ä¸ª</p></blockquote><p>å½“ç„¶ï¼Œå¦‚æœä½ çš„æ•°æ®é‡å¾ˆå¤§çš„è¯ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ <strong>ObjectBox</strong> æ›´åŠ é€‚åˆä½ ï¼Œå› ä¸ºå°±ä»ä¸Šé¢çš„æ“ä½œæ•°æ®å¯¹æ¯”æ¥çœ‹ï¼Œ <strong>ObjectBox</strong> å¤ªç‰›é€¼äº†ï¼æˆ‘ä»¥åè‚¯å®šä¹Ÿä¼šèŠ±æ—¶é—´å»å¯¹ <strong>ObjectBox</strong> åšä¸€ç•ªç ”ç©¶ï¼Œä¸è¿‡ç›®å‰è¿˜æ˜¯å…ˆæ¥ä»‹ç»ä»‹ç» <strong>Room</strong> å§ã€‚</p><h1 id="äºŒã€Roomçš„ç»“æ„"><a href="#äºŒã€Roomçš„ç»“æ„" class="headerlink" title="äºŒã€Roomçš„ç»“æ„"></a>äºŒã€Roomçš„ç»“æ„</h1><p>ä¹‹å‰æœ‰è¯´è¿‡ï¼Œ<strong>Room</strong> æ˜¯å¯ä»¥ä»£æ›¿ <strong>SQLite</strong> çš„ï¼Œä¸è¿‡æˆ‘è§‰å¾—Googleæ¨å‡ºå®ƒæ›´å¤šçš„æ˜¯ä¸ºäº†æ­é… <strong>DataBinding</strong> ä½¿ç”¨ï¼Œå¦‚æœä½ å¯¹äº <strong>DataBinding</strong> ä¸å¤ªç†Ÿæ‚‰ï¼Œå¯ä»¥çœ‹ä¸€çœ‹æˆ‘å‰é¢çš„å…³äº <strong>DataBinding</strong> çš„æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ä¸‹é¢å°±å¼€å§‹è¯´è¯´ <strong>Room</strong> çš„ç»“æ„ã€‚</p><p>Roomä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ <strong>Database</strong>(æ•°æ®åº“) ã€<strong>Entity</strong>(å®ä½“) ã€<strong>DAO</strong>(æ•°æ®è®¿é—®å¯¹è±¡) </p><h2 id="Database-æ•°æ®åº“"><a href="#Database-æ•°æ®åº“" class="headerlink" title="Database(æ•°æ®åº“)"></a>Database(æ•°æ®åº“)</h2><p>æ•°æ®åº“æŒ‡çš„å°±æ˜¯ä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ï¼Œå®ƒç»§æ‰¿äº <strong>RoomDataBase</strong> è¿™ä¸ªç±»ï¼Œå¹¶ä¸”éœ€è¦ç”¨ <strong>@DataBase</strong> æ³¨è§£ï¼Œè·å–è¿™ä¸ªæ•°æ®åº“å¯¹è±¡çš„æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨ <strong>Room.databaseBuilder()</strong> æˆ–è€… <strong>Room.inMemoryDatabaseBuilder()</strong> ï¼Œåè€…è¡¨ç¤ºåœ¨å†…å­˜ä¸­å­˜å‚¨æ•°æ®ï¼Œå¦‚æœç¨‹åºç»“æŸäº†æ•°æ®ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬è¿˜æ˜¯ä½¿ç”¨å‰è€…ã€‚</p><h2 id="Entity-å®ä½“"><a href="#Entity-å®ä½“" class="headerlink" title="Entity(å®ä½“)"></a>Entity(å®ä½“)</h2><p>å®ä½“çš„æ¦‚å¿µå°±æ¯”è¾ƒç®€å•äº†ï¼Œå°±ç±»ä¼¼äºMySQLæ•°æ®åº“é‡Œé¢çš„è¡¨ï¼Œä¸€ä¸ªå®ä½“ç±»ç›¸å½“äºä¸€ä¸ªè¡¨ï¼Œè€Œä¸€ä¸ªå®ä½“ç±»æœ‰å¤šä¸ªå±æ€§ï¼Œå°±ç›¸å½“äºè¡¨çš„å¤šä¸ªå­—æ®µï¼Œè¿™ä¸ªçœ‹ä¸€çœ‹æ¥ä¸‹æ¥å…³äº <strong>Entity</strong> çš„ä»£ç ä¾¿ä¸€ç›®äº†ç„¶ã€‚</p><h2 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h2><p>å…³äº <strong>DAO</strong> ï¼ŒæŠ½è±¡çš„æ¦‚å¿µå°±è¡¨ç¤º<strong>æ•°æ®è®¿é—®å¯¹è±¡</strong>ï¼Œåœ¨è¿™é‡Œç®€å•çš„è§£é‡Šä¸€ä¸‹å°±æ˜¯æ•°æ®æ“ä½œæ¥å£ï¼Œå¯ä»¥é€šè¿‡ç¼–å†™ <strong>DAOæ¥å£</strong> å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚  </p><blockquote><p>PS:è¿™äº›æ¥å£å¯ä»¥æ”¯æŒRxJavaçš„å“¦ï¼</p></blockquote><p>ä¸‹é¢æ˜¯å›¾ç‰‡è¯´æ˜ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/009.png" alt="image"></p><h1 id="ä¸‰ã€å¼€å§‹ä½¿ç”¨"><a href="#ä¸‰ã€å¼€å§‹ä½¿ç”¨" class="headerlink" title="ä¸‰ã€å¼€å§‹ä½¿ç”¨"></a>ä¸‰ã€å¼€å§‹ä½¿ç”¨</h1><p>åœ¨ <strong>Room</strong> çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ˜¯é‡åˆ°ä¸€äº›å‘çš„ï¼Œä¸è¿‡éƒ½å·²ç»è§£å†³æ‰äº†ã€‚å¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡æŸäº›é—®é¢˜ï¼Œä¸å¦¨å¯¹ç…§ä¸€ä¸‹æˆ‘çš„æ¥å…¥æµç¨‹ï¼Œè¯´ä¸å®šå°±æ‰¾åˆ°äº†é—®é¢˜æ‰€åœ¨ã€‚</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/008.png" alt="image"></p><h2 id="æ¥å…¥Gradle"><a href="#æ¥å…¥Gradle" class="headerlink" title="æ¥å…¥Gradle"></a>æ¥å…¥Gradle</h2><p>ä¸ºäº†é¿å…ä¹‹åçš„å•å…ƒæµ‹è¯•å‡ºç° <font color="#DC143C">java.lang.RuntimeException: Method e in android.util.Log not mocked. See <a href="http://g.co/androidstudio/not-mocked" target="_blank" rel="noopener">http://g.co/androidstudio/not-mocked</a> for details.</font> çš„é”™è¯¯ï¼Œé™¤äº† <strong>Room</strong> ç›¸å…³çš„ä¾èµ–éœ€è¦æ·»åŠ å¤–ï¼Œè¿™é‡Œè¿˜éœ€è¦å†å¼•ç”¨ä¸€ä¸‹ <strong>robolectricå•å…ƒæµ‹è¯•åº“</strong> è§£å†³é—®é¢˜ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    //roomæ•°æ®åº“</span><br><span class="line">    def room_version = &quot;1.1.1&quot;</span><br><span class="line">    implementation &quot;android.arch.persistence.room:runtime:$room_version&quot;</span><br><span class="line">    annotationProcessor &quot;android.arch.persistence.room:compiler:$room_version&quot;</span><br><span class="line">    kapt &quot;android.arch.persistence.room:compiler:$room_version&quot;      // ç”±äºè¦ä½¿ç”¨Kotlin,è¿™é‡Œä½¿ç”¨äº†kapt</span><br><span class="line">    implementation &quot;android.arch.persistence.room:rxjava2:$room_version&quot;        //ä¹‹åä¼šç”¨åˆ°rxjavaï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿå¯ä»¥æœ‰</span><br><span class="line">//    implementation &quot;android.arch.persistence.room:guava:$room_version&quot;        //ç”±äºæˆ‘ä»¬ä¸ç”¨guavaï¼Œè¿™è¡Œæ³¨é‡Šæ‰</span><br><span class="line">    testImplementation &quot;android.arch.persistence.room:testing:$room_version&quot; </span><br><span class="line">    </span><br><span class="line">    //robolectricæµ‹è¯•</span><br><span class="line">    testImplementation &apos;org.robolectric:shadows-multidex:3.8&apos;</span><br><span class="line">    testImplementation &quot;org.robolectric:robolectric:3.8&quot;</span><br><span class="line">    //è¿™æ ·å°±èµ„ç“·å•å…ƒæµ‹è¯•å’¯ï¼</span><br></pre></td></tr></table></figure><p>å’Œæˆ‘ä¸€æ ·ä½¿ç”¨Kotlinçš„ç«¥é‹åˆ«å¿˜äº†ä¸‹é¢è¿™è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;kotlin-kapt&apos;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ï¼Œéœ€è¦åšå¦‚ä¸‹æ›´æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">androidTestImplementation &apos;com.android.support.test:runner:1.0.2&apos;</span><br><span class="line"></span><br><span class="line">//æ›´æ”¹ä¸º</span><br><span class="line">implementation &apos;com.android.support.test:runner:1.0.2&apos;</span><br></pre></td></tr></table></figure><p>è¿™ç‚¹ä¸€å®šè¦æ”¹å“¦ï¼ä¸ç„¶ä¼šå‡ºç°ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜</p><p>ç›¸å…³åº“çš„ä¾èµ–æˆåŠŸæ·»åŠ åå°±å¯ä»¥å¼€å§‹åŠ¨æ‰‹äº†ï¼</p><h2 id="åˆ›å»º-Entityã€Dao-ä¸-DataBase"><a href="#åˆ›å»º-Entityã€Dao-ä¸-DataBase" class="headerlink" title="åˆ›å»º Entityã€Dao ä¸ DataBase"></a>åˆ›å»º Entityã€Dao ä¸ DataBase</h2><h3 id="åˆ›å»ºEntity"><a href="#åˆ›å»ºEntity" class="headerlink" title="åˆ›å»ºEntity"></a>åˆ›å»ºEntity</h3><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª <strong>Entity</strong> å¯¹è±¡ï¼Œå°±æŠŠå®ƒå‘½åä¸º <strong>Book</strong> å§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">class Book(@field:ColumnInfo(name = &quot;book_name&quot;)</span><br><span class="line">           var bookName: String?, var author: String?, var type: String?) &#123;</span><br><span class="line"></span><br><span class="line">    @PrimaryKey(autoGenerate = true)</span><br><span class="line">    var id: Int = 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Book</strong> æœ‰ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºä¹¦åã€ä½œè€…ã€ç±»å‹ã€‚å…¶ä¸­æœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>æ¯ä¸ª <strong>Entityå¯¹è±¡</strong> éƒ½éœ€è¦ä½¿ç”¨ <strong>@Entity</strong> æ³¨é‡Šå£°æ˜</li><li><strong>@PrimaryKey</strong> æ³¨é‡Šç”¨äºå£°æ˜ä¸»é”®ï¼Œè¿™é‡Œè¿˜æ·»åŠ äº† autoGenerate = trueï¼Œè¡¨ç¤ºå®ƒæ˜¯è‡ªå¢çš„</li><li><strong>@ColumnInfo</strong> æ³¨é‡Šç”¨æ¥ç»™å±æ€§è®¾ç½®åˆ«åï¼Œå¦‚æœ <strong>bookName</strong> å±æ€§ä¸è®¾ç½®åˆ«åçš„è¯ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å¯ä»¥é€šè¿‡ â€œ<strong>bookName</strong>â€è¿›è¡ŒæŸ¥è¯¢ï¼Œè®¾ç½®åˆ«ååå°±å¯ä»¥é€šè¿‡è®¾ç½®çš„â€œ<strong>book_name</strong>â€ è¿›è¡ŒæŸ¥è¯¢äº†ï¼Œçœ‹ <strong>DAOæ¥å£</strong> ä¾¿çŸ¥</li></ul><h3 id="åˆ›å»º-DAO"><a href="#åˆ›å»º-DAO" class="headerlink" title="åˆ›å»º DAO"></a>åˆ›å»º DAO</h3><p>è¿™é‡Œï¼Œé€šè¿‡ <strong>DAOæ¥å£</strong> æ¥å¯¹ <strong>Book</strong> è¿™ä¸ªå¯¹è±¡è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">interface BookDao &#123;</span><br><span class="line"></span><br><span class="line">    @get:Query(&quot;SELECT * FROM book&quot;)</span><br><span class="line">    val all: List&lt;Book&gt;</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM book WHERE author LIKE :author&quot;)</span><br><span class="line">    fun getBookByAuthor(author: String): List&lt;Book&gt;</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM book WHERE book_name LIKE :name&quot;)</span><br><span class="line">    fun getBookByNamer(name: String): List&lt;Book&gt;</span><br><span class="line"></span><br><span class="line">    @Insert</span><br><span class="line">    fun insert(book: Book): Long?</span><br><span class="line"></span><br><span class="line">    @Insert</span><br><span class="line">    fun insert(vararg books: Book): List&lt;Long&gt;</span><br><span class="line"></span><br><span class="line">    @Insert</span><br><span class="line">    fun insert(books: List&lt;Book&gt;): List&lt;Long&gt;</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    fun update(book: Book): Int</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    fun update(vararg books: Book): Int</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    fun update(books: List&lt;Book&gt;): Int</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    fun delete(book: Book): Int</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    fun delete(vararg books: Book): Int</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    fun delete(books: List&lt;Book&gt;): Int</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <strong>DAOæ¥å£</strong>ï¼ŒåŒæ ·éœ€è¦è¿›è¡Œå‡ ç‚¹è¯´æ˜ï¼š</p><ul><li><strong>DAOæ¥å£</strong> éœ€è¦ä½¿ç”¨ <strong>@Dao</strong> æ³¨é‡Šè¿›è¡Œå£°æ˜</li><li><strong>Insert</strong> æ“ä½œå¯ä»¥ä½¿ç”¨ <strong>Long</strong> ä½œä¸ºè¿”å›å€¼çš„ç±»å‹ï¼Œè¡¨ç¤ºæ’å…¥æ“ä½œå‰çš„å¯¹è±¡æ•°é‡</li><li><strong>Update</strong> å’Œ <strong>Delete</strong> æ“ä½œå¯ä»¥ä½¿ç”¨ Int ä½œä¸ºè¿”å›å€¼ï¼Œè¡¨ç¤ºæ›´æ–°æˆ–è€…åˆ é™¤çš„è¡Œæ•°</li><li>è¿”å›ç±»å‹è¿˜å¯ä»¥æ˜¯ <strong>void</strong> ï¼Œå¦‚æœç»“åˆ <strong>Rxjava</strong> ä½¿ç”¨çš„è¯è¿˜å¯ä»¥æ˜¯ <strong>Completableã€Singleã€ Maybeã€Flowable</strong>ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è§è¿™ç¯‡æ–‡ç« ï¼š<a href="https://medium.com/androiddevelopers/room-rxjava-acb0cd4f3757" target="_blank" rel="noopener">Room ğŸ”— RxJava</a>(éœ€è¦å¤‡å¥½æ¢¯å­ï¼Œä¸è¿‡åç»­æœ‰æ—¶é—´çš„è¯æˆ‘ä¹Ÿä¼šä»‹ç»ä¸€ä¸‹Roomæ­é…Rxjavaçš„ä½¿ç”¨)</li></ul><p><strong>Daoæ¥å£</strong> ç¼–å†™å®Œæˆåï¼Œè¿˜å‰©ä¸‹æœ€é‡è¦çš„ <strong>DataBase</strong></p><h3 id="åˆ›å»º-DataBase"><a href="#åˆ›å»º-DataBase" class="headerlink" title="åˆ›å»º DataBase"></a>åˆ›å»º DataBase</h3><blockquote><p>ç”±äºå®ä¾‹åŒ–ä¸€ä¸ª <strong>RoomDatabase</strong> å¯¹è±¡çš„å¼€é”€æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œæ‰€ä»¥ <strong>DataBase</strong> çš„ä½¿ç”¨éœ€è¦éµå¾ªå•ä¾‹æ¨¡å¼ï¼Œåªåœ¨å…¨å±€åˆ›å»ºä¸€ä¸ªå®ä¾‹å³å¯ã€‚</p></blockquote><p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œè¿˜æ˜¯ä½¿ç”¨javaä»£ç å»åˆ›å»ºä¸€ä¸ª <strong>BookDataBaseç±»</strong>ï¼Œå½“ç„¶ï¼Œè½¬æ¢æˆKotlinåªéœ€è¦Shift + Alt + Ctrl + K å³å¯</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é¥¿æ±‰å¼çš„å•ä¾‹æ¨¡å¼ï¼Œåœ¨Kotlinä¸­é€šè¿‡objectä¿®é¥°å¯è¾¾åˆ°åŒæ ·æ•ˆæœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@Database(entities = &#123;Book.class&#125;, version = 1)</span><br><span class="line">public abstract class BookDataBase extends RoomDatabase &#123;</span><br><span class="line">    public abstract BookDao bookDao();</span><br><span class="line">    private static BookDataBase instance;</span><br><span class="line"></span><br><span class="line">    public static BookDataBase getInstance(Context context)&#123;</span><br><span class="line">        if (instance == null)&#123;</span><br><span class="line">            synchronized (BookDataBase.class)&#123;</span><br><span class="line">                if (instance == null)&#123;</span><br><span class="line">                    instance = create(context);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static BookDataBase create(Context context) &#123;</span><br><span class="line">        return Room.databaseBuilder( context,BookDataBase.class,&quot;book-db&quot;).allowMainThreadQueries().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€äº›éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p><ul><li><strong>@Database</strong> æ³¨é‡Šç”¨äºè¿›è¡Œå£°æ˜ï¼ŒåŒæ—¶è¿˜éœ€è¦æœ‰ç›¸å…³çš„ <strong>entityå¯¹è±¡</strong>ï¼Œå…¶ä¸­ <strong>version</strong> æ˜¯å½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœä½ å¯¹æ•°æ®ç›¸å…³çš„<strong>å®ä½“ç±»ç»“æ„</strong>è¿›è¡Œäº†æ›´æ”¹ï¼Œè¿™é‡Œçš„ <strong>version</strong> å°±éœ€è¦<strong>åŠ ä¸€</strong></li><li><strong>BookDataBase</strong> é™¤äº†ç»§æ‰¿äº <strong>RoomDatabase</strong> ï¼Œè¿˜éœ€è¦å®ä¾‹å‡ºç›¸å…³çš„ <strong>DAOæ¥å£</strong></li><li>create()æ–¹æ³•ä¸­çš„â€<strong>book-db</strong>â€œæ˜¯æ•°æ®åº“çš„åå­—ï¼Œè¿™é‡Œéšæ„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ <strong>allowMainThreadQueries()</strong> æ–¹æ³•ï¼Œè¿™é‡Œç”±äºæˆ‘ä»¬ä¼šç”¨åˆ°å•å…ƒæµ‹è¯•ï¼Œæ‰€ä»¥åŠ ä¸Šè¿™è¡Œä»£ç æ˜¯ä¸ºäº†é˜²æ­¢ ã€<em>Cannot access database on the main thread since it may potentially lock the UI for a long period of time.</em>ã€‘ çš„æŠ¥é”™ã€‚æ­£å¼ä½¿ç”¨æ—¶ï¼Œè¯·åŠ¡å¿…å»æ‰è¿™è¡Œä»£ç ï¼Œå› ä¸ºå®ƒä¼šè®©æ‰€æœ‰è€—æ—¶æ“ä½œè¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼</li></ul><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆæ„‰å¿«çš„è¿›è¡Œæµ‹è¯•äº†.</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="åˆçº§æµ‹è¯•"><a href="#åˆçº§æµ‹è¯•" class="headerlink" title="åˆçº§æµ‹è¯•"></a>åˆçº§æµ‹è¯•</h3><p>æ‰¾åˆ° <strong>src</strong> ä¸‹çš„ <strong>test</strong> ç›®å½•ï¼Œç„¶åå¯ä»¥åƒæˆ‘è¿™æ ·åˆ›å»ºä¸€ä¸ª <strong>RoomTest</strong> ç±»è¿›è¡Œæµ‹è¯•</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/010.png" alt="image"></p><p>è¯´åˆ°è¿™é‡Œï¼Œå¯èƒ½ä¼šæœ‰ç«¥é‹å°šæœªäº†è§£è¿‡å•å…ƒæµ‹è¯•ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥å…ˆå»çœ‹çœ‹ç›¸å…³åšå®¢ï¼Œæ¯”å¦‚è¿™ç¯‡</p><p><a href="https://juejin.im/post/5b57e3fbf265da0f47352618" target="_blank" rel="noopener">Android å•å…ƒæµ‹è¯•åªçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></p><p>ä¸è¿‡è¿™é‡Œä½¿ç”¨çš„å•å…ƒæµ‹è¯•æ˜¯ Android Studio è‡ªå¸¦çš„ï¼Œä¹Ÿæ²¡æœ‰ç”¨åˆ°å¤ªå¤æ‚çš„ä¸œè¥¿ï¼ŒåŒæ—¶æˆ‘ä¼šåšä¸€äº›è¯´æ˜ï¼Œä¸å¤Ÿäº†è§£çš„ç«¥é‹ä¹Ÿå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œçœ‹å®Œä½ ä¹Ÿå°±äº†è§£äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(AndroidJUnit4::class)</span><br><span class="line">class RoomTest &#123;</span><br><span class="line"></span><br><span class="line">    private var bookDao: BookDao? = null</span><br><span class="line">    private var bookDataBase: BookDataBase? = null</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    @Throws(Exception::class)</span><br><span class="line">    fun setUp() &#123;</span><br><span class="line">        ShadowLog.stream = System.out      //è¿™æ ·æ–¹ä¾¿æ‰“å°æ—¥å¿—</span><br><span class="line">        val context = InstrumentationRegistry.getTargetContext()</span><br><span class="line">        bookDataBase = BookDataBase.getInstance(context)</span><br><span class="line">        bookDao = bookDataBase!!.bookDao()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    fun insert() &#123;</span><br><span class="line">        val book1 = Book(&quot;æ—¶é—´ç®€å²&quot;, &quot;æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘&quot;, &quot;ç§‘å­¦&quot;)</span><br><span class="line">        val book2 = Book(&quot;ç™¾å¹´å­¤ç‹¬&quot;, &quot;è¥¿äºšÂ·é©¬å°”å…‹æ–¯&quot;, &quot;æ–‡å­¦&quot;)</span><br><span class="line">        val list = bookDao!!.insert(book1, book2)</span><br><span class="line"></span><br><span class="line">        assert(list.size == 2)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    fun query()&#123;</span><br><span class="line">        val books = bookDao!!.all</span><br><span class="line">        for (book in books) &#123;</span><br><span class="line">            Log.e(javaClass.name, &quot;è·å–çš„ä¹¦ç±æ•°æ®: $&#123;Gson().toJson(book)&#125;&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After</span><br><span class="line">    @Throws(Exception::class)</span><br><span class="line">    fun cloaseDb() &#123;</span><br><span class="line">        bookDataBase?.close()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„å•å…ƒæµ‹è¯•ä½¿ç”¨çš„æ˜¯ <strong>AndroidJUnit4</strong>ï¼Œé€šè¿‡ <strong>@Before</strong> æ³¨é‡Šçš„æ–¹æ³•ï¼Œè¡¨ç¤ºç”¨äº<strong>ç›¸å…³èµ„æºçš„åˆå§‹åŒ–</strong>ï¼Œç±»ä¼¼äºActivityçš„onCreate()æ–¹æ³•ï¼›è€Œé€šè¿‡ <strong>@After</strong> æ³¨é‡Šçš„æ–¹æ³•ï¼Œåˆ™æ˜¯ç”¨äº<strong>ç›¸å…³èµ„æºçš„é”€æ¯</strong>ï¼Œç±»ä¼¼äºActivityçš„onDestroy()æ–¹æ³•ã€‚</p><p>å‰©ä¸‹çš„ï¼Œé€šè¿‡ <strong>@Test</strong> æ³¨é‡Šçš„æ–¹æ³•å°±è¡¨ç¤ºç”¨äºæµ‹è¯•çš„å•å…ƒï¼Œæ¯ä¸ªæµ‹è¯•ç±»é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªæµ‹è¯•å•å…ƒï¼Œè¿™é‡Œç›®å‰åªå†™äº†æ’å…¥å’ŒæŸ¥è¯¢ä¸¤ä¸ªå•å…ƒï¼Œåœ¨ <strong>RoomTest</strong> ç±»ä¸Šé€šè¿‡å³é”®è¿è¡Œï¼Œç„¶åçœ‹ä¸€ä¸‹ç»“æœï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/011.png" alt="image"></p><p>åœ¨æµ‹è¯•ä»£ç ä¸­çš„ <strong>insert()å•å…ƒ </strong> é‡Œï¼Œæœ‰è¿™æ ·ä¸€è¡Œä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert(list.size == 2)</span><br></pre></td></tr></table></figure><p>è€Œæµ‹è¯•çš„ç»“æœæ˜¯ä¸€ç‰‡ç»¿è‰²ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªæ–­è¨€æ˜¯æ­£ç¡®çš„ï¼Œliståˆ—è¡¨é•¿åº¦åˆšå¥½ä¸º2ï¼Œè¿™é‡Œä¸ºäº†éªŒè¯è¿”å›çš„listæ˜¯æ•´ä¸ªæ•°æ®åº“é•¿åº¦è¿˜æ˜¯ä»…ä»…è¡¨ç¤ºæ­¤æ¬¡è¿›è¡Œæ’å…¥æ“ä½œçš„é•¿åº¦ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ insert()æµ‹è¯•å•å…ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"> fun insert() &#123;</span><br><span class="line">     val book1 = Book(&quot;æ—¶é—´ç®€å²&quot;, &quot;æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘&quot;, &quot;ç§‘å­¦&quot;)</span><br><span class="line">     val book2 = Book(&quot;ç™¾å¹´å­¤ç‹¬&quot;, &quot;è¥¿äºšÂ·é©¬å°”å…‹æ–¯&quot;, &quot;æ–‡å­¦&quot;)</span><br><span class="line">     val list = bookDao!!.insert(book1, book2)</span><br><span class="line">     assert(list.size == 2)</span><br><span class="line"></span><br><span class="line">     val list2 = bookDao!!.insert(book1, book2)</span><br><span class="line">     assert(list2.size == 4)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™åœ¨ <strong>insert()å•å…ƒæµ‹è¯•åŒºåŸŸ</strong> å³é”®è¿è¡Œï¼Œå°±åªæµ‹è¯•è¿™ä¸€ä¸ªå•å…ƒï¼Œç„¶åç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/012.png" alt="image"></p><p>æˆ‘ä»¬åœ¨ insert()å•å…ƒ ä¸­è¿›è¡Œäº†ä¸¤æ¬¡æ’å…¥æ“ä½œï¼Œæ‰€ä»¥æ•°æ®åº“çš„æ€»é•¿åº¦åº”è¯¥ä¸º 4 ï¼Œè€Œè¿™é‡Œç¬¬39è¡Œçš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert(list2.size == 4)</span><br></pre></td></tr></table></figure><p>è¿”å›çš„cede æ˜¯ -1ï¼Œå°±è¡¨ç¤ºå®é™…ä¸Šæ¯æ¬¡æ’å…¥æ“ä½œè¿”å›çš„åˆ—è¡¨é•¿åº¦åº”è¯¥ä¸ºæ’å…¥çš„æ•°é‡ï¼Œè€Œéæ•°æ®åº“æ€»é‡ã€‚å…¶ä»–æ“ä½œäº¦æ˜¯å¦‚æ­¤ã€‚</p><p>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çš„æµ‹è¯•å¹¶ä¸èƒ½ç›´æ¥ç”¨äºæ­£å¼çš„é¡¹ç›®ä¸­ï¼Œå› ä¸ºæ•°æ®åº“æ“ä½œå±äºè€—æ—¶æ“ä½œï¼Œæ‰€ä»¥ä¸€å®šä¸èƒ½æŠŠè¿™äº›æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹é‡Œï¼Œè€Œæœ€æ–¹ä¾¿çš„çº¿ç¨‹åˆ‡æ¢ï¼Œè«è¿‡äº <strong>Rxjava</strong> å•¦ï¼</p><p>ç°åœ¨å¼€å§‹ä½¿ç”¨ <strong>Rxjava</strong> è¿›è¡Œæµ‹è¯•å§</p><h3 id="ç»“åˆRxjavaçš„æµ‹è¯•"><a href="#ç»“åˆRxjavaçš„æµ‹è¯•" class="headerlink" title="ç»“åˆRxjavaçš„æµ‹è¯•"></a>ç»“åˆRxjavaçš„æµ‹è¯•</h3><p>é¦–å…ˆï¼Œè¦åœ¨é¡¹ç›®ä¸­æ·»åŠ  <strong>Rxjava</strong> çš„ä¾èµ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//rxJava2+rxAndroid</span><br><span class="line">implementation &quot;io.reactivex.rxjava2:rxjava:2.x.y&quot;</span><br><span class="line">implementation &apos;io.reactivex.rxjava2:rxandroid:2.1.0&apos;</span><br></pre></td></tr></table></figure><p>åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼ŒRxJava å¦‚æœåš <strong>IOçº¿ç¨‹</strong> åˆ° <strong>UIçº¿ç¨‹</strong> çš„åˆ‡æ¢æ“ä½œï¼Œç»“æœæ˜¯æ— æ³•è·å–çš„ï¼Œæ‰€ä»¥éœ€è¦å°†è¿™äº›çº¿ç¨‹è¿›è¡Œåˆå¹¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Before</span><br><span class="line">@Throws(Exception::class)</span><br><span class="line">fun setUp() &#123;</span><br><span class="line">    val context = InstrumentationRegistry.getTargetContext()</span><br><span class="line">    bookDataBase = BookDataBase.getInstance(context)</span><br><span class="line">    bookDao = bookDataBase!!.bookDao()</span><br><span class="line">    ShadowLog.stream = System.out</span><br><span class="line"></span><br><span class="line">    initRxJava2()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private fun initRxJava2() &#123;</span><br><span class="line">    RxJavaPlugins.reset()</span><br><span class="line">    RxJavaPlugins.setIoSchedulerHandler &#123; Schedulers.trampoline() &#125;</span><br><span class="line">    RxAndroidPlugins.reset()</span><br><span class="line">    RxAndroidPlugins.setMainThreadSchedulerHandler &#123; Schedulers.trampoline() &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ <strong>@Beforeæ³¨è§£</strong> ä¸‹çš„ <strong>setUp()</strong> æ–¹æ³•ä¸­è¿›è¡ŒRxJavaçš„é…ç½®ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æŠŠRxJavaå¸¸ç”¨çš„çº¿ç¨‹åˆ‡æ¢å†™åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œï¼Œæ–¹ä¾¿å¤ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private fun&lt;T&gt; doWithRxJava(t: T): Observable&lt;T&gt;&#123;</span><br><span class="line">    return Observable.create&lt;T&gt;&#123;it.onNext(t)&#125;</span><br><span class="line">            .subscribeOn(Schedulers.io())</span><br><span class="line">            .unsubscribeOn(Schedulers.io())</span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œå¯¹ <strong>insertå•å…ƒ</strong> å’Œ <strong>queryå•å…ƒ</strong> è¿›è¡Œä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">fun insert() &#123;</span><br><span class="line">    val book1 = Book(&quot;æ—¶é—´ç®€å²&quot;, &quot;æ–¯è’‚èŠ¬Â·å¨å»‰Â·éœé‡‘&quot;, &quot;ç§‘å­¦&quot;)</span><br><span class="line">    val book2 = Book(&quot;ç™¾å¹´å­¤ç‹¬&quot;, &quot;è¥¿äºšÂ·é©¬å°”å…‹æ–¯&quot;, &quot;æ–‡å­¦&quot;)</span><br><span class="line">    doWithRxJava(bookDao!!.insert(book1, book2))</span><br><span class="line">            .subscribe (&#123;</span><br><span class="line">                Log.e(&quot;inserté•¿åº¦ï¼š&quot; , &quot;$&#123;it.size&#125;&quot;)</span><br><span class="line">                assert(it.size == 2)</span><br><span class="line">            &#125;,&#123;</span><br><span class="line">                Log.e(&quot;insertå‡ºé”™ï¼š&quot; , &quot;$&#123;it.stackTrace&#125;-$&#123;it.message&#125;&quot;)</span><br><span class="line">            &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">fun query()&#123;</span><br><span class="line">    doWithRxJava(bookDao?.all)</span><br><span class="line">            .subscribe(&#123;</span><br><span class="line">                for(book in it?: emptyList())&#123;</span><br><span class="line">                    Log.e(javaClass.name, &quot;è·å–çš„ä¹¦ç±æ•°æ®: $&#123;Gson().toJson(book)&#125;&quot;)</span><br><span class="line">                    assert(it?.size == 2)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,&#123;</span><br><span class="line">                Log.e(&quot;queryå‡ºé”™ï¼š&quot; , &quot;$&#123;it.stackTrace&#125;-$&#123;it.message&#125;&quot;)</span><br><span class="line">            &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åçœ‹ä¸€ä¸‹æµ‹è¯•çš„ç»“æœï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/013.png" alt="image"></p><p>é‚£ä¹ˆï¼Œ <strong>Room DataBase</strong> çš„å…¥é—¨æŒ‡å—ï¼Œå°±å†™åˆ°è¿™é‡Œå•¦ï¼</p><p>åç»­æˆ‘å¯èƒ½ä¼šå†å†™ä¸€ç¯‡è¿›é˜¶ç‰ˆçš„æ–‡ç« ï¼Œæ¶µç›–äº†çœŸå®ä½¿ç”¨çš„åœºæ™¯ï¼Œç„¶åçœ‹èƒ½ä¸èƒ½å†™ä¸€ä¸ªç®€å•çš„Demoå‡ºæ¥ï¼Œè¿™æ ·æ›´æ–¹ä¾¿å­¦ä¹ å§ï¼</p><p><del><em>ä¸è¿‡æˆ‘å‘ç°æˆ‘ç°åœ¨çš„æ‡’ç™Œæ˜¯è¶Šæ¥è¶Šä¸¥é‡äº†ï¼Œä¹Ÿä¸çŸ¥é“ä¸‹ä¸€ç¯‡æ˜¯ä»€ä¹ˆæ—¶å€™</em></del></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/014.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯´åˆ°Androidç«¯æœ‰å“ªäº›å¯ä»¥ä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯SQLiteè¿™ç§å¸¦æœ‰å®˜æ–¹å±æ€§åŠ æŒçš„è½»å‹çš„æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å¯¹äºåƒæˆ‘è¿™ç§åŸºæœ¬ä¸Šæ²¡æœ‰æ¥è§¦è¿‡SQLæ•°æ®åº“è¯­è¨€ç¼–å†™çš„äººæ¥è¯´ï¼Œè¦é€šè¿‡å»å†™éš¾ä»¥æŸ¥é”™ä¸”åˆæ¯«ä¸ç†Ÿæ‚‰çš„æ•°æ®åº“ä»£ç æ‰èƒ½æ“ä½œæ•°æ®åº“çš„è¯ï¼Œé‚£å°±å¤ªä»¤äººå¤´å¤§äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Room-Database/001-001.jpg&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;äºæ˜¯ä¹ï¼Œä¾¿äºAndroidå¼€å‘è€…æ“ä½œæ•°æ®åº“çš„æ¡†æ¶ä¹Ÿå°±å¤šäº†èµ·æ¥ï¼Œå…¶ä¸­äººæ°”è¾ƒé«˜çš„å°±æœ‰GreenDaoã€Realmï¼ŒObjectBoxç­‰ï¼Œè€ŒRoomåˆ™æ˜¯è°·æ­Œå®˜æ–¹ååˆ†æ¨èçš„ï¼Œå¯ä»¥ä»£æ›¿SQliteçš„ä¸äºŒä¹‹é€‰ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ</title>
    <link href="http://yoursite.com/2018/10/20/DataBinding%E2%80%94%E2%80%94%E4%BB%8E%E7%9B%B8%E8%AF%86%E5%88%B0%E7%9B%B8%E7%9F%A5%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E4%BA%92%E9%85%8C/"/>
    <id>http://yoursite.com/2018/10/20/DataBindingâ€”â€”ä»ç›¸è¯†åˆ°ç›¸çŸ¥ï¼ˆäºŒï¼‰ï¼šäº’é…Œ/</id>
    <published>2018-10-20T04:55:32.000Z</published>
    <updated>2018-10-20T04:56:35.400Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸Šä¸€ç¯‡é‡Œï¼Œä¸»è¦è®²äº†å…³äºDatabindingçš„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>æ¥å…¥ä¸ä½¿ç”¨</li><li>ç®€å•çš„æ•°æ®ç»‘å®š</li><li>ç‚¹å‡»äº‹ä»¶çš„ç»‘å®š</li></ul><p>è¿™ä¸€ç¯‡å°†ä¼šç»§ç»­ä¸Šä¸€ç¯‡çš„æ­¥ä¼ï¼Œå¯¹DataBindingçš„ä½¿ç”¨æ›´æ·±å‡ åˆ†.é¦–å…ˆä¾æ—§æ˜¯ä»æ•°æ®ç»‘å®šå¼€å§‹<br><a id="more"></a> </p><blockquote><p>ä¹‹å‰æ‰€ä»‹ç»çš„ï¼Œè™½ç„¶UIä¸æ•°æ®è¿›è¡Œäº†ç»‘å®šï¼Œä½†æ˜¯ä¿®æ”¹æ•°æ®å¯¹è±¡çš„æ—¶å€™å¹¶ä¸ä¼šåŒæ—¶æ›´æ–° <strong>UI</strong> .<br>ç°åœ¨æœ‰ä¸‰ç§ä¸åŒç±»å‹çš„ <strong>observable</strong> ç±»ï¼š<strong>objects</strong>, <strong>fields</strong>, è¿˜æœ‰ <strong>collections</strong>.<br>å½“å…¶ä¸­æŸä¸ª <strong>observable</strong> æ•°æ®å¯¹è±¡ç»‘å®šåˆ° <strong>UI</strong> å¹¶ä¸”æ•°æ®å¯¹è±¡çš„å±æ€§å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œ UI å°†è‡ªåŠ¨æ›´æ–°ï¼Œä¸‹é¢å¼€å§‹ä»‹ç».</p></blockquote><h1 id="Observableæ•°æ®"><a href="#Observableæ•°æ®" class="headerlink" title="Observableæ•°æ®"></a>Observableæ•°æ®</h1><p>å¦‚æœä½ çš„æ•°æ®ç±»åªæœ‰å‡ ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæ²¡å¿…è¦å»å®ç° <strong>Observable</strong> æ¥å£æ¥ç›‘å¬æ•°æ®çš„æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™äº›å­—æ®µï¼š</p><ul><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableBoolean.html" target="_blank" rel="noopener"><strong>ObservableBoolean</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableByte.html" target="_blank" rel="noopener"><strong>ObservableByte</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableChar.html" target="_blank" rel="noopener"><strong>ObservableChar</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableShort.html" target="_blank" rel="noopener"><strong>ObservableShort</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableInt.html" target="_blank" rel="noopener"><strong>ObservableInt</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableLong.html" target="_blank" rel="noopener"><strong>ObservableLong</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableFloat.html" target="_blank" rel="noopener"><strong>ObservableFloat</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableDouble.html" target="_blank" rel="noopener"><strong>ObservableDouble</strong></a></li><li><a href="https://developer.android.google.cn/reference/android/databinding/ObservableParcelable.html" target="_blank" rel="noopener"><strong>ObservableParcelable</strong></a></li></ul><p>ç°åœ¨ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªç±»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class ObservableBean &#123;</span><br><span class="line">    val text = ObservableField&lt;String&gt;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¸ƒå±€æ–‡ä»¶æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable name=&quot;model&quot; type=&quot;com.test.project.testdatabinding.MVP.DataBinding.Bean.ObservableBean&quot;/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:orientation=&quot;vertical&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;EditText</span><br><span class="line">            android:id=&quot;@+id/et_test&quot;</span><br><span class="line">            android:text=&quot;@=&#123;model.text&#125;&quot;</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_test&quot;</span><br><span class="line">            android:text=&quot;@&#123;model.text&#125;&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;/&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„ <strong>EditText</strong> çš„ <strong>text</strong> å±æ€§ä½¿ç”¨çš„æ˜¯ <strong>@={}</strong> è€Œ <strong>TextView</strong> ä½¿ç”¨çš„æ˜¯ <strong>@{}</strong> ã€‚å½“ä½ æƒ³è¦ä½¿ç”¨åŒå‘ç»‘å®šçš„æ—¶å€™ï¼Œå¯åˆ«å¿˜äº†è¿™ä¸ª <strong>=</strong> å·</p><p>Activityçš„ä»£ç åªæ”¹å˜äº†ç»‘å®šå¯¹è±¡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class DataBindingActivity&lt;T&gt; : AppCompatActivity() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">//        setContentView(R.layout.activity_data_binding)</span><br><span class="line">        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)</span><br><span class="line">        bindingBinding.model = ObservableBean()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/two/databinding-001.gif" alt="image"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç›´æ¥ä½¿ç”¨ <strong>Observable</strong> å­—æ®µå»å®ç°åŒå‘æ•°æ®ç»‘å®šæ˜¯å¾ˆè½»æ¾çš„ï¼Œä¸è¿‡å®é™…é¡¹ç›®é‡Œé¢éœ€æ±‚å„ä¸ç›¸åŒï¼Œè¦å°†æ•°æ®éƒ½æ¢æˆ <strong>Observable</strong> å­—æ®µè¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæ‰€ä»¥è‡ªå®šä¹‰åŒå‘æ•°æ®ç»‘å®šéå¸¸æœ‰å¿…è¦ï¼</p><p>è¿™æ—¶å¯¹ <strong>ObservableBean</strong> è¿›è¡Œä¿®æ”¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class ObservableBean : BaseObservable() &#123;</span><br><span class="line">    @get:Bindable</span><br><span class="line">    var text: String = &quot;&quot;</span><br><span class="line">    set(value) &#123;</span><br><span class="line">        field = value</span><br><span class="line">        notifyPropertyChanged(BR.text)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç›¸è¾ƒäºKotlinå†™æ³•ï¼Œè¿™é‡Œæˆ‘è§‰å¾—Javaå†™æ³•æ›´æœ‰åŠ©äºç†è§£ï¼š</span><br><span class="line">public  class ObservableBean extends BaseObservable &#123;</span><br><span class="line">    private String text;</span><br><span class="line"></span><br><span class="line">    @Bindable</span><br><span class="line">    public String getText() &#123;</span><br><span class="line">        return text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ObservableBean setText(String text) &#123;</span><br><span class="line">        this.text = text;</span><br><span class="line">        notifyPropertyChanged(BR.text);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹è¿‡åçš„æ•ˆæœä¸ä¹‹å‰ä½¿ç”¨ <strong>Observable</strong> å­—æ®µçš„æ•ˆæœä¸€æ ·ï¼Œä¸Šé¢éœ€è¦æ³¨æ„çš„ä¸¤ç‚¹ï¼š</p><ul><li>ä½¿ç”¨äº† <strong>@Bindable</strong> æ³¨è§£ï¼Œè¿›è¡Œç»‘å®šå£°æ˜</li><li>ä½¿ç”¨äº† <strong>notifyPropertyChanged()</strong> æ–¹æ³•ä¸ºæ•°æ®åˆ·æ–°åšå‡†å¤‡</li></ul><p>ä¸è¿‡åœ¨æˆ‘çœ‹æ¥ï¼Œé€šè¿‡è¿™ç§ç»§æ‰¿çš„æ–¹æ³•å¯¹äºæˆ‘ä»¬åŸæœ‰çš„æ•°æ®ç»“æ„å¹¶ä¸è¿‡å‹å¥½ï¼Œå°¤å…¶æ˜¯ç»§æ‰¿äº† <strong>BaseObservable</strong> ç±»çš„æ•°æ®ç±»ä¸èƒ½é€šè¿‡  <strong>Gson</strong> å»ä¸ <strong>Json</strong> ç›¸äº’è½¬æ¢ã€‚</p><p>æ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡æŸä¸ªä¸­ä»‹ç±»çš„æ–¹å¼å»è¿›è¡Œè½¬æ¢.</p><h1 id="å¸ƒå±€çš„ç»‘å®š"><a href="#å¸ƒå±€çš„ç»‘å®š" class="headerlink" title="å¸ƒå±€çš„ç»‘å®š"></a>å¸ƒå±€çš„ç»‘å®š</h1><p>ç¬¬ç¬¬ä¸€ç¯‡ä¸­ï¼Œæœ‰å†™åˆ°Activityä¸­å¦‚ä½•è·å–è‡ªåŠ¨ç”Ÿæˆçš„å¸ƒå±€ç»‘å®šç±»â€”â€”xxxBindingï¼Œè¿™ç§ç±»çš„å‘½åä¸ä½¿ç”¨æ•°æ®ç»‘å®šçš„å¸ƒå±€æ–‡ä»¶xmlæœ‰å…³ï¼Œæ¯”å¦‚è¯´ <strong>activity_main.xml</strong> å°±ä¼šç”Ÿæˆ <strong>ActivityMainBinding</strong> </p><p>è¿™é‡Œå†è¯¦ç»†è¯´æ˜ä¸€ä¸‹ï¼Œä¸åŒç±»å‹çš„å¸ƒå±€ï¼Œåº”è¯¥æ€ä¹ˆè·å–ç”Ÿæˆçš„ <strong>Bindingç»‘å®šç±»</strong> </p><blockquote><p>äº‹å…ˆå¹¶ä¸çŸ¥é“ç»‘å®šç±»å‹çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ <strong>DataBindingUtil</strong> å»åˆ›å»ºç»‘å®š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val rootView = LayoutInflater.from(this).inflate(layoutId, parent, attachToParent)</span><br><span class="line">val binding: ViewDataBinding? = DataBindingUtil.bind(viewRoot)</span><br></pre></td></tr></table></figure><h2 id="è·å–å¸¦-ID-çš„-Viewå¯¹è±¡"><a href="#è·å–å¸¦-ID-çš„-Viewå¯¹è±¡" class="headerlink" title="è·å–å¸¦ ID çš„ Viewå¯¹è±¡"></a>è·å–å¸¦ ID çš„ Viewå¯¹è±¡</h2><p>å¦‚æœä½¿ç”¨çš„æ˜¯Kotlinï¼Œå¯ä»¥ç›´æ¥åœ¨Activityé‡Œå¾ˆæ–¹ä¾¿çš„ä½¿ç”¨idè·å–Viewå¯¹è±¡ï¼Œä¸è¿‡ä½¿ç”¨DataBindingåï¼Œå°±æœ‰å¦å¤–ä¸€ç§è·å–Viewå¯¹è±¡çš„æ–¹å¼äº†</p><p>å¸ƒå±€é‡Œé¢çš„ Id å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=&quot;@+id/et_test&quot;</span><br><span class="line">        android:text=&quot;@=&#123;model.text&#125;&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é€šè¿‡ Id è·å– EditText çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">super.onCreate(savedInstanceState)</span><br><span class="line">val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)</span><br><span class="line">bindingBinding.model = ObservableBean()</span><br><span class="line">val editText = bindingBinding.root.rootView.findViewById&lt;EditText&gt;(R.id.et_test)</span><br></pre></td></tr></table></figure><blockquote><p><strong>ç«‹å³ç»‘å®š</strong>  </p><p>å½“å˜é‡æˆ–å¯è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œç»‘å®šä¼šåœ¨ä¸‹ä¸€å¸§ä¹‹å‰æ›´æ”¹ã€‚ ä¸è¿‡æœ‰çš„æ—¶å€™éœ€è¦ç«‹åˆ»æ‰§è¡Œç»‘å®š.  </p><p>è‹¥è¦å¼ºåˆ¶æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ <strong>executePendingBindings()</strong> æ–¹æ³•ã€‚</p></blockquote><h2 id="é«˜çº§ç»‘å®š"><a href="#é«˜çº§ç»‘å®š" class="headerlink" title="é«˜çº§ç»‘å®š"></a>é«˜çº§ç»‘å®š</h2><p>æœ‰æ—¶å€™ï¼Œç‰¹å®šçš„ç»‘å®šç±»æ˜¯æœªçŸ¥çš„.  </p><p>ä¾‹å¦‚ï¼Œé’ˆå¯¹ä»»æ„å¸ƒå±€æ“ä½œçš„ <strong>RecyclerView.Adapter</strong> ä¸çŸ¥é“ç‰¹å®šçš„ç»‘å®šç±».å®ƒä»ç„¶å¿…é¡»åœ¨è°ƒç”¨ <strong>onBindViewHolder()</strong> æ–¹æ³•æ—¶åˆ†é…ç»‘å®šå€¼.</p><p>åœ¨ <strong>RecyclerView</strong> çš„  <strong>onBindViewHolder()</strong> æ–¹æ³•é‡Œï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">override fun onBindViewHolder(holder: BindingHolder, position: Int) &#123;</span><br><span class="line">    item: T = mItems.get(position)</span><br><span class="line">    holder.binding.setVariable(BR.item, item);</span><br><span class="line">    holder.binding.executePendingBindings();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-BindingAdapterè‡ªå®šä¹‰ç»‘å®šé€»è¾‘"><a href="#ä½¿ç”¨-BindingAdapterè‡ªå®šä¹‰ç»‘å®šé€»è¾‘" class="headerlink" title="ä½¿ç”¨@BindingAdapterè‡ªå®šä¹‰ç»‘å®šé€»è¾‘"></a>ä½¿ç”¨@BindingAdapterè‡ªå®šä¹‰ç»‘å®šé€»è¾‘</h2><p>DataBindingä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å¯ä»¥å¯¹ç»‘å®šé€»è¾‘è¿›è¡Œè‡ªå®šä¹‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´æˆ‘æƒ³åœ¨xmlä¸­å¯¹ä¸€ä¸ªImageViewæ§ä»¶åŠ è½½å›¾ç‰‡ï¼Œå¹¶ä¸”æ˜¯ä½¿ç”¨çš„GlideåŠ è½½æ¡†æ¶ï¼Œè¿™æ—¶å€™å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//éšä¾¿åˆ›å»ºä¸€ä¸ªç±»ï¼Œç„¶ååœ¨ç±»ä¸­å®šä¹‰å¦‚ä¸‹æ–¹æ³•</span><br><span class="line">@BindingAdapter(&quot;imageUrl&quot;)</span><br><span class="line">fun loadImage(view: ImageView, url: String) &#123;</span><br><span class="line">    GlideApp.with(view.getContext())</span><br><span class="line">   .load(url)</span><br><span class="line">   .fitCenter()</span><br><span class="line">   .into(view);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”å±æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView </span><br><span class="line">app:imageUrl=&quot;@&#123;model.imageUrl&#125;&quot;  /&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <strong>@BindAdapter</strong> å‡ ä¹å¯ä»¥å®Œæˆä½ æƒ³è¦çš„å„ç§é€»è¾‘ï¼Œä¸è¿‡æˆ‘è§‰å¾—ï¼Œåªæœ‰é‚£ç§ä½¿ç”¨ç‡ç‰¹åˆ«é«˜çš„ä»£ç ï¼Œæ‰æœ€é€‚åˆè¿™ä¸ªå±æ€§.</p><h2 id="ä½¿ç”¨-BindingConversionå®Œæˆè½¬æ¢åŠŸèƒ½"><a href="#ä½¿ç”¨-BindingConversionå®Œæˆè½¬æ¢åŠŸèƒ½" class="headerlink" title="ä½¿ç”¨@BindingConversionå®Œæˆè½¬æ¢åŠŸèƒ½"></a>ä½¿ç”¨@BindingConversionå®Œæˆè½¬æ¢åŠŸèƒ½</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹å®šç±»å‹ä¹‹é—´éœ€è¦è‡ªå®šä¹‰è½¬æ¢ã€‚ ä¾‹å¦‚ï¼Œè§†å›¾çš„android:backgroundå±æ€§éœ€è¦Drawableï¼Œä½†æŒ‡å®šçš„é¢œè‰²å€¼æ˜¯æ•´æ•°ã€‚ </p><p>å®˜æ–¹ä¾‹å­ä¸­ï¼Œè½¬æ¢åŠŸèƒ½çš„å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@BindingConversion</span><br><span class="line">fun convertColorToDrawable(color: Int) = ColorDrawable(color)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„æ—¶å€™å¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;View</span><br><span class="line">   android:background=&quot;@&#123;isError ? @drawable/error : @color/white&#125;&quot;</span><br><span class="line">   android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">   android:layout_height=&quot;wrap_content&quot;/&gt;</span><br></pre></td></tr></table></figure><h1 id="æš‚æ­‡"><a href="#æš‚æ­‡" class="headerlink" title="æš‚æ­‡"></a>æš‚æ­‡</h1><p>æœ¬ç¯‡å…³äºDataBindinçš„ä»‹ç»ä¹Ÿå°±åˆ°æ­¤ç»“æŸï¼Œä¸è¿‡DataBindingçš„ä½¿ç”¨è¿˜æ²¡æœ‰åˆ°å¤´ï¼Œä¸‹ä¸€ç¯‡å°†ä¼šä¾§é‡å®é™…ä¸Šçš„æ“ä½œä»¥åŠDataBindingè¿˜å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥å“ªäº›ä¾¿æ·.</p><hr><h1 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¸Šä¸€ç¯‡é‡Œï¼Œä¸»è¦è®²äº†å…³äºDatabindingçš„ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¥å…¥ä¸ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;ç®€å•çš„æ•°æ®ç»‘å®š&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»äº‹ä»¶çš„ç»‘å®š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸€ç¯‡å°†ä¼šç»§ç»­ä¸Šä¸€ç¯‡çš„æ­¥ä¼ï¼Œå¯¹DataBindingçš„ä½¿ç”¨æ›´æ·±å‡ åˆ†.é¦–å…ˆä¾æ—§æ˜¯ä»æ•°æ®ç»‘å®šå¼€å§‹&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡</title>
    <link href="http://yoursite.com/2018/10/17/DataBinding%E2%80%94%E2%80%94%E4%BB%8E%E8%B7%AF%E4%BA%BA%E5%88%B0%E5%A5%BD%E5%8F%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%88%9D%E9%81%87/"/>
    <id>http://yoursite.com/2018/10/17/DataBindingâ€”â€”ä»è·¯äººåˆ°å¥½å‹ï¼ˆä¸€ï¼‰ï¼šåˆé‡/</id>
    <published>2018-10-17T13:15:39.000Z</published>
    <updated>2018-10-17T13:16:40.058Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ‚è°ˆ"><a href="#æ‚è°ˆ" class="headerlink" title="æ‚è°ˆ"></a>æ‚è°ˆ</h1><blockquote><p>åœ¨ç¼–ç¨‹é¢†åŸŸï¼Œå¯¹äºä¸€ååˆå­¦è€…è€Œè¨€ï¼Œæœ€å¼€å§‹çš„è¿›é˜¶æ–¹å¼éƒ½æ˜¯ä¸æ–­é‡å¤çš„ç»ƒä¹ ï¼Œç„¶ååœ¨ç»ƒä¹ ä¸­é‡åˆ°å„ç§å›°éš¾ï¼ŒåŒæ—¶ä¹Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œç§¯ç´¯äº†ä¸å°‘çš„ç»éªŒã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·å–çš„ç»éªŒå¯ä»¥æœ‰æ•ˆçš„å‡å°‘æˆ‘ä»¬çš„å¤±è¯¯ï¼Œä¹Ÿå¯ä»¥ä¸ºæˆ‘ä»¬é¢„é˜²æ‰è®¸å¤šâ€œéšè—â€çš„Bugã€‚</p><p>ä½†æ˜¯ï¼Œéšç€æˆ‘ä»¬èƒ½åŠ›çš„æå‡ï¼Œæˆ‘ä»¬é€æ¸çš„å¯¹äºé‚£äº›é‡å¤æ€§éå¸¸é«˜ã€è€Œä¸”æ„ä¹‰å¹¶ä¸å¤§çš„ä»£ç äº§ç”Ÿäº†åŒå€¦æ„Ÿã€‚é¦–å½“å…¶å†²çš„å°±æ˜¯åƒ <strong>findViewById</strong> è¿™æ ·çš„ä»£ç ï¼</p></blockquote><a id="more"></a> <p>å¤§é‡çš„ <strong>findViewById</strong> ä¸å…¨å±€å˜é‡æƒ³å¿…æ˜¯è®¸å¤šåˆå­¦è€…éƒ½ä¼šç»å†çš„é˜¶æ®µï¼Œä¸è¿‡å­¦çš„ä¸œè¥¿è¶Šå¤šï¼Œå¯¹äºè¿™ç±»ä»£ç çš„æ¥å—åŠ›ä¹Ÿå°±è¶Šä½ã€‚æ‰€ä»¥è®¸å¤šäººé€‰æ‹©ç”¨äº† <strong>ButterKnife</strong> å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>ç„¶é¹…å½“ <strong>Kotlin</strong> å‡ºç°åï¼Œ<strong>ButterKnife</strong> ä¹Ÿå¯ä»¥éšä¹‹æŠ›å¼ƒäº†ï¼Œè¿™æ—¶å€™ <strong>DataBinding</strong> çš„ç”¨å¤„å´å’Œ <strong>Kotlin</strong> å¹¶ä¸å†²çªï¼Œç›¸åäºŒè€…ç»“åˆä½¿ç”¨ï¼Œåè€Œä¼šè®©ä½ æœ‰æ„æƒ³ä¸åˆ°çš„ã€ä¹…è¿çš„ã€å¯åœˆå¯ç‚¹çš„ã€çœ¼å‰ä¸€äº®çš„ã€æ‹æ‰‹ç§°èµçš„ä½“éªŒï¼</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>ä½¿ç”¨ <strong>Data-Binding</strong> ï¼Œé¦–å…ˆéœ€è¦åœ¨ <strong>app moudle</strong> ä¸‹çš„ <strong>build.gradle</strong> ä¸­æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    dataBinding &#123;</span><br><span class="line">        enabled = true</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ï¼Œæœ€ä½æ”¯æŒçš„Androidç‰ˆæœ¬æ˜¯4.0ï¼ˆåæ­£å‡ ä¹æ²¡æœ‰æ¯”è¿™æ›´ä½çš„androidè®¾å¤‡äº†ï¼‰ï¼Œgradleæ’ä»¶ç‰ˆæœ¬æ˜¯1.5.0 ï¼ˆéƒ½2018å¹´äº†ï¼Œandroidå¼€å‘è€…ä»¬è‚¯å®šä¸èƒ½ç”¨æ¯”è¿™æ›´ä½çš„ç‰ˆæœ¬äº†å§ï¼ï¼‰</p><p>æ¥ä¸‹æ¥ï¼Œä¸¾ä¸ªæœ€ç®€å•çš„æ —å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <strong>Cartoon</strong> ç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Cartoon(var name:String = &quot;JOJOçš„å¥‡å¦™å†’é™©&quot; , var series :String = &quot;é»„é‡‘ä¹‹é£&quot;,</span><br><span class="line">              var leader : String = &quot;ä¹”é²è¯ºÂ·ä¹”å·´çº³&quot;, var feature : String = &quot;é»„é‡‘ä½“éªŒ&quot;) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ–°å»ºä¸€ä¸ªActivityï¼Œåœ¨è¿™ä¸ªActivityçš„xmlä¸­çš„æ ¹å¸ƒå±€ä¸‹ï¼Œé€šè¿‡Alt+Enterå¿«æ·é”®åˆ›å»ºdatabindingçš„å¸ƒå±€ï¼ŒåŒæ—¶ï¼Œå¯¼å…¥ <strong>Cartoon</strong> ç±»ï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-001.png" alt="image"></p><p>è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®è¿™ä¸ªå¸ƒå±€ç”Ÿæˆç›¸åº”çš„ç»‘å®šç±»ï¼Œè¿™é‡Œä¼šç”Ÿæˆä¸€ä¸ª <strong>ActivityDataBindingBinding</strong> çš„ç±» ï¼Œæš‚æ—¶å…ˆä¸ç”¨ç®¡ï¼Œæˆ‘ä»¬ç»§ç»­åœ¨xmlä¸Šå·¥ä½œï¼Œä¿®æ”¹ä¸€ä¸‹å¸ƒå±€æ ·å¼ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-002.png" alt="image"></p><p>ç„¶åï¼Œåœ¨å¯¹åº”çš„Activityå†…å¯¹ç”Ÿæˆçš„ <strong>ActivityDataBindingBinding</strong> ç±»è¿›è¡Œæ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class DataBindingActivity : AppCompatActivity() &#123;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">//        setContentView(R.layout.activity_data_binding)</span><br><span class="line">        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)</span><br><span class="line">        bindingBinding.cartoon = Cartoon()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºKotlinåˆ›å»ºçš„Cartoonå®ä½“ç±»å·²ç»ç»™æ¯ä¸ªå­—æ®µéƒ½èµ‹äºˆäº†åˆå§‹å€¼ï¼Œè¿™é‡Œä¸ç”¨å†è¿›è¡Œèµ‹å€¼ï¼Œç„¶åçœ‹ä¸€ä¸‹æ•ˆæœï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-003.png" alt="image"></p><blockquote><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ items å»è¿›è¡Œçš„ç»‘å®šï¼Œä¾‹å¦‚Fragmentã€RecyclerViewçš„adapterï¼Œå¯ä»¥ä½¿ç”¨ inflate() çš„æ–¹æ³•å»ç»‘å®šæˆ–è€… DataBindingUtil ç±»ï¼Œå°±åƒä¸‹é¢è¿™æ ·</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val listItemBinding = ListItemBinding.inflate(layoutInflater, viewGroup, false)</span><br><span class="line">// or</span><br><span class="line">val listItemBinding = DataBindingUtil.inflate(layoutInflater, R.layout.list_item, viewGroup, false)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™æ—¶å€™ä½ æƒ³ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¯ä»¥åœ¨ <strong>string.xml</strong> ä¸­åˆ›å»ºï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;string name=&quot;cartoon_name&quot;&gt;åŠ¨æ¼«å:%s&lt;/string&gt;</span><br><span class="line">&lt;string name=&quot;cartoon_series&quot;&gt;ç³»åˆ—:%s&lt;/string&gt;</span><br><span class="line">&lt;string name=&quot;cartoon_leader&quot;&gt;ä¸»è§’:&lt;/string&gt;</span><br><span class="line">&lt;string name=&quot;cartoon_bodyDouble&quot;&gt;æ›¿èº«:&lt;/string&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æ˜¯è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable name=&quot;cartoon&quot; type=&quot;com.test.project.testdatabinding.DataBinding.Cartoon&quot;/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:orientation=&quot;vertical&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@&#123;@string/cartoon_name(cartoon.name)&#125;&quot;/&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@&#123;@string/cartoon_series(cartoon.series)&#125;&quot;/&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@&#123;@string/cartoon_leader + cartoon.leader&#125;&quot;/&gt;</span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@&#123;@string/cartoon_bodyDouble + cartoon.feature&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-004.png" alt="image"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸DataBindingçš„åˆæ¬¡æ¥è§¦ï¼</p><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸è¾ƒäºå¾€å¸¸çš„é€šè¿‡findViewByIdå»è·å–æ§ä»¶å®ä¾‹ï¼Œç„¶åç»™æ§ä»¶è®¾ç½®æ•°æ®çš„æ–¹æ³•ï¼Œè¿™æ ·æ˜¾ç„¶å»æ‰äº†Activityå†…è®¸å¤šä¸å¿…è¦çš„ä»£ç ã€‚</p><p>ä¸è¿‡ä»¥ä¸Šåªæ˜¯æ¯”è¾ƒç®€å•çš„DataBindingç”¨æ³•ï¼Œä¸‹é¢å°†ä¼šä»‹ç»DataBindingçš„å…¶ä»–åŠŸèƒ½ï¼Œè¿™æ ·æ‰èƒ½åº”æ›´å¤æ‚çš„éœ€æ±‚ã€‚</p><h2 id="é›†åˆçš„ä½¿ç”¨"><a href="#é›†åˆçš„ä½¿ç”¨" class="headerlink" title="é›†åˆçš„ä½¿ç”¨"></a>é›†åˆçš„ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;data&gt;</span><br><span class="line">    &lt;import type=&quot;android.util.SparseArray&quot;/&gt;</span><br><span class="line">    &lt;import type=&quot;java.util.Map&quot;/&gt;</span><br><span class="line">    &lt;import type=&quot;java.util.List&quot;/&gt;</span><br><span class="line">    &lt;variable name=&quot;list&quot; type=&quot;List&lt;String&gt;&quot;/&gt;</span><br><span class="line">    &lt;variable name=&quot;sparse&quot; type=&quot;SparseArray&lt;String&gt;&quot;/&gt;</span><br><span class="line">    &lt;variable name=&quot;map&quot; type=&quot;Map&lt;String, String&gt;&quot;/&gt;</span><br><span class="line">    &lt;variable name=&quot;index&quot; type=&quot;int&quot;/&gt;</span><br><span class="line">    &lt;variable name=&quot;key&quot; type=&quot;String&quot;/&gt;</span><br><span class="line">&lt;/data&gt;</span><br><span class="line">â€¦</span><br><span class="line">android:text=&quot;@&#123;list[index]&#125;&quot;</span><br><span class="line">â€¦</span><br><span class="line">android:text=&quot;@&#123;sparse[index]&#125;&quot;</span><br><span class="line">â€¦</span><br><span class="line">android:text=&quot;@&#123;map[key]&#125;&quot;  //è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ @&#123;map.key&#125;ä»£æ›¿</span><br></pre></td></tr></table></figure><h2 id="ç‚¹å‡»äº‹ä»¶"><a href="#ç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç‚¹å‡»äº‹ä»¶"></a>ç‚¹å‡»äº‹ä»¶</h2><p>ç‚¹å‡»äº‹ä»¶ä¹Ÿæ˜¯å¯ä»¥åœ¨xmlä¸­ç»‘å®šçš„ï¼Œåœ¨ DataBindingActivity ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fun doClick(view: View)&#123;</span><br><span class="line">    Toast.makeText(this, &quot;ç‚¹å‡»æµ‹è¯•&quot;, Toast.LENGTH_SHORT).show()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¦å¿˜äº†åœ¨æ‹¬å·ä¸­ä¼ å…¥View</p><p>ç„¶åå†xmlä¸­å†™ä¸€ä¸ªbuttonçš„ç‚¹å‡»äº‹ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">           android:text=&quot;DataBinding-ç‚¹å‡»æµ‹è¯•&quot;</span><br><span class="line">           android:onClick=&quot;doClick&quot;</span><br><span class="line">           android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height=&quot;wrap_content&quot; /&gt;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæƒ³é€šè¿‡ç‚¹å‡»äº‹ä»¶ä¼ å…¥å‚æ•°çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ç§æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;variable name=&quot;handler&quot; type=&quot;com.test.project.testdatabinding.DataBinding.DataBindingActivity&quot;/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">            android:text=&quot;DataBinding-ç‚¹å‡»æµ‹è¯•&quot;</span><br><span class="line">            android:onClick=&quot;@&#123;() -&gt; handler.doClick(cartoon.name)&#125;&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot; /&gt;</span><br></pre></td></tr></table></figure><p>ä»xmlä¸­å¯¼å…¥ DataBindingActivity åï¼Œå†ä¿®æ”¹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class DataBindingActivity : AppCompatActivity() &#123;</span><br><span class="line"></span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">//        setContentView(R.layout.activity_data_binding)</span><br><span class="line">        val bindingBinding : ActivityDataBindingBinding = DataBindingUtil.setContentView(this, R.layout.activity_data_binding)</span><br><span class="line">        bindingBinding.cartoon = Cartoon()</span><br><span class="line">        bindingBinding.handler = this</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fun doClick(message: String)&#123;</span><br><span class="line">        Toast.makeText(this, message, Toast.LENGTH_SHORT).show()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/DataBinding/one/databinding-005.png" alt="image"></p><p>å¦‚æœæœ‰æ›´åŠ å¤æ‚çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¯ä»¥å‚è€ƒå®˜ä»‹ç»ä¸­çš„ï¼Œå¦‚å¸¦Viewå‚æ•°çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Presenter &#123;</span><br><span class="line">    fun onSaveClick(view: View, task: Task)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">android:onClick=&quot;@&#123;(theView) -&gt; presenter.onSaveClick(theView, task)&#125;&quot;</span><br></pre></td></tr></table></figure></p><h2 id="import-ä¸-include"><a href="#import-ä¸-include" class="headerlink" title="import ä¸ include"></a>import ä¸ include</h2><h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p>åœ¨xmlä¸­ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥ä¸€äº›å·¥å…·ç±»è¿›è¡Œç®€å•åœ°æ“ä½œï¼Œæ¯”å¦‚è¯´å¯¼å…¥Viewç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;data&gt;</span><br><span class="line">    &lt;import type=&quot;android.view.View&quot;/&gt;</span><br><span class="line">&lt;/data&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨xmlä¸­ä½¿ç”¨å®ƒçš„ä¸€äº›é™æ€æ–¹æ³•æˆ–è€…å˜é‡,å®˜æ–¹çš„ä¾‹å­ä¸­ç®€å•åœ°ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView</span><br><span class="line">   android:text=&quot;@&#123;user.lastName&#125;&quot;</span><br><span class="line">   android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">   android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">   android:visibility=&quot;@&#123;user.isAdult ? View.VISIBLE : View.GONE&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡æˆ‘è§‰å¾—xmlä¸­ä¸é€‚åˆåšå¤ªå¤šé€»è¾‘åˆ¤æ–­çš„æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™åº”è¯¥è€ƒè™‘ä¸€ä¸‹æŸäº›æ“ä½œæ˜¯å¦çœŸçš„åˆé€‚</p><h3 id="include"><a href="#include" class="headerlink" title="include"></a>include</h3><p>å¦‚æœä½ æœ‰åœ¨xmlä¸­ä½¿ç”¨åˆ° include ï¼Œé€šè¿‡ä¸‹é¢ä¾‹å­ä¸­çš„æ–¹æ³•å°±è¡Œç»‘å®šï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:bind=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;</span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable name=&quot;cartoon&quot; type=&quot;com.test.project.testdatabinding.DataBinding.Cartoon&quot;/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:orientation=&quot;vertical&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line">        </span><br><span class="line">       &lt;include layout=&quot;@layout/layout_test&quot;</span><br><span class="line">           bind:cartoon=&quot;@&#123;cartoon&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure></p><p>layout_test å¸ƒå±€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;data&gt;</span><br><span class="line">        &lt;variable name=&quot;cartoon&quot; type=&quot;com.test.project.testdatabinding.DataBinding.Cartoon&quot;/&gt;</span><br><span class="line">    &lt;/data&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.constraint.ConstraintLayout</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:text=&quot;@&#123;cartoon.name&#125;&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/android.support.constraint.ConstraintLayout&gt;</span><br><span class="line">&lt;/layout&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¦ä½¿ç”¨ bind å±æ€§ï¼Œå¯åˆ«å¿˜äº†ä¸‹é¢çš„è¿™è¡Œä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:bind=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br></pre></td></tr></table></figure><h1 id="æš‚æ­‡"><a href="#æš‚æ­‡" class="headerlink" title="æš‚æ­‡"></a>æš‚æ­‡</h1><p>å‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œå…³äº <strong>DataBinding</strong> çš„ä½¿ç”¨ï¼Œæš‚ä¸”å°±è®²åˆ°è¿™é‡Œï¼Œå…³äºå®ƒæ›´è¯¦å°½çš„ç”¨æ³•ï¼Œåç»­å†ä½œä»‹ç»ã€‚</p><hr><h1 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h1>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ‚è°ˆ&quot;&gt;&lt;a href=&quot;#æ‚è°ˆ&quot; class=&quot;headerlink&quot; title=&quot;æ‚è°ˆ&quot;&gt;&lt;/a&gt;æ‚è°ˆ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨ç¼–ç¨‹é¢†åŸŸï¼Œå¯¹äºä¸€ååˆå­¦è€…è€Œè¨€ï¼Œæœ€å¼€å§‹çš„è¿›é˜¶æ–¹å¼éƒ½æ˜¯ä¸æ–­é‡å¤çš„ç»ƒä¹ ï¼Œç„¶ååœ¨ç»ƒä¹ ä¸­é‡åˆ°å„ç§å›°éš¾ï¼ŒåŒæ—¶ä¹Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œç§¯ç´¯äº†ä¸å°‘çš„ç»éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·å–çš„ç»éªŒå¯ä»¥æœ‰æ•ˆçš„å‡å°‘æˆ‘ä»¬çš„å¤±è¯¯ï¼Œä¹Ÿå¯ä»¥ä¸ºæˆ‘ä»¬é¢„é˜²æ‰è®¸å¤šâ€œéšè—â€çš„Bugã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œéšç€æˆ‘ä»¬èƒ½åŠ›çš„æå‡ï¼Œæˆ‘ä»¬é€æ¸çš„å¯¹äºé‚£äº›é‡å¤æ€§éå¸¸é«˜ã€è€Œä¸”æ„ä¹‰å¹¶ä¸å¤§çš„ä»£ç äº§ç”Ÿäº†åŒå€¦æ„Ÿã€‚é¦–å½“å…¶å†²çš„å°±æ˜¯åƒ &lt;strong&gt;findViewById&lt;/strong&gt; è¿™æ ·çš„ä»£ç ï¼&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ æ¥å…¥androidç«¯å¾®ä¿¡æ”¯ä»˜</title>
    <link href="http://yoursite.com/2018/10/08/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E6%8E%A5%E5%85%A5android%E7%AB%AF%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/10/08/æ‰‹æŠŠæ‰‹æ•™ä½ æ¥å…¥androidç«¯å¾®ä¿¡æ”¯ä»˜/</id>
    <published>2018-10-08T12:19:09.000Z</published>
    <updated>2018-10-08T12:20:56.307Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„"><a href="#Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„" class="headerlink" title="Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„"></a>Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„</h2><h3 id="ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š"><a href="#ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š" class="headerlink" title="ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š"></a>ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š</h3><p>åœ¨app moduleç›®å½•ä¸‹çš„build.graldeä¸­æ·»åŠ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    //å¾®ä¿¡SDKæ¥å…¥</span><br><span class="line">    implementation &apos;com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a> <p>graldeæ„å»ºå®Œæˆä¹‹åï¼Œå†åšä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</p><h3 id="äºŒã€åœ¨AndroidManifest-xmlä¸­æ·»åŠ ç›¸å…³æƒé™ï¼š"><a href="#äºŒã€åœ¨AndroidManifest-xmlä¸­æ·»åŠ ç›¸å…³æƒé™ï¼š" class="headerlink" title="äºŒã€åœ¨AndroidManifest.xmlä¸­æ·»åŠ ç›¸å…³æƒé™ï¼š"></a>äºŒã€åœ¨AndroidManifest.xmlä¸­æ·»åŠ ç›¸å…³æƒé™ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å¾®ä¿¡æ”¯ä»˜æƒé™--&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€åˆ›å»ºwxapiç›®å½•ï¼Œå¹¶åˆ›å»ºWXPayEntryActivity"><a href="#ä¸‰ã€åˆ›å»ºwxapiç›®å½•ï¼Œå¹¶åˆ›å»ºWXPayEntryActivity" class="headerlink" title="ä¸‰ã€åˆ›å»ºwxapiç›®å½•ï¼Œå¹¶åˆ›å»ºWXPayEntryActivity"></a>ä¸‰ã€åˆ›å»ºwxapiç›®å½•ï¼Œå¹¶åˆ›å»ºWXPayEntryActivity</h3><p>åœ¨ä½ çš„packageç›®å½•ä¸‹ï¼Œåˆ›å»º<strong>wxapi</strong>ç›®å½•ï¼Œæ¯”å¦‚è¯´æˆ‘ä½¿ç”¨çš„demoé¡¹ç›®ï¼Œ<strong>wxapi</strong>å°±åœ¨ç›®å½•<strong>net.sourceforge.simcpux</strong>ç›®å½•ä¸‹</p><p>åŒæ—¶ï¼Œåœ¨<strong>wxapi</strong>ç›®å½•ä¸‹åˆ›å»º<strong>WXPayEntryActivity</strong></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-001.png" alt="image"></p><p><strong>WXPayEntryActivity</strong>å®ç°<strong>IWXAPIEventHandler</strong>æ¥å£ï¼Œè¿™ä¸ªActivityé¡µé¢å°±æ˜¯æ”¯ä»˜ç»“æœçš„å›è°ƒé¡µé¢ï¼Œä¸‹é¢æ˜¯å®ƒæœ€ç®€å•åœ°å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class WXPayEntryActivity extends Activity implements IWXAPIEventHandler&#123;</span><br><span class="line"></span><br><span class="line">private static final String TAG = &quot;MicroMsg.SDKSample.WXPayEntryActivity&quot;;</span><br><span class="line"></span><br><span class="line">    private IWXAPI api;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.pay_result);</span><br><span class="line">        </span><br><span class="line">    api = WXAPIFactory.createWXAPI(this, &quot;ä½ çš„appid&quot;);</span><br><span class="line">        api.handleIntent(getIntent(), this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void onNewIntent(Intent intent) &#123;</span><br><span class="line">super.onNewIntent(intent);</span><br><span class="line">setIntent(intent);</span><br><span class="line">        api.handleIntent(intent, this);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onReq(BaseReq req) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onResp(BaseResp resp) &#123;</span><br><span class="line">Log.d(TAG, &quot;onPayFinish, errCode = &quot; + resp.errCode);</span><br><span class="line"></span><br><span class="line">if (resp.getType() == ConstantsAPI.COMMAND_PAY_BY_WX) &#123;</span><br><span class="line">AlertDialog.Builder builder = new AlertDialog.Builder(this);</span><br><span class="line">builder.setTitle(&quot;æ”¯ä»˜ç»“æœ&quot;);</span><br><span class="line">builder.setMessage(getString(R.string.pay_result_callback_msg, String.valueOf(resp.errCode)));</span><br><span class="line">builder.show();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶ï¼Œåˆ«å¿˜äº†åœ¨<strong>AndroidManifest.xml</strong>ä¸­å£°å<strong>WXPayEntryActivity</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity</span><br><span class="line">    android:name=&quot;.wxapi.WXPayEntryActivity&quot;</span><br><span class="line">    android:exported=&quot;true&quot;</span><br><span class="line">    android:launchMode=&quot;singleTop&quot;&gt;</span><br><span class="line">    &lt;intent-filter&gt;</span><br><span class="line">        &lt;action android:name=&quot;android.intent.action.VIEW&quot;/&gt;</span><br><span class="line">        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;</span><br><span class="line">        &lt;data android:scheme=&quot;ä½ çš„appid&quot;/&gt;</span><br><span class="line">    &lt;/intent-filter&gt;</span><br><span class="line"></span><br><span class="line">&lt;/activity&gt;</span><br></pre></td></tr></table></figure><p>å½“è¿™äº›å‡†å¤‡å·¥ä½œéƒ½åšå¥½ä¹‹åï¼Œå°±å¯ä»¥å‡†å¤‡ä½¿ç”¨äº†ã€‚</p><h3 id="å››ã€ä½¿ç”¨"><a href="#å››ã€ä½¿ç”¨" class="headerlink" title="å››ã€ä½¿ç”¨"></a>å››ã€ä½¿ç”¨</h3><p>å½“ä½ ä»æœåŠ¡ç«¯è·å–åˆ°è®¢å•çš„ç›¸å…³ä¿¡æ¯åï¼Œå°±å¯ä»¥è°ƒç”¨æ”¯ä»˜æ¥å£äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">                IWXAPI api = WXAPIFactory.createWXAPI(context, null);</span><br><span class="line">                api.registerApp(IntentKey.WX_APP_ID);</span><br><span class="line">                PayReq req = new PayReq();</span><br><span class="line">                req.appId= &quot;wx8888888888888888&quot;;//ä½ çš„å¾®ä¿¡appid</span><br><span class="line">                req.partnerId= &quot;1900000109&quot;;//å•†æˆ·å·</span><br><span class="line">                req.prepayId= &quot;WX1217752501201407033233368018&quot;;//é¢„æ”¯ä»˜äº¤æ˜“ä¼šè¯ID</span><br><span class="line">                req.nonceStr= &quot;5K8264ILTKCH16CQ2502SI8ZNMTM67VS&quot;;//éšæœºå­—ç¬¦ä¸²</span><br><span class="line">                req.timeStamp= &quot;1412000000&quot;;//æ—¶é—´æˆ³</span><br><span class="line">                req.packageValue= &quot;Sign=WXPay&quot;;æ‰©å±•å­—æ®µ,è¿™é‡Œå›ºå®šå¡«å†™Sign=WXPay</span><br><span class="line">                req.sign= &quot;C380BEC2BFD727A4B6845133519F3AD6&quot;;//ç­¾å</span><br><span class="line">//req.extData= &quot;app data&quot;; // optional</span><br><span class="line">                // åœ¨æ”¯ä»˜ä¹‹å‰ï¼Œå¦‚æœåº”ç”¨æ²¡æœ‰æ³¨å†Œåˆ°å¾®ä¿¡ï¼Œåº”è¯¥å…ˆè°ƒç”¨IWXMsg.registerAppå°†åº”ç”¨æ³¨å†Œåˆ°å¾®ä¿¡</span><br><span class="line">                api.sendReq(req);</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„è¿™äº›ä¿¡æ¯ï¼Œéƒ½åº”è¯¥ä»æœåŠ¡å™¨å»è·å–ï¼Œæ¯”å¦‚è¯´éšæœºå­—ç¬¦ä¸²ä¹‹ç±»çš„é•¿çŸ­ä¹Ÿä¸ä¸€å®šå’Œä¸Šé¢ä¾‹å­ä¸­çš„ä¸€è‡´ã€‚å…·ä½“æ˜¯ä»€ä¹ˆï¼Œå¾—çœ‹ä½ ä»¬çš„åç«¯ç»™çš„æ˜¯ä»€ä¹ˆã€‚</p><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œé€šè¿‡ä¸Šé¢æ¥å£çš„è°ƒç”¨ï¼Œä½ å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨å¾®ä¿¡æä¾›çš„APPæ”¯ä»˜äº†ã€‚</p><p>æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿï¼</p><p><strong><em>ç„¶é¹…ã€‚ã€‚ã€‚</em></strong></p><p>äº‹æƒ…å“ªå„¿æœ‰è¿™ä¹ˆé¡ºåˆ©ï¼Œåˆ°äº†çœŸæ­£ä½¿ç”¨çš„æ—¶å€™ï¼Œé‡åˆ°çš„é—®é¢˜å¯ä¸å°‘ï¼Œä¸‹é¢ä¼šåˆ—ä¸¾å‡ºé‡åˆ°è¿‡çš„é—®é¢˜ï¼Œç„¶åè¯´æ˜è§£å†³åŠæ³•ã€‚</p><h2 id="Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå‘è›®å¤šçš„"><a href="#Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå‘è›®å¤šçš„" class="headerlink" title="Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå‘è›®å¤šçš„"></a>Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå‘è›®å¤šçš„</h2><p><strong>å¾®ä¿¡æ”¯ä»˜appçš„æ¥å…¥ï¼Œè¦æˆ‘æ¥è¯´ï¼Œå¯¹åˆæ¬¡å°è¯•çš„äººéå¸¸ä¸å‹å¥½</strong></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘è€…ä½¿ç”¨æ–°çš„å·¥å…·éƒ½éœ€è¦å…ˆçœ‹ä¸€çœ‹å®ƒçš„è¯´æ˜æ–‡æ¡£ï¼Œå¦‚æœè¯´æ˜æ–‡æ¡£å†™çš„å¤Ÿå¥½ï¼Œç›´æ¥ç”¨å°±æ˜¯äº†ï¼›å¦‚æœæ–‡æ¡£ä»‹ç»çš„ä¸å¤Ÿå…¨é¢ï¼Œè¿˜éœ€è¦æœ‰Demoæä¾›å‚è€ƒã€‚å¾®ä¿¡çš„Appæ”¯ä»˜å°±å±äºåè€…ã€‚<br>ä¸‹é¢æ˜¯å®ƒçš„æ¥å…¥æ–‡æ¡£é¡µé¢ï¼š</p><p><a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=1417751808&amp;token=&amp;lang=zh_CN" target="_blank" rel="noopener">Androidæ¥å…¥æŒ‡å—</a>ï¼ˆè¿˜æœ‰å…¶ä»–ç›¸å…³ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªé¡µé¢æ¥å…¥ï¼‰</p><p>ç”±äºä»…ä»…é ç€æ–‡æ¡£çš„è¯´æ˜ä¸è¶³ä»¥è®©æˆ‘æŒæ¡å¯¹å¾®ä¿¡æ”¯ä»˜çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶çš„ï¼ŒDemoå°±æˆäº†åˆæ¬¡æ¥è§¦å¾®ä¿¡æ”¯ä»˜è€…çš„å­¦ä¹ æ•™æå•¦ï¼</p><p><a href="https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=11_1" target="_blank" rel="noopener">Demoä¸‹è½½</a></p><p>å½“ä½ æ¥å…¥Demoåï¼Œä¸€ç³»åˆ—çš„é—®é¢˜å°†ä¼šæ¥è¸µè€Œè‡³ï¼Œä¸‹é¢æ¥çœ‹ä¸€çœ‹å…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜</p><h3 id="æ¥å…¥Demo"><a href="#æ¥å…¥Demo" class="headerlink" title="æ¥å…¥Demo"></a>æ¥å…¥Demo</h3><p>å°†ä¸‹è½½åçš„DemoæŒ‰ç…§Import mouduleçš„æ–¹å¼æ¥å…¥åˆ°æŸä¸ªé¡¹ç›®ä¸­ï¼š<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-002.png" alt="image"></p><p>ç„¶åé€‰ä¸­è¿™ä¸ªé¡¹ç›®ï¼Œè¿›è¡Œç¼–è¯‘ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-003.png" alt="image"></p><p>æ¥ä¸‹æ¥ï¼Œç¼–è¯‘å™¨å°±å¼€å§‹æŠ¥é”™äº†ï¼Œæ‰¾åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œå‘ç°æ˜¯å¦‚ä¸‹é—®é¢˜ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-004.png" alt="image"></p><p><strong>åˆ°è¿™é‡Œå¼€å§‹ï¼Œæˆ‘å°±è¦åæ§½äº†</strong></p><p>è¿™ç§é—®é¢˜ä¸€çœ‹å°±æ˜¯æ‰¾ä¸åˆ°åŒ…äº†ï¼Œäºæ˜¯æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ä¸­çš„build.graldeä¸­çš„ä¾èµ–ï¼Œå¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile files(&apos;libs/libammsdk.jar&apos;)</span><br><span class="line">    compile files(&apos;libs/wechat-sdk-android-with-mta-1.0.2.jar&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¾ˆæ˜¾ç„¶ï¼Œæ˜¯å¯¼å…¥çš„æœ¬åœ°jaråŒ…ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å°†è¿™é‡Œçš„ä¾èµ–ä¿®æ”¹æˆä¹‹å‰é…ç½®æ—¶çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    //å¾®ä¿¡SDKæ¥å…¥</span><br><span class="line">    implementation &apos;com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œé‡æ–°æ„å»ºå®Œé¡¹ç›®åï¼Œä¸Šé¢çš„é—®é¢˜å¹¶æ²¡æœ‰è§£å†³ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬åœ¨Android studioçš„ä¸­çš„<strong>External Libraries</strong>å»çœ‹ä¸€çœ‹æ–°æ„å»ºçš„åº“:</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-005.png" alt="image"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­£ç¡®çš„å¼•ç”¨è·¯å¾„åº”è¯¥æ˜¯æŠŠ<strong>sdk</strong>æ¢æˆ<strong>opensdk</strong></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-006.png" alt="image"></p><p>å½“ä½ å°†æ‰€æœ‰çš„è·¯å¾„éƒ½ä¿®æ”¹è¿‡æ¥åï¼Œè¿˜ä¼šæœ‰å¦‚ä¸‹é—®é¢˜ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-007.png" alt="image"></p><p>å°†ä¸Šé¢çš„ <strong>imgObj.imageUrl = url</strong> ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imgObj.setImagePath(url);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé”™è¯¯å‡ºç°çš„åœ°æ–¹æœ‰ä¸¤å¤„å§ï¼Œå½“ä½ æŠŠè¿™äº›é”™è¯¯éƒ½è§£å†³åï¼Œå†æ¬¡è¿›è¡Œç¼–è¯‘ï¼Œå°±å¯ä»¥æ­£å¸¸è¿è¡Œå•¦ï¼</p><p>Demoè¿è¡Œåçš„ç•Œé¢æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-008.png" alt="image"></p><p>åˆ°äº†è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ï¼Œå‰©ä¸‹çš„ä¸œè¥¿æ— éœ€å†å¤šè¯´ï¼Œè¿‡ç¨‹å·®ä¸å¤šå’Œä¸Šé¢ç›´æ¥æ¥å…¥çš„æµç¨‹ä¸€æ ·ï¼Œä¸è¿‡è¦demoé‡Œé¢çš„æ›´åŠ è¯¦ç»†ï¼Œåªéœ€å¤šå¤šè§‚æ‘©å³å¯ã€‚</p><p>é‚£ä¹ˆï¼Œæœ€åè¿˜æ˜¯è¯´ä¸€ä¸‹éœ€è¦æ³¨æ„çš„ç‚¹å§ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ä¸Šé¢è®¾ç½®appç›¸å…³å‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦<strong>åº”ç”¨åŒ…å</strong>ä»¥åŠ<strong>åº”ç”¨ç­¾å</strong></p><p><img src="https://pay.weixin.qq.com/wiki/doc/api/img/chapter8_5_2.png" alt="image"></p><p>è·å–åº”ç”¨ç­¾åçš„å·¥å…·åœ°å€æ˜¯ï¼š<a href="https://open.weixin.qq.com/zh_CN/htmledition/res/dev/download/sdk/Gen_Signature_Android.apk" target="_blank" rel="noopener">ç­¾åå·¥å…·ä¸‹è½½åœ°å€</a></p><blockquote><p>è¿™é‡Œåˆè¦åæ§½ä¸€ä¸‹ï¼Œç­¾åå·¥å…·å°±æ˜¯ä¸€ä¸ªapkï¼Œè£…åˆ°æ‰‹æœºä¸Šåï¼Œè¾“å…¥åŒ…åï¼Œç„¶åç”Ÿæˆç­¾åï¼Œæœ€å…³é”®çš„æ˜¯è¿™ä¸ªç­¾åæ— æ³•å¤åˆ¶ï¼Œä½¿ç”¨ä¸‹æ¥å°±ä¸€ä¸ªæ„Ÿå—ï¼Œä¸æ–¹ä¾¿å•Šï¼ï¼ï¼ï¼</p></blockquote><p>ç­¾åå·¥å…·é‡Œé¢è¾“å…¥çš„åŒ…åå°±æ˜¯ä¹‹å‰æåˆ°è¿‡çš„ï¼Œå¯ä»¥ç›´æ¥åœ¨Androidmanifest.xmlä¸­å¤åˆ¶ã€‚</p><p><strong>ä½†æ˜¯</strong></p><pre><code>å°½ç®¡åŒ…åä¸€æ ·ï¼Œreleaseç‰ˆçš„é¡¹ç›®å’Œdebugç‰ˆçš„é¡¹ç›®æœ€åç”Ÿæˆçš„ç­¾åéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼</code></pre><p><strong>æ‰€ä»¥å¦‚æœä½ æ˜¯ç”¨çš„debugè¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆç½‘ç«™é‡Œé¢çš„ç­¾åä¸€å®šè¦å¡«å†™debugç‰ˆä¸‹è·å–åˆ°çš„ç­¾åï¼Œæ­£å¼å‘å¸ƒçš„æ—¶å€™ï¼Œè¦æŠŠå®ƒæ¢æˆreleaseç‰ˆçš„ï¼å¦‚æœç­¾åä¸ä¸€è‡´ï¼Œä½ æ˜¯æ— æ³•é€šè¿‡é‚£ä¸ªâ€œ-1â€è¿”å›å€¼è·å–åˆ°ä»»ä½•æœ‰æ•ˆçš„é”™è¯¯ä¿¡æ¯çš„!åˆ‡è®°ï¼</strong></p><font face="STCAIYUN"><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del>~~~~é‚£ä¹ˆ</font><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/wxpay-009.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„&quot;&gt;&lt;a href=&quot;#Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„&quot; class=&quot;headerlink&quot; title=&quot;Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„&quot;&gt;&lt;/a&gt;Androidç«¯æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œè›®ç®€å•çš„&lt;/h2&gt;&lt;h3 id=&quot;ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š&quot;&gt;&lt;a href=&quot;#ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š&quot;&gt;&lt;/a&gt;ä¸€ã€æ·»åŠ gradleä¾èµ–ï¼š&lt;/h3&gt;&lt;p&gt;åœ¨app moduleç›®å½•ä¸‹çš„build.graldeä¸­æ·»åŠ &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dependencies &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //å¾®ä¿¡SDKæ¥å…¥&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    implementation &amp;apos;com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kotlinç¬”è®°(äº”):åŸºç¡€ç¯‡latest</title>
    <link href="http://yoursite.com/2018/10/05/Kotlin%E7%AC%94%E8%AE%B0-%E4%BA%94-%E5%9F%BA%E7%A1%80%E7%AF%87latest/"/>
    <id>http://yoursite.com/2018/10/05/Kotlinç¬”è®°-äº”-åŸºç¡€ç¯‡latest/</id>
    <published>2018-10-05T05:04:28.000Z</published>
    <updated>2018-10-08T12:22:12.396Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å¯ç©ºç±»å‹"><a href="#1-å¯ç©ºç±»å‹" class="headerlink" title="1.å¯ç©ºç±»å‹"></a>1.å¯ç©ºç±»å‹</h3><p>é—®å·å¯ä»¥åŠ åœ¨ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ null å¼•ç”¨ ï¼š String?ã€ Int?ã€ MyCustomType? ï¼Œç­‰ç­‰</p><p>ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå¯ç©ºç±»å‹çš„å€¼ï¼Œèƒ½å¯¹å®ƒè¿›è¡Œçš„æ“ä½œä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½å†è°ƒç”¨å®ƒçš„æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; fun strLenSafe(s: String?) = s.length() </span><br><span class="line">ERROR: only safe (?.) or non null asserted (!!.) calls are allowed on a nullable receiver of type kotlin.String?</span><br></pre></td></tr></table></figure></p><a id="more"></a> <p>ä¹Ÿä¸èƒ½æŠŠå®ƒèµ‹å€¼ç»™éç©ºç±»å‹çš„å˜é‡ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val x: String? = null </span><br><span class="line">&gt;&gt; var y: String = x </span><br><span class="line">ERROR: Type mismatch: inferred type is String? but String was expected </span><br><span class="line">``` </span><br><span class="line">ä¹Ÿä¸èƒ½æŠŠå¯ç©ºç±»å‹çš„å€¼ä¼ ç»™æ‹¥æœ‰éç©ºç±»å‹å‚æ•°çš„å‡½æ•° ï¼š</span><br></pre></td></tr></table></figure></p><blockquote><blockquote><p>strLen(x)<br>ERROR: Type mismatch: inferred type is String? but String was expected<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">é‚£ä¹ˆä½ å¯ä»¥å¯¹å®ƒåšä»€ä¹ˆå‘¢ï¼Ÿæœ€é‡è¦çš„æ“ä½œå°±æ˜¯å’Œ null è¿›è¡Œæ¯”è¾ƒã€‚ è€Œä¸”ä¸€æ—¦ä½  è¿›è¡Œäº†æ¯”è¾ƒæ“ä½œï¼Œç¼–è¯‘å™¨å°±ä¼šè®°ä½ï¼Œå¹¶ä¸”åœ¨è¿™æ¬¡æ¯”è¾ƒå‘ç”Ÿçš„ä½œç”¨åŸŸå†…æŠŠè¿™ä¸ªå€¼å½“ä½œéç©ºæ¥å¯¹å¾…</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 2.å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š&quot;?.&quot;</span><br><span class="line"></span><br><span class="line">&gt; Kotlinçš„å¼¹è¯åº“ä¸­æœ€æœ‰æ•ˆçš„ä¸€ç§å·¥å…·å°±æ˜¯å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼š?.ï¼Œå®ƒå…è®¸ä½ æŠŠä¸€ æ¬¡nullæ£€æŸ¥å’Œä¸€æ¬¡æ–¹æ³•è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ s?.toUpperCase() ç­‰åŒäºä¸‹é¢è¿™ç§çƒ¦ççš„å†™æ³•ï¼šif(s!=null) s.toUpperCase() else nullã€‚ </span><br><span class="line"></span><br><span class="line">### 3.Elvisè¿ç®—ç¬¦ï¼š&quot;?:&quot; </span><br><span class="line"></span><br><span class="line">Kotlin æœ‰æ–¹ä¾¿çš„è¿ç®—ç¬¦æ¥æä¾›ä»£æ›¿nullçš„é»˜è®¤å€¼ã€‚å®ƒè¢«ç§°ä½œ**Elvisè¿ç®—ç¬¦**ï¼ˆæˆ–è€… nullåˆå¹¶è¿ç®—ç¬¦ï¼Œå¦‚æœä½ å–œæ¬¢å¬èµ·æ¥æ›´ä¸¥è‚ƒçš„åç§°ï¼‰ã€‚ä¸‹é¢å±•ç¤ºäº†å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼š</span><br></pre></td></tr></table></figure></p></blockquote></blockquote><p>fun foo(s: String?) {<br>    val t: String= s?:â€â€<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">*Elvis è¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ä¸ºnullï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬ ä¸€ä¸ªè¿ç®—æ•°ï¼›å¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ºnullï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬äºŒä¸ªè¿ç®—æ•°ã€‚*</span><br><span class="line"></span><br><span class="line">### 4.å®‰å…¨è½¬æ¢ï¼š&quot;as?&quot;</span><br><span class="line"></span><br><span class="line">&gt; as? è¿ç®—ç¬¦å°è¯•æŠŠå€¼è½¬æ¢æˆæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå€¼ä¸æ˜¯åˆé€‚çš„ç±»å‹å°±è¿”å› null</span><br><span class="line"></span><br><span class="line">ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æŠŠå®‰å…¨è½¬æ¢å’Œ Elvis è¿ç®—ç¬¦ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå®ç° equals æ–¹æ³•çš„æ—¶å€™è¿™æ ·çš„ç”¨æ³•éå¸¸æ–¹ä¾¿ã€‚</span><br></pre></td></tr></table></figure></p><p>class Person(val firstNarne: String, val lastNarne: String){<br>    override fun equals(o: Any?): Boolean {<br>        val otherPerson = o as? Person?: return false<br>        return otherPerson.firstNarne == firstNarne &amp;&amp; otherPerson.lastNarne == lastNarne<br>    }</p><pre><code>override fun hashCode(): Int = firstNarne.hashCode() * 37 + lastNarne.hashCode() </code></pre><p>}</p><blockquote><blockquote><p>val pl = Person ( â€œDrnitryâ€,â€Jernerovâ€)<br>val p2 = Person ( â€œDrnitryâ€,â€Jernerovâ€)<br>println (pl == p2)<br>true<br>println(pl.equals(42))<br>false<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 5.éç©ºæ–­è¨€ï¼š&quot;!!&quot;</span><br><span class="line"></span><br><span class="line">&gt; éç©ºæ–­è¨€æ˜¯ Kotlin æä¾›ç»™ä½ çš„æœ€ç®€å•ç›´ç‡çš„å¤„ç†å¯ç©ºç±»å‹å€¼çš„å·¥å…·ã€‚å®ƒä½¿ç”¨åŒæ„Ÿå¹å·è¡¨ç¤ºï¼Œå¯ä»¥æŠŠä»»ä½•å€¼è½¬æ¢æˆéç©ºç±»å‹ã€‚å¦‚æœå¯¹ null å€¼åšéç©ºæ–­è¨€ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</span><br><span class="line"></span><br><span class="line">æŸäº›é—®é¢˜é€‚åˆç”¨éç©ºæ–­è¨€æ¥è§£å†³ã€‚å½“ä½ åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºnullï¼Œè€Œåœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå€¼æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«è¿™ç§ç”¨æ³•æ˜¯å¦å®‰å…¨ã€‚å¦‚æœä½ ç¡®ä¿¡è¿™æ ·çš„æ£€æŸ¥ä¸€å®šåœ¨å…¶ä»–æŸä¸ªå‡½æ•°ä¸­å­˜åœ¨ï¼Œä½ å¯èƒ½ä¸æƒ³åœ¨ä½¿ç”¨è¿™ä¸ªå€¼ä¹‹å‰é‡å¤æ£€æŸ¥ï¼Œè¿™æ—¶ä½ å°±å¯ä»¥ä½¿ç”¨éç©ºæ–­è¨€ã€‚</span><br><span class="line"></span><br><span class="line"> å½“ä½ ä½¿ç”¨ !! å¹¶ä¸”å®ƒçš„ç»“æœæ˜¯å¼‚å¸¸æ—¶ï¼Œ å¼‚å¸¸è°ƒç”¨æ¢°çš„è·Ÿè¸ªä¿¡æ¯åªè¡¨æ˜å¼‚å¸¸å‘ç”Ÿåœ¨å“ªä¸€è¡Œä»£ç ï¼Œè€Œä¸ä¼šè¡¨æ˜å¼‚å¸¸å‘ç”Ÿåœ¨å“ªä¸€ä¸ªè¡¨è¾¾ å¼ã€‚ ä¸ºäº†è®©è·Ÿè¸ªä¿¡æ¯æ›´æ¸…æ™°ç²¾ç¡®åœ°è¡¨ç¤ºå“ªä¸ªå€¼ä¸º nullï¼Œæœ€å¥½é¿å…åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨å¤šä¸ª!!æ–­è¨€</span><br><span class="line"></span><br><span class="line">### 6.&quot;let&quot;å‡½æ•°</span><br><span class="line"></span><br><span class="line">&gt; let å‡½æ•°è®©å¤„ç†å¯ç©ºè¡¨è¾¾å¼å˜å¾—æ›´å®¹æ˜“ã€‚ å’Œå®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ä¸€èµ·ï¼Œå®ƒå…è®¸ä½ å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œæ£€æŸ¥æ±‚å€¼ç»“æœæ˜¯å¦ä¸º nullï¼Œå¹¶æŠŠç»“æœä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ã€‚ æ‰€æœ‰è¿™äº›åŠ¨ä½œéƒ½åœ¨åŒä¸€ä¸ªç®€æ´çš„è¡¨è¾¾å¼ä¸­ã€‚ </span><br><span class="line"></span><br><span class="line">ä¸‹é¢ä¸¾ä¸ªæ —å­ï¼š</span><br></pre></td></tr></table></figure></p></blockquote></blockquote><p>fun sendEmailTo(email: String) { /<em> â€¦ </em>/ }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸èƒ½æŠŠå¯ç©ºç±»å‹çš„å€¼ä¼ ä¸Šé¢ç»™è¿™ä¸ªå‡½æ•°ï¼š</span><br></pre></td></tr></table></figure></p><blockquote><blockquote><p>val email: String? = â€¦<br>sendEmailTo(email)<br>ERROR: Type mismatch: inferred type is String? but String was expected<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¿…é¡»æ˜¾å¼åœ°æ£€æŸ¥è¿™ä¸ªå€¼ä¸ä¸º null:</span><br></pre></td></tr></table></figure></p></blockquote></blockquote><p>if (email != null) sendEmailTo(email)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœä½¿ç”¨äº†letå‡½æ•°ï¼Œä¼šæ˜¯ä¸‹é¢è¿™æ ·å­çš„ï¼š</span><br></pre></td></tr></table></figure></p><p>email?.let { email -&gt; sendEmailTo(email) }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**let** å‡½æ•°åªåœ¨ email çš„å€¼éç©ºæ—¶æ‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ä½ å°±èƒ½åœ¨ lambda ä¸­æŠŠ email å½“ä½œéç©ºçš„å®å‚ä½¿ç”¨ã€‚</span><br><span class="line">ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„åå­— it è¿™ç§ç®€æ˜è¯­æ³•ä¹‹åï¼Œä¸Šé¢çš„ä»£ç å°±æ›´çŸ­äº† ï¼š</span><br></pre></td></tr></table></figure></p><p> email?.let{ sendEmailTo(it) ï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 7.å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§</span><br><span class="line"></span><br><span class="line">Kotlin é€šå¸¸è¦æ±‚ä½ åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€æœ‰å±æ€§ï¼Œå¦‚æœæŸä¸ªå±æ€§æ˜¯ éç©ºç±»å‹ï¼Œä½ å°±å¿…é¡»æä¾›éç©ºçš„åˆå§‹åŒ–å€¼ã€‚å¦åˆ™ï¼Œä½ å°±å¿…é¡»ä½¿ç”¨å¯ç©ºç±»å‹ã€‚å¦åˆ™ï¼Œ ä½ å°±å¿…é¡»ä½¿ç”¨å¯ç©ºç±»å‹ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œè¯¥å±æ€§çš„æ¯ä¸€æ¬¡è®¿é—®éƒ½éœ€è¦ null æ£€æŸ¥æˆ–è€… !! è¿ç®—ç¬¦ã€‚</span><br></pre></td></tr></table></figure></p><p>class MyService {<br>    fun performAction() : String = â€œfooâ€<br>}</p><p>class MyTest{<br>    private var myService: MyService? = null </p><pre><code>@Before fun setUp(){    myService = MyService() }@Test fun testAction(){    //å¿…é¡»æ³¨æ„å¯ç©ºæ€§ï¼šè¦ä¹ˆ ç”¨!!ï¼Œ è¦ä¹ˆç”¨?.    Assert.assertEquals( &quot;foo&quot; ï¼Œ myService!!.performAction() ) }</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ®µä»£ç å¾ˆéš¾çœ‹ï¼Œå°¤å…¶æ˜¯ä½ è¦åå¤ä½¿ç”¨è¿™ä¸ªå±æ€§çš„æ—¶å€™ã€‚ </span><br><span class="line">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ ä½¿ç”¨ **lateinit** ä¿®é¥°ç¬¦æ¥å®Œæˆè¿™æ ·çš„å£°æ˜ã€‚</span><br></pre></td></tr></table></figure></p><p>class MyService {<br>    fun performAction() : String = â€œfooâ€<br>}</p><p>class MyTest{<br>    //å£°æ˜ä¸€ä¸ªä¸éœ€è¦åˆå§‹åŒ– å™¨çš„éç©ºç±»å‹çš„å±æ€§<br>    private lateinit var myService: MyService</p><pre><code>@Before fun setUp(){    myService = MyService() }@Test fun testAction(){    //ä¸éœ€è¦ null æ£€æŸ¥ç›´æ¥è®¿é—®å±æ€§    Assert.assertEquals( &quot;foo&quot; ï¼Œ myService!!.performAction() ) }</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*æ³¨æ„ï¼Œ å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§éƒ½æ˜¯ varï¼Œå› ä¸ºéœ€è¦åœ¨æ„é€ æ–¹æ³•å¤–ä¿®æ”¹å®ƒçš„å€¼*</span><br><span class="line"></span><br><span class="line">### 8.&quot;Any&quot;å’Œ&quot;Any?&quot;ï¼šæ ¹ç±»å‹</span><br><span class="line"></span><br><span class="line">&gt; å’Œ Object ä½œä¸º Java ç±»å±‚çº§ç»“æ„çš„æ ¹å·®ä¸å¤šï¼Œ **Any** ç±»å‹æ˜¯ Kotlin æ‰€æœ‰éç©ºç±»å‹çš„è¶…ç±»å‹ï¼ˆéç©ºç±»å‹çš„æ ¹ï¼‰ã€‚</span><br><span class="line">&gt;</span><br><span class="line">&gt; ä½†æ˜¯åœ¨ Java ä¸­ï¼Œ Object åªæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹çš„è¶…ç±» å‹ï¼ˆå¼•ç”¨ç±»å‹çš„æ ¹ï¼‰ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹å¹¶ä¸æ˜¯ç±»å±‚çº§ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚</span><br><span class="line">&gt;</span><br><span class="line">&gt; è¿™æ„å‘³ç€å½“ä½  éœ€è¦ Object çš„æ—¶å€™ï¼Œä¸å¾—ä¸ä½¿ç”¨åƒ java.lang.Integer è¿™æ ·çš„åŒ…è£…ç±»å‹æ¥è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€‚ **è€Œåœ¨ Kotlin ä¸­ï¼Œ Any æ˜¯æ‰€æœ‰ç±»å‹çš„è¶…ç±»å‹ï¼ˆæ‰€æœ‰ç±»å‹çš„æ ¹ï¼‰**ï¼Œ åŒ…æ‹¬åƒ Int è¿™æ ·çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚ </span><br><span class="line"></span><br><span class="line">å’Œ Java ä¸€æ ·ï¼ŒæŠŠåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼èµ‹ç»™ **Any** ç±»å‹çš„å˜é‡æ—¶ä¼šè‡ªåŠ¨è£…ç®±ï¼š</span><br></pre></td></tr></table></figure></p><p>val answer: Any = 42<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*æ³¨æ„ **Any** æ˜¯éç©ºç±»å‹ï¼Œæ‰€ä»¥ **Any** ç±»å‹çš„å˜é‡ä¸å¯ä»¥æŒæœ‰ null å€¼*</span><br><span class="line"></span><br><span class="line">### 9.Unit ç±»å‹ ï¼š Kotlin çš„&quot;void&quot;</span><br><span class="line"></span><br><span class="line">Kotlin ä¸­çš„ **Unit** ç±»å‹å®Œæˆäº† Java ä¸­çš„ void ä¸€æ ·çš„åŠŸèƒ½ã€‚å½“å‡½æ•°æ²¡ä»€ä¹ˆæœ‰æ„æ€çš„ç»“æœè¦è¿”å›æ—¶ï¼Œå®ƒå¯ä»¥ç”¨ä½œå‡½æ•°çš„è¿”å›ç±»å‹ï¼š</span><br></pre></td></tr></table></figure></p><p>fun f () : Unit { . . . }<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ä¸Šï¼Œè¿™å’Œå†™ä¸€ä¸ªå¸¦æœ‰ä»£ç å—ä½“ä½†ä¸å¸¦ç±»å‹å£°æ˜çš„å‡½æ•°æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼š</span><br></pre></td></tr></table></figure></p><p>fun f () { .. }         //ç¼©å†™ç‰ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; Unit æ˜¯ä¸€ä¸ªå®Œå¤‡çš„ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºç±»å‹å‚æ•°ï¼Œè€Œ void å´ä¸è¡Œã€‚</span><br><span class="line"></span><br><span class="line">åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œ Unit è¿™ä¸ªåå­—ä¹ æƒ¯ä¸Šè¢«ç”¨æ¥è¡¨ç¤ºâ€œåªæœ‰ä¸€ä¸ªå®ä¾‹â€ï¼Œè¿™æ­£æ˜¯ Kotlin çš„ Unit å’Œ Java çš„ void çš„åŒºåˆ«ã€‚</span><br><span class="line"></span><br><span class="line">### 10.Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€</span><br><span class="line"></span><br><span class="line">å¯¹æŸäº› Kotlin å‡½æ•°æ¥è¯´ï¼Œ&quot;è¿”å›ç±»å‹&quot;çš„æ¦‚å¿µæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå› ä¸ºå®ƒä»¬ä»æ¥ä¸ä¼šæˆåŠŸåœ°ç»“æŸ</span><br><span class="line">,Kotlin ä½¿ç”¨ä¸€ç§ç‰¹æ®Šçš„è¿”å›ç±»å‹ Nothing æ¥è¡¨ç¤ºï¼š</span><br></pre></td></tr></table></figure></p><p>fun fail(message: String): Nothing {<br>    throw IllegalStateException (message)<br>}</p><blockquote><blockquote><p>fail (â€œError occurredâ€)<br>java.lang.IllegalStateException: Error occurred<br><code>`</code><br>Nothing ç±»å‹æ²¡æœ‰ä»»ä½•å€¼ï¼Œ åªæœ‰è¢«å½“ä½œå‡½æ•°è¿”å›å€¼ä½¿ç”¨ï¼Œæˆ–è€…è¢«å½“ä½œæ³›å‹å‡½æ•° è¿”å›å€¼çš„ç±»å‹å‚æ•°ä½¿ç”¨æ‰ä¼šæœ‰æ„ä¹‰ã€‚åœ¨å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹ï¼Œå£°æ˜ä¸€ä¸ªä¸èƒ½å­˜å‚¨ä»»ä½•å€¼ çš„å˜é‡æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ </p></blockquote></blockquote><h3 id="11-å¯ç©ºæ€§å’Œé›†åˆ"><a href="#11-å¯ç©ºæ€§å’Œé›†åˆ" class="headerlink" title="11.å¯ç©ºæ€§å’Œé›†åˆ"></a>11.å¯ç©ºæ€§å’Œé›†åˆ</h3><p>éå†ä¸€ä¸ªåŒ…å«å¯ç©ºå€¼çš„é›†åˆå¹¶è¿‡æ»¤æ‰ null æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ“ä½œï¼Œå› æ­¤ Kotlin æä¾›äº†ä¸€ä¸ªæ ‡å‡†åº“å‡½æ•° <strong>filterNotNull</strong> æ¥å®Œæˆå®ƒã€‚ </p><h3 id="12-åªè¯»é›†åˆä¸å¯å˜é›†åˆ"><a href="#12-åªè¯»é›†åˆä¸å¯å˜é›†åˆ" class="headerlink" title="12.åªè¯»é›†åˆä¸å¯å˜é›†åˆ"></a>12.åªè¯»é›†åˆä¸å¯å˜é›†åˆ</h3><p>Kotlin çš„é›†åˆè®¾è®¡å’Œ Java ä¸åŒçš„å¦ä¸€é¡¹é‡è¦ç‰¹è´¨æ˜¯ï¼Œå®ƒæŠŠè®¿é—®é›†åˆæ•°æ®çš„æ¥å£å’Œä¿®æ”¹é›†åˆæ•°æ®çš„æ¥å£åˆ†å¼€äº†ã€‚è¿™ç§åŒºåˆ«å­˜åœ¨äºæœ€åŸºç¡€çš„ä½¿ç”¨é›†åˆçš„æ¥å£ä¹‹ä¸­:kotlin.collections.Collectionã€‚</p><p>ä½¿ç”¨ kotlin.collections.MutableCollection æ¥å£å¯ä»¥ä¿®æ”¹é›†åˆä¸­çš„æ•°æ®ã€‚å®ƒç»§æ‰¿äº†æ™®é€šçš„ kotlin.collections.Collection æ¥å£,è¿˜æä¾›äº†æ–¹æ³•æ¥æ·»åŠ å’Œç§»é™¤å…ƒç´ ã€æ¸…ç©ºé›†åˆç­‰ã€‚ </p><p>ä¸€èˆ¬çš„è§„åˆ™æ˜¯åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨åªè¯»æ¥å£ï¼Œåªåœ¨ä»£ç éœ€è¦ä¿®æ”¹é›†åˆçš„åœ°æ–¹ä½¿ç”¨å¯å˜æ¥å£çš„å˜ä½“</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-å¯ç©ºç±»å‹&quot;&gt;&lt;a href=&quot;#1-å¯ç©ºç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;1.å¯ç©ºç±»å‹&quot;&gt;&lt;/a&gt;1.å¯ç©ºç±»å‹&lt;/h3&gt;&lt;p&gt;é—®å·å¯ä»¥åŠ åœ¨ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨ null å¼•ç”¨ ï¼š String?ã€ Int?ã€ MyCustomType? ï¼Œç­‰ç­‰&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªå¯ç©ºç±»å‹çš„å€¼ï¼Œèƒ½å¯¹å®ƒè¿›è¡Œçš„æ“ä½œä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½å†è°ƒç”¨å®ƒçš„æ–¹æ³•&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt; fun strLenSafe(s: String?) = s.length() &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ERROR: only safe (?.) or non null asserted (!!.) calls are allowed on a nullable receiver of type kotlin.String?&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kotlinç¬”è®°(å››):åŸºç¡€ç¯‡most plus</title>
    <link href="http://yoursite.com/2018/10/03/Kotlin%E7%AC%94%E8%AE%B0-%E5%9B%9B-%E5%9F%BA%E7%A1%80%E7%AF%87most-plus/"/>
    <id>http://yoursite.com/2018/10/03/Kotlinç¬”è®°-å››-åŸºç¡€ç¯‡most-plus/</id>
    <published>2018-10-03T01:48:16.000Z</published>
    <updated>2018-10-03T01:48:58.682Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æˆå‘˜å¼•ç”¨"><a href="#1-æˆå‘˜å¼•ç”¨" class="headerlink" title="1.æˆå‘˜å¼•ç”¨"></a>1.æˆå‘˜å¼•ç”¨</h3><p>Kotlinå’ŒJava8ä¸€æ ·ï¼Œå¦‚æœæŠŠå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå€¼ï¼Œä½ å°±å¯ä»¥ä¼ é€’å®ƒã€‚  </p><blockquote><p>ä½¿ç”¨:: è¿ç®—ç¬¦æ¥è½¬æ¢ ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val getAge = Person::age</span><br></pre></td></tr></table></figure><p>è¿™ç§è¡¨è¾¾å¼ç§°ä¸ºæˆå‘˜å¼•ç”¨ï¼Œå®ƒæä¾›äº†ç®€æ˜è¯­æ³•ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè°ƒç”¨å•ä¸ªæ–¹æ³•æˆ–è€… è®¿é—®å•ä¸ªå±æ€§çš„å‡½æ•°å€¼ã€‚åŒå†’å·æŠŠç±»åç§°ä¸ä½ è¦å¼•ç”¨çš„æˆå‘˜ï¼ˆä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå±æ€§ï¼‰åç§°éš”å¼€<br><a id="more"></a> </p><h3 id="2-é›†åˆçš„å‡½æ•°å¼API"><a href="#2-é›†åˆçš„å‡½æ•°å¼API" class="headerlink" title="2.é›†åˆçš„å‡½æ•°å¼API"></a>2.é›†åˆçš„å‡½æ•°å¼API</h3><p><strong>filter</strong> å‡½æ•°éå†é›†åˆå¹¶é€‰å‡ºåº”ç”¨ç»™å®š <strong>lambda</strong> åä¼šè¿”å› <strong>true</strong> çš„é‚£äº›å…ƒç´ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val list= listOf(l, 2, 3, 4) </span><br><span class="line">&gt;&gt; println(list.filter&#123;it % 2 == 0&#125;)</span><br></pre></td></tr></table></figure><p><strong>filter</strong> å‡½æ•°å¯ä»¥ä»é›†åˆä¸­ç§»é™¤ä½ ä¸æƒ³è¦çš„å…ƒç´ ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæ”¹å˜è¿™äº›å…ƒç´ ã€‚ å…ƒç´ çš„å˜æ¢æ˜¯ <strong>map</strong> çš„ç”¨æ­¦ä¹‹åœ°ã€‚ </p><p><strong>map</strong> å‡½æ•°å¯¹é›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å‡½æ•°å¹¶æŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ–°é›†åˆã€‚å¯ä»¥æŠŠæ•°å­—åˆ—è¡¨å˜æ¢æˆå®ƒä»¬å¹³æ–¹çš„åˆ—è¡¨ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val list= listOf(l, 2, 3, 4) </span><br><span class="line">&gt;&gt; println(list.map &#123; it * it &#125;</span><br><span class="line">&#123;1, 4, 9, 16&#125;</span><br></pre></td></tr></table></figure><h3 id="3-â€allâ€â€anyâ€â€countâ€å’Œâ€findâ€ï¼šå¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼"><a href="#3-â€allâ€â€anyâ€â€countâ€å’Œâ€findâ€ï¼šå¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼" class="headerlink" title="3.â€allâ€â€anyâ€â€countâ€å’Œâ€findâ€ï¼šå¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼"></a>3.â€allâ€â€anyâ€â€countâ€å’Œâ€findâ€ï¼šå¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼</h3><p>æ£€æŸ¥é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŸä¸ªæ¡ä»¶ï¼ˆæˆ–è€…å®ƒçš„å˜ç§ï¼Œæ˜¯å¦å­˜åœ¨ç¬¦åˆçš„å…ƒç´ ï¼‰ã€‚Kotlinä¸­ï¼Œå®ƒä»¬æ˜¯é€šè¿‡ <strong>all</strong> å’Œ <strong>any</strong> å‡½æ•°è¡¨è¾¾çš„ã€‚ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val canBeinClub27 = &#123; p: Person - &gt; p.age &lt;= 27 &#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ å¯¹æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³åˆ¤æ–­å¼æ„Ÿå…´è¶£ï¼Œåº”è¯¥ä½¿ç”¨ <strong>all</strong> å‡½æ•°ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val people= listOf(Person (&quot;Alice&quot;, 27), Person(&quot;Bob&quot;, 31))</span><br><span class="line">&gt;&gt; println( people.all(canBeinClub27) ) </span><br><span class="line">false</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ éœ€è¦æ£€æŸ¥é›†åˆä¸­æ˜¯å¦è‡³å°‘å­˜åœ¨ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œé‚£å°±ç”¨ <strong>any</strong> :</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; println(people any(canBeinClub27)) </span><br><span class="line">true</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ æƒ³çŸ¥é“æœ‰å¤šå°‘ä¸ªå…ƒç´ æ»¡è¶³äº†åˆ¤æ–­å¼ï¼Œä½¿ç”¨ <strong>count</strong> : </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val people= listOf(Person(&quot;Alice&quot;, 27) , Person (&quot;Bob&quot;, 31)) </span><br><span class="line">&gt;&gt; println(people.count(canBeinClub27))</span><br><span class="line">1</span><br></pre></td></tr></table></figure><blockquote><p>è¦æ‰¾åˆ°ä¸€ä¸ªæ»¡è¶³åˆ¤æ–­å¼çš„å…ƒç´ ï¼Œä½¿ç”¨ <strong>find</strong> å‡½æ•° ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val people= listOf(Person(&quot;Alice&quot;ï¼Œ 27) , Person(&quot;Bob&quot;, 31)) </span><br><span class="line">&gt;&gt; println(people.find(canBeinClub27)) </span><br><span class="line">Person(name=Alice, age=27)</span><br></pre></td></tr></table></figure><h3 id="4-groupBy-ï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„-map"><a href="#4-groupBy-ï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„-map" class="headerlink" title="4.groupBy ï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„ map"></a>4.groupBy ï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„ map</h3><p>å‡è®¾ä½ éœ€è¦æŠŠæ‰€æœ‰å…ƒç´ æŒ‰ç…§ä¸åŒçš„ç‰¹å¾åˆ’åˆ†æˆä¸åŒçš„åˆ†ç»„ã€‚ä¾‹å¦‚ï¼Œä½ æƒ³æŠŠäººæŒ‰å¹´é¾„åˆ†ç»„ï¼Œç›¸åŒå¹´é¾„çš„äººæ”¾åœ¨ä¸€ç»„ã€‚æŠŠè¿™ä¸ªç‰¹å¾ç›´æ¥å½“ä½œå‚æ•°ä¼ é€’ååˆ†æ–¹ä¾¿ã€‚<strong>groupBy</strong> å‡½æ•°å¯ä»¥å¸®ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; val people= listOf(Person(&quot;Alice&quot;, 31), Person(&quot;Bob&quot;, 29), Person (&quot;Carol&quot;, 31))</span><br><span class="line">&gt;&gt; println(people.groupBy &#123;it.age&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ¬¡æ“ä½œçš„ç»“æœæ˜¯ä¸€ä¸ª <strong>map</strong>ï¼Œæ˜¯å…ƒç´ åˆ†ç»„ä¾æ®çš„é”®ï¼ˆè¿™ä¸ªä¾‹å­ä¸­æ˜¯ageï¼‰å’Œå…ƒç´ åˆ†ç»„ï¼ˆpersonsï¼‰ä¹‹é—´çš„æ˜ å°„</p><h3 id="5-flatMap-å’Œ-flatten-ï¼šå¤„ç†åµŒå¥—é›†åˆä¸­çš„å…ƒç´ "><a href="#5-flatMap-å’Œ-flatten-ï¼šå¤„ç†åµŒå¥—é›†åˆä¸­çš„å…ƒç´ " class="headerlink" title="5.flatMap å’Œ flatten ï¼šå¤„ç†åµŒå¥—é›†åˆä¸­çš„å…ƒç´ "></a>5.flatMap å’Œ flatten ï¼šå¤„ç†åµŒå¥—é›†åˆä¸­çš„å…ƒç´ </h3><p>å‡è®¾ä½ æœ‰ä¸€å †è—ä¹¦ï¼Œä½¿ç”¨ Book ç±»è¡¨ç¤º ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class Book (val title: String, val authors: List&lt;String&gt;)</span><br></pre></td></tr></table></figure><p>æ¯æœ¬ä¹¦éƒ½å¯èƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªä½œè€…ï¼Œå¯ä»¥ç»Ÿè®¡å‡ºå›¾ä¹¦é¦†ä¸­çš„æ‰€æœ‰ä½œè€…çš„ set : </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">books.flatMap &#123; it.authors &#125; toSet()</span><br></pre></td></tr></table></figure><p><strong>flatMap</strong> å‡½æ•°åšäº†ä¸¤ä»¶äº‹æƒ…ï¼šé¦–å…ˆæ ¹æ®ä½œä¸ºå®å‚ç»™å®šçš„å‡½æ•°å¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åšå˜æ¢ï¼ˆæˆ–è€…è¯´æ˜ å°„ï¼‰ï¼Œç„¶åæŠŠå¤šä¸ªåˆ—è¡¨åˆå¹¶ï¼ˆæˆ–è€…è¯´å¹³é“ºï¼‰æˆä¸€ä¸ªåˆ—è¡¨ã€‚ </p><blockquote><p><strong>æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦åšä»»ä½•å˜æ¢ï¼Œåªæ˜¯éœ€è¦å¹³é“ºä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ä½¿ç”¨flattenå‡½æ•°ï¼šlistOfLists.flatten() ã€‚</strong></p></blockquote><p>Kotlin æ ‡å‡†åº“å‚è€ƒæ–‡æ¡£æœ‰è¯´æ˜ï¼Œ<strong>filter</strong> å’Œ <strong>map</strong> éƒ½ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ„å‘³ç€å…ƒç´ è¿‡å¤šçš„æ—¶å€™ï¼Œï¼ˆé“¾å¼ï¼‰è°ƒç”¨å°±ä¼šå˜å¾—ååˆ†ä½æ•ˆã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯ä»¥æŠŠæ“ä½œå˜æˆä½¿ç”¨åºåˆ—ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨é›†åˆï¼Œä¸‹é¢æ˜¯å¯¹æ¯”çš„ä¾‹å­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">people.map(Person: :name) .filter &#123; it.startsWith(&quot;A&quot;)ï½</span><br></pre></td></tr></table></figure><p>è½¬åŒ–ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">people.asSequence()</span><br><span class="line">    .map (Person: : name)</span><br><span class="line">    .filter&#123;it.startsWith(&quot;A&quot;)&#125;</span><br><span class="line">    .tolist</span><br></pre></td></tr></table></figure></p><p>Kotlinæƒ°æ€§é›†åˆæ“ä½œçš„å…¥å£å°±æ˜¯ <strong>Sequence</strong> æ¥å£ã€‚è¿™ä¸ªæ¥å£è¡¨ç¤ºçš„å°±æ˜¯ä¸€ä¸ªå¯ä»¥é€ä¸ªåˆ—ä¸¾å…ƒç´ çš„å…ƒç´ åºåˆ—ã€‚ </p><p>å¯ä»¥è°ƒç”¨æ‰©å±•å‡½æ•° <strong>asSequence</strong> æŠŠä»»æ„é›†åˆè½¬æ¢æˆåºåˆ—ï¼Œè°ƒç”¨  <strong>toList</strong> æ¥åšåå‘çš„è½¬æ¢ã€‚ </p><h3 id="6-ä½¿ç”¨Javaå‡½æ•°å¼æ¥å£"><a href="#6-ä½¿ç”¨Javaå‡½æ•°å¼æ¥å£" class="headerlink" title="6.ä½¿ç”¨Javaå‡½æ•°å¼æ¥å£"></a>6.ä½¿ç”¨Javaå‡½æ•°å¼æ¥å£</h3><p> <strong>OnClickListener</strong> æ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚è¿™ç§æ¥å£è¢«ç§°ä¸º <strong>å‡½æ•°å¼æ¥å£</strong>ï¼Œæˆ–è€… <strong>SAMæ¥å£</strong>ï¼Œ<strong>SAM</strong> ä»£è¡¨æŠ½è±¡æ–¹æ³•ã€‚JavaAPIä¸­éšå¤„å¯è§åƒ<strong>Runnable</strong>å’Œ<strong>Callable</strong>è¿™æ ·çš„å‡½æ•°å¼æ¥å£ï¼Œä»¥åŠæ”¯æŒå®ƒä»¬<br> çš„æ–¹æ³•ã€‚ Kotlin å…è®¸ä½ åœ¨è°ƒç”¨æ¥æ”¶å‡½æ•°å¼æ¥å£ä½œä¸ºå‚æ•°çš„æ–¹æ³•æ—¶ä½¿ç”¨ <strong>lambda</strong>ï¼Œæ¥ä¿è¯ä½ çš„ Kotlinä»£ç æ—¢æ•´æ´åˆç¬¦åˆä¹ æƒ¯ã€‚</p><p>å¯ä»¥æŠŠ <strong>lambda</strong> ä¼ ç»™ä»»ä½•æœŸæœ›å‡½æ•°å¼æ¥å£çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæœ‰ä¸€ä¸ª <strong>Runnable</strong> ç±»å‹çš„å‚æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/* Java */ </span><br><span class="line">void postponeComputation(int delay, Runnable computation);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ˜¾å¼åœ°åˆ›å»ºä¸€ä¸ªå®ç°äº† <strong>Runnable</strong> çš„åŒ¿åå¯¹è±¡çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post postponeComputation(1OOO, object : Runnable &#123; </span><br><span class="line">    override fun run() &#123;</span><br><span class="line">    println(42) </span><br><span class="line">    &#125;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Kotlin ä¸­ï¼Œå¯ä»¥è°ƒç”¨å®ƒå¹¶æŠŠä¸€ä¸ª <strong>lambda</strong> ä½œä¸ºå®å‚ä¼ ç»™å®ƒã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æŠŠå®ƒè½¬æ¢æˆä¸€ä¸ª <strong>Runnable</strong> çš„å®ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">postponeComputation(lOOO) &#123; println(42) &#125;</span><br></pre></td></tr></table></figure><p>å®Œå…¨ç­‰ä»·çš„å®ç°åº”è¯¥æ˜¯ä¸‹é¢è¿™æ®µä»£ç ä¸­çš„æ˜¾å¼<strong>object</strong>å£°æ˜ï¼Œå®ƒæŠŠ<strong>Runnable</strong>å®ä¾‹å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val runnable = Runnable &#123; println(42) &#125; </span><br><span class="line">fun handleComputation()&#123; postponeComputation(1OOO, runnable)&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-æˆå‘˜å¼•ç”¨&quot;&gt;&lt;a href=&quot;#1-æˆå‘˜å¼•ç”¨&quot; class=&quot;headerlink&quot; title=&quot;1.æˆå‘˜å¼•ç”¨&quot;&gt;&lt;/a&gt;1.æˆå‘˜å¼•ç”¨&lt;/h3&gt;&lt;p&gt;Kotlinå’ŒJava8ä¸€æ ·ï¼Œå¦‚æœæŠŠå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå€¼ï¼Œä½ å°±å¯ä»¥ä¼ é€’å®ƒã€‚  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨:: è¿ç®—ç¬¦æ¥è½¬æ¢ ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;val getAge = Person::age&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™ç§è¡¨è¾¾å¼ç§°ä¸ºæˆå‘˜å¼•ç”¨ï¼Œå®ƒæä¾›äº†ç®€æ˜è¯­æ³•ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè°ƒç”¨å•ä¸ªæ–¹æ³•æˆ–è€… è®¿é—®å•ä¸ªå±æ€§çš„å‡½æ•°å€¼ã€‚åŒå†’å·æŠŠç±»åç§°ä¸ä½ è¦å¼•ç”¨çš„æˆå‘˜ï¼ˆä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå±æ€§ï¼‰åç§°éš”å¼€&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kotlinç¬”è®°(ä¸‰):åŸºç¡€ç¯‡more plus</title>
    <link href="http://yoursite.com/2018/10/02/Kotlin%E7%AC%94%E8%AE%B0-%E4%B8%89-%E5%9F%BA%E7%A1%80%E7%AF%87more-plus/"/>
    <id>http://yoursite.com/2018/10/02/Kotlinç¬”è®°-ä¸‰-åŸºç¡€ç¯‡more-plus/</id>
    <published>2018-10-02T02:21:45.000Z</published>
    <updated>2018-10-08T12:22:50.017Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-æ¥å£çš„é»˜è®¤å®ç°"><a href="#1-æ¥å£çš„é»˜è®¤å®ç°" class="headerlink" title="1.æ¥å£çš„é»˜è®¤å®ç°"></a>1.æ¥å£çš„é»˜è®¤å®ç°</h3><p>æ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°ã€‚ä¸Java8ä¸åŒçš„æ˜¯ï¼ŒJava8ä¸­éœ€è¦ä½ åœ¨è¿™æ ·çš„å®ç°ä¸Šæ ‡æ³¨defaultå…³é”®å­—ï¼Œå¯¹äºè¿™æ ·çš„æ–¹æ³•ï¼ŒKotlinæ²¡æœ‰ç‰¹æ®Šçš„æ³¨è§£ ï¼šåªéœ€è¦æä¾›ä¸€ä¸ªæ–¹æ³•ä½“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Clickable&#123;</span><br><span class="line">    fun click()</span><br><span class="line">    fun showOff = println(&quot;I&apos;m clickable&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a> <p>åœ¨å®ç°æ¥å£çš„åœ°æ–¹å¦‚æœè¦æ˜¾å¼åœ°å®ç°æ–¹æ³•ï¼Œåœ¨Kotlinä¸­éœ€è¦æŠŠ åŸºç±»çš„åå­—æ”¾åœ¨å°–æ‹¬å·ä¸­ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">super&lt;Clickable&gt;.showOff()</span><br></pre></td></tr></table></figure></p><h3 id="2-å®šä¹‰ç±»çš„ç»§æ‰¿ç»“æ„"><a href="#2-å®šä¹‰ç±»çš„ç»§æ‰¿ç»“æ„" class="headerlink" title="2.å®šä¹‰ç±»çš„ç»§æ‰¿ç»“æ„"></a>2.å®šä¹‰ç±»çš„ç»§æ‰¿ç»“æ„</h3><pre><code>Javaçš„ç±»å’Œæ–¹æ³•é»˜è®¤æ˜¯opençš„ï¼Œè€ŒKotlinä¸­é»˜è®¤éƒ½æ˜¯finalçš„ã€‚ </code></pre><p>å¦‚æœä½ æƒ³å…è®¸åˆ›å»ºä¸€ä¸ªç±»çš„å­ç±»ï¼Œéœ€è¦ä½¿ç”¨ <strong>open</strong> ä¿®é¥°ç¬¦æ¥æ ‡ç¤ºè¿™ä¸ªç±»ã€‚æ­¤å¤–ï¼Œéœ€è¦ç»™æ¯ä¸€ä¸ªå¯ä»¥è¢«é‡å†™çš„å±æ€§æˆ–æ–¹æ³•æ·»åŠ openä¿®é¥°ç¬¦ã€‚</p><blockquote><p><em>æ³¨æ„ï¼Œå¦‚æœä½ é‡å†™äº†ä¸€ä¸ªåŸºç±»æˆ–è€…æ¥å£çš„æˆå‘˜ï¼Œé‡å†™äº†çš„æˆå‘˜åŒæ ·é»˜è®¤æ˜¯ opençš„ã€‚å¦‚æœä½ æƒ³æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼Œé˜»æ­¢ä½ çš„ç±»çš„å­ç±»é‡å†™ä½ çš„å®ç°ï¼Œå¯ä»¥æ˜¾å¼åœ°å°†é‡å†™çš„æˆå‘˜æ ‡æ³¨ä¸º <strong>final</strong> ã€‚</em></p></blockquote><h3 id="3-åµŒå¥—ç±»ä¸å†…éƒ¨ç±»"><a href="#3-åµŒå¥—ç±»ä¸å†…éƒ¨ç±»" class="headerlink" title="3.åµŒå¥—ç±»ä¸å†…éƒ¨ç±»"></a>3.åµŒå¥—ç±»ä¸å†…éƒ¨ç±»</h3><p>Kotlinä¸­æ²¡æœ‰æ˜¾å¼ä¿®é¥°ç¬¦çš„åµŒå¥—ç±»ä¸Javaä¸­çš„staticåµŒå¥—ç±»æ˜¯ä¸€æ ·çš„ã€‚è¦æŠŠå®ƒå˜æˆä¸€ä¸ªå†…éƒ¨ç±»æ¥æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨çš„è¯éœ€è¦ä½¿ç”¨ <strong>inner</strong> ä¿®é¥°ç¬¦ã€‚</p><p>åœ¨Kotlinä¸­å¼•ç”¨å¤–éƒ¨ç±»å®ä¾‹çš„è¯­æ³•ä¹Ÿä¸Javaä¸åŒã€‚éœ€è¦ä½¿ç”¨ <strong>this@Outer</strong> ä» <strong>Inner</strong> ç±»å»è®¿é—® <strong>Outer</strong> ç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Outer&#123;</span><br><span class="line">    inner class Inner&#123;</span><br><span class="line">        fun getOuterReference() : Outer = this@Outer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"><a href="#4-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„" class="headerlink" title="4.å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"></a>4.å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„</h3><p>ä¸ºçˆ¶ç±»æ·»åŠ ä¸€ä¸ª <strong>sealed</strong> ä¿®é¥°ç¬¦ï¼Œå¯¹å¯èƒ½åˆ›å»ºçš„å­ç±»åšå‡ºä¸¥æ ¼çš„é™åˆ¶ã€‚</p><p>å¦‚æœä½ åœ¨ when è¡¨è¾¾å¼ä¸­å¤„ç†æ‰€æœ‰ <strong>sealed</strong> ç±»çš„å­ç±»ï¼Œä½ å°±ä¸å†éœ€è¦æä¾›é»˜è®¤åˆ†æ”¯ã€‚æ³¨æ„ï¼Œ <strong>sealed</strong> ä¿®é¥°ç¬¦éšå«çš„è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª <strong>open</strong> ç±»ï¼Œ ä½ ä¸å†éœ€è¦æ˜¾å¼åœ°æ·»åŠ  <strong>open</strong> ä¿®é¥°ç¬¦ã€‚</p><h3 id="5-å£°æ˜ä¸€ä¸ªå¸¦éé»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"><a href="#5-å£°æ˜ä¸€ä¸ªå¸¦éé»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»" class="headerlink" title="5.å£°æ˜ä¸€ä¸ªå¸¦éé»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"></a>5.å£°æ˜ä¸€ä¸ªå¸¦éé»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»</h3><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class User constructor(_nickname: String) &#123;</span><br><span class="line">    val nickname : String</span><br><span class="line">    </span><br><span class="line">    init&#123;</span><br><span class="line">        nickname = _nickname</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–°çš„Kotlinå…³é”®å®‡ï¼š<strong>constructor</strong> å’Œ <strong>init</strong> ã€‚ <strong>constructor</strong> å…³é”®å­—ç”¨æ¥å¼€å§‹ä¸€ä¸ªä¸»æ„é€ æ–¹æ³•æˆ–ä»æ„é€ æ–¹æ³•çš„å£°æ˜ã€‚ <strong>init</strong> å…³é”®å­—ç”¨æ¥å¼•å…¥ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥å—ã€‚è¿™ç§è¯­å¥å—åŒ…å«äº†åœ¨ç±»è¢«åˆ›å»ºæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œ å¹¶ä¼šä¸ä¸»æ„é€ æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚</p><blockquote><p>å¦‚æœä½ æƒ³è¦ç¡®ä¿ä½ çš„ç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–ï¼Œå¿…é¡»æŠŠæ„é€ æ–¹æ³•æ ‡è®°ä¸º privateï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class Secretive private constructor() &#123;&#125;</span><br><span class="line">//ä¸€èˆ¬è¿™ä¹ˆåšè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé™æ€å®ç”¨å·¥å…·æˆå‘˜çš„å®¹å™¨æˆ–è€…æ˜¯å•ä¾‹çš„</span><br></pre></td></tr></table></figure><h3 id="6-é€šè¿‡-getter-æˆ–-setter-è®¿é—®æ”¯æŒå­—æ®µ"><a href="#6-é€šè¿‡-getter-æˆ–-setter-è®¿é—®æ”¯æŒå­—æ®µ" class="headerlink" title="6.é€šè¿‡ getter æˆ– setter è®¿é—®æ”¯æŒå­—æ®µ"></a>6.é€šè¿‡ getter æˆ– setter è®¿é—®æ”¯æŒå­—æ®µ</h3><p>å‡è®¾ä½ æƒ³åœ¨ä»»ä½•å¯¹å­˜å‚¨åœ¨å±æ€§ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶è¾“å‡ºæ—¥å¿—ï¼Œä½ å£°æ˜äº†ä¸€ä¸ªå¯å˜å±æ€§å¹¶ä¸”åœ¨æ¯æ¬¡ setter è®¿é—®æ—¶æ‰§è¡Œé¢å¤–çš„ä»£ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Â·user (val name: String) &#123; </span><br><span class="line">    var address: String =&quot;unspecified&quot; </span><br><span class="line">        set(value: String) &#123; </span><br><span class="line">            println (â€â€â€œ A Address was changed for $name:</span><br><span class="line">            &quot;$field&quot; -&gt; &quot;value&quot;.&quot;&quot;&quot;&quot;.trimIndent())</span><br><span class="line">            field = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åƒå¹³å¸¸ä¸€æ ·é€šè¿‡ä½¿ç”¨ user.address ï¼ â€œnew valueâ€ï¼Œ æ¥ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè¿™å…¶å®åœ¨åº•å±‚è°ƒç”¨äº† setterã€‚</p><p>åœ¨ setter çš„å‡½æ•°ä½“ä¸­ï¼Œä½¿ç”¨äº†ç‰¹æ®Šçš„æ ‡è¯†ç¬¦ <strong>field</strong> æ¥è®¿é—®æ”¯æŒå­—æ®µçš„å€¼ã€‚</p><p>å¦‚æœä½ æƒ³ä¿®æ”¹è®¿é—®å™¨çš„å¯è§æ€§ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class LengthCounter &#123;</span><br><span class="line">    var counter: Int = 0 </span><br><span class="line">    private set     //è¿™ä¸‹å°±ä¸èƒ½åœ¨ç±»å¤–éƒ¨ä¿®æ”¹è¿™ä¸ªå±æ€§äº†</span><br><span class="line">    </span><br><span class="line">    fun addWord(word: String)&#123;</span><br><span class="line">        counter += word.length</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-æ•°æ®ç±»ï¼šè‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°"><a href="#7-æ•°æ®ç±»ï¼šè‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°" class="headerlink" title="7.æ•°æ®ç±»ï¼šè‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°"></a>7.æ•°æ®ç±»ï¼šè‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°</h3><p>å¦‚æœæƒ³è¦ä½ çš„ç±»æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ•°æ®å®¹å™¨ï¼Œä½ éœ€è¦é‡å†™è¿™äº›æ–¹æ³• ï¼š <strong>toString</strong>ã€ <strong>equals</strong> å’Œ <strong>hashCode</strong> ã€‚åœ¨Kotlinä¸­ä½ ä¸å¿…å†å»ç”Ÿæˆè¿™äº›æ–¹æ³•äº† ã€‚å¦‚æœä¸ºä½ çš„ç±»æ·»åŠ  <strong>data</strong> ä¿®é¥°ç¬¦ï¼Œå¿…è¦çš„æ–¹æ³•å°†ä¼šè‡ªåŠ¨ç”Ÿæˆå¥½ã€‚</p><p>æ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data class Client(val name: String, val postalCode: Int)</span><br></pre></td></tr></table></figure></p><h3 id="8-æ•°æ®ç±»å’Œä¸å¯å˜æ€§ï¼š-copy-æ–¹æ³•"><a href="#8-æ•°æ®ç±»å’Œä¸å¯å˜æ€§ï¼š-copy-æ–¹æ³•" class="headerlink" title="8.æ•°æ®ç±»å’Œä¸å¯å˜æ€§ï¼š copy()æ–¹æ³•"></a>8.æ•°æ®ç±»å’Œä¸å¯å˜æ€§ï¼š copy()æ–¹æ³•</h3><p>ä¸ºäº†è®©ä½¿ç”¨ä¸å¯å˜å¯¹è±¡çš„æ•°æ®ç±»å˜å¾—æ›´å®¹æ˜“ï¼ŒKotlinç¼–è¯‘å™¨ä¸ºå®ƒä»¬å¤šç”Ÿæˆäº†ä¸€ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªå…è®¸ <strong>copy</strong> ç±»çš„å®ä¾‹çš„æ–¹æ³•ï¼Œå¹¶åœ¨ <strong>copy</strong> çš„åŒæ—¶ä¿®æ”¹æŸäº›å±æ€§çš„å€¼:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class Client (val name: String, val postalCode: Int) &#123;</span><br><span class="line">    fun copy(name: String = this.name, postalCode: Int = </span><br><span class="line">    this.postalCode) = Client(name, postalCode)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨</span><br><span class="line">&gt;&gt;&gt; val bob = Client(&quot;Bobâ€, 973293) </span><br><span class="line">&gt;&gt;&gt; println(bob.copy(postalCode = 382555))</span><br></pre></td></tr></table></figure><h3 id="9-ç±»å§”æ‰˜ï¼šä½¿ç”¨â€œbyâ€å…³é”®å­—"><a href="#9-ç±»å§”æ‰˜ï¼šä½¿ç”¨â€œbyâ€å…³é”®å­—" class="headerlink" title="9.ç±»å§”æ‰˜ï¼šä½¿ç”¨â€œbyâ€å…³é”®å­—"></a>9.ç±»å§”æ‰˜ï¼šä½¿ç”¨â€œbyâ€å…³é”®å­—</h3><p>(è£…é¥°æ¨¡å¼æˆ‘è¿˜ä¸æ˜¯å¤ªäº†è§£ï¼Œäº†è§£ä»¥åå†è®°å½•)</p><h3 id="10-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"><a href="#10-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ" class="headerlink" title="10.å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"></a>10.å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ</h3><p>åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿè®¾è®¡ä¸­ä¸€ä¸ªç›¸å½“å¸¸è§çš„æƒ…å½¢å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå®ä¾‹çš„ç±»ã€‚åœ¨Javaä¸­ï¼Œè¿™é€šå¸¸é€šè¿‡å•ä¾‹æ¨¡å¼æ¥å®ç° </p><p>Kotlin é€šè¿‡ä½¿ç”¨å¯¹è±¡å£°æ˜åŠŸèƒ½ä¸ºè¿™ä¸€åˆ‡æä¾›äº†æœ€é«˜çº§çš„è¯­è¨€æ”¯æŒã€‚å¯¹è±¡å£°æ˜å°†ç±»å£°æ˜ä¸è¯¥ç±»çš„å•ä¸€å®ä¾‹å£°æ˜ç»“åˆåˆ°äº†ä¸€èµ·ã€‚ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">object Payroll &#123; </span><br><span class="line">    val allErnployees = arrayListOf&lt;Person&gt;()</span><br><span class="line"></span><br><span class="line">    fun calculateSalary() &#123; </span><br><span class="line">        for &#123;person in allErnployees) &#123; </span><br><span class="line">        ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹è±¡å£°æ˜é€šè¿‡objectå…³é”®å®‡å¼•å…¥ã€‚ä¸€ä¸ªå¯¹è±¡å£°æ˜å¯ä»¥éå¸¸é«˜æ•ˆåœ°ä»¥ä¸€å¥è¯æ¥å®šä¹‰ä¸€ä¸ªç±»å’Œä¸€ä¸ªè¯¥ç±»çš„å˜é‡ã€‚ </p></blockquote><h3 id="11-ä¼´ç”Ÿå¯¹è±¡ï¼šå·¥å‚æ–¹æ³•å’Œé™æ€æˆå‘˜çš„åœ°ç›˜"><a href="#11-ä¼´ç”Ÿå¯¹è±¡ï¼šå·¥å‚æ–¹æ³•å’Œé™æ€æˆå‘˜çš„åœ°ç›˜" class="headerlink" title="11.ä¼´ç”Ÿå¯¹è±¡ï¼šå·¥å‚æ–¹æ³•å’Œé™æ€æˆå‘˜çš„åœ°ç›˜"></a>11.ä¼´ç”Ÿå¯¹è±¡ï¼šå·¥å‚æ–¹æ³•å’Œé™æ€æˆå‘˜çš„åœ°ç›˜</h3><p>åœ¨ç±»ä¸­å®šä¹‰çš„å¯¹è±¡ä¹‹ä¸€å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—æ¥æ ‡è®°ï¼š<strong>companion</strong>ã€‚å¦‚æœè¿™æ ·åšï¼Œå°±è·å¾—äº†ç›´æ¥é€šè¿‡å®¹å™¨ç±»åç§°æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§çš„èƒ½åŠ›ï¼Œä¸å†éœ€è¦æ˜¾å¼åœ°æŒ‡æ˜å¯¹è±¡çš„åç§°ã€‚æœ€ç»ˆçš„è¯­æ³•çœ‹èµ·æ¥éå¸¸åƒ Java ä¸­çš„é™æ€æ–¹æ³•è°ƒç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class A &#123; </span><br><span class="line">    companion object &#123; </span><br><span class="line">        fun bar() &#123; </span><br><span class="line">        println (&quot;Companion object called&quot;) </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt; A.bar() </span><br><span class="line">Companion object called</span><br></pre></td></tr></table></figure><p>ä¼´ç”Ÿå¯¹è±¡å¯ä»¥è®¿é—®ç±»ä¸­çš„æ‰€æœ‰privateæˆå‘˜ï¼ŒåŒ…æ‹¬privateæ„é€ æ–¹æ³•ï¼Œå®ƒæ˜¯å®ç°å·¥å‚æ¨¡å¼çš„ç†æƒ³é€‰æ‹©ã€‚ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class User private constructor(val nickname: String) &#123;</span><br><span class="line">    companion object &#123;</span><br><span class="line">        fun newSubscribingUser(email: String) =</span><br><span class="line">        User(email.substringBefore (&apos;@&apos;)) </span><br><span class="line">        </span><br><span class="line">        fun newFacebookUser(accountld: Int) = </span><br><span class="line">        User(getFacebookName(accountld)) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt; val subscribingUser = User.newSubscribingUser (&quot;bob@gmail.com&quot;) </span><br><span class="line">&gt;&gt; val facebookUser = User.newFacebookUser(4) </span><br><span class="line">&gt;&gt; println(subscribingUser.nickname)</span><br><span class="line">bob</span><br></pre></td></tr></table></figure><h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ul><li>Kotlin çš„æ¥å£ä¸ Java çš„ç›¸ä¼¼ï¼Œä½†æ˜¯å¯ä»¥åŒ…å«é»˜è®¤å®ç° (Java ä»ç¬¬8ç‰ˆæ‰å¼€å§‹æ”¯æŒ)å’Œå±æ€§ã€‚</li><li>æ‰€æœ‰çš„å£°æ˜é»˜è®¤éƒ½æ˜¯ final å’Œ public çš„ã€‚</li><li>è¦æƒ³ä½¿å£°æ˜ä¸æ˜¯ final çš„ï¼Œå°†å…¶æ ‡è®°ä¸º openã€‚</li><li>internal å£°æ˜åœ¨åŒä¸€æ¨¡å—ä¸­å¯è§ã€‚</li><li>åµŒå¥—ç±»é»˜è®¤ä¸æ˜¯å†…éƒ¨ç±»ã€‚ä½¿ç”¨innerå…³é”®å­—æ¥å­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚</li><li>sealed ç±»çš„å­ç±»åªèƒ½åµŒå¥—åœ¨è‡ªèº«çš„å£°æ˜ä¸­ï¼ˆKotlin 1.1 å…è®¸å°†å­ç±»æ”¾ç½®åœ¨åŒä¸€æ–‡ä»¶çš„ä»»æ„åœ°æ–¹ï¼‰ã€‚</li><li>åˆå§‹åŒ–è¯­å¥å—å’Œä»æ„é€ æ–¹æ³•ä¸ºåˆå§‹åŒ–ç±»å®ä¾‹æä¾›äº†çµæ´»æ€§ã€‚ </li><li>ä½¿ç”¨ field æ ‡è¯†ç¬¦åœ¨è®¿é—®å™¨æ–¹æ³•ä½“ä¸­å¼•ç”¨å±æ€§çš„æ”¯æŒå­—æ®µã€‚</li><li>æ•°æ®ç±»æä¾›äº†ç¼–è¯‘å™¨ç”Ÿæˆçš„ equalsã€ hashCodeã€ toStringã€ copy å’Œå…¶ä»–æ–¹æ³•ã€‚ </li><li>ç±»å§”æ‰˜å¸®åŠ©é¿å…åœ¨ä»£ç ä¸­å‡ºç°è®¸å¤šç›¸ä¼¼çš„å§”æ‰˜æ–¹æ³•ã€‚ </li><li>å¯¹è±¡å£°æ˜æ˜¯ Kotlin ä¸­å®šä¹‰å•ä¾‹ç±»çš„æ–¹æ³•ã€‚</li><li>ä¼´ç”Ÿå¯¹è±¡ï¼ˆä¸åŒ…çº§åˆ«å‡½æ•°å’Œå±æ€§ä¸€èµ·ï¼‰æ›¿ä»£äº†Javaé™æ€æ–¹æ³•å’Œå­—æ®µå®šä¹‰ã€‚ </li><li>ä¼´ç”Ÿå¯¹è±¡ä¸å…¶ä»–å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥å®ç°æ¥å£ï¼Œä¹Ÿå¯ä»¥æ‹¥æœ‰æœ‰æ‰©å±•å‡½æ•°å’Œå±æ€§ã€‚</li><li>å¯¹è±¡è¡¨è¾¾å¼æ˜¯ Kotlinä¸­é’ˆå¯¹JavaåŒ¿åå†…éƒ¨ç±»çš„æ›¿ä»£å“ï¼Œå¹¶å¢åŠ äº†è¯¸å¦‚å®ç°å¤šä¸ªæ¥å£çš„èƒ½åŠ›å’Œä¿®æ”¹åœ¨åˆ›å»ºå¯¹è±¡çš„ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡çš„èƒ½åŠ›ç­‰åŠŸèƒ½ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-æ¥å£çš„é»˜è®¤å®ç°&quot;&gt;&lt;a href=&quot;#1-æ¥å£çš„é»˜è®¤å®ç°&quot; class=&quot;headerlink&quot; title=&quot;1.æ¥å£çš„é»˜è®¤å®ç°&quot;&gt;&lt;/a&gt;1.æ¥å£çš„é»˜è®¤å®ç°&lt;/h3&gt;&lt;p&gt;æ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°ã€‚ä¸Java8ä¸åŒçš„æ˜¯ï¼ŒJava8ä¸­éœ€è¦ä½ åœ¨è¿™æ ·çš„å®ç°ä¸Šæ ‡æ³¨defaultå…³é”®å­—ï¼Œå¯¹äºè¿™æ ·çš„æ–¹æ³•ï¼ŒKotlinæ²¡æœ‰ç‰¹æ®Šçš„æ³¨è§£ ï¼šåªéœ€è¦æä¾›ä¸€ä¸ªæ–¹æ³•ä½“&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;interface Clickable&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun click()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fun showOff = println(&amp;quot;I&amp;apos;m clickable&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kotlinç¬”è®°(äºŒ):åŸºç¡€ç¯‡plus</title>
    <link href="http://yoursite.com/2018/10/01/Kotlin%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%9F%BA%E7%A1%80%E7%AF%87plus/"/>
    <id>http://yoursite.com/2018/10/01/Kotlinç¬”è®°-äºŒ-åŸºç¡€ç¯‡plus/</id>
    <published>2018-10-01T08:15:48.000Z</published>
    <updated>2018-10-01T08:16:18.797Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-é¡¶å±‚å‡½æ•°å’Œå±æ€§"><a href="#1-é¡¶å±‚å‡½æ•°å’Œå±æ€§" class="headerlink" title="1.é¡¶å±‚å‡½æ•°å’Œå±æ€§"></a>1.é¡¶å±‚å‡½æ•°å’Œå±æ€§</h3><p>åœ¨Kotlinä¸­ï¼Œå¯ä»¥æŠŠé‚£äº›å·¥å…·ç±»é‡Œçš„å‡½æ•°ç›´æ¥æ”¾åˆ°ä»£ç æ–‡ä»¶çš„é¡¶å±‚ï¼Œä¸ç”¨ä»å±äºä»»ä½•çš„ç±»ã€‚è¿™äº›æ”¾åœ¨æ–‡ä»¶é¡¶å±‚çš„å‡½æ•°ä¾ç„¶æ˜¯åŒ…å†…çš„æˆå‘˜ï¼Œå¦‚æœä½ éœ€è¦ä»åŒ…å¤–è®¿é—®å®ƒï¼Œåˆ™éœ€è¦importï¼Œä½†ä¸å†éœ€è¦é¢å¤–åŒ…ä¸€å±‚</p><h3 id="2-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§"><a href="#2-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§" class="headerlink" title="2.ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§"></a>2.ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§</h3><p>æ‰©å±•å‡½æ•°éå¸¸ç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œä¸è¿‡å®šä¹‰åœ¨ç±»çš„å¤–é¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">package strings </span><br><span class="line">fun String.lastChar(): Char = this.get(this.length - 1) //thiså¯ä»¥çœç•¥</span><br></pre></td></tr></table></figure><a id="more"></a> <p>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œä½ å·²ç»ä¸ºStringç±»æ·»åŠ äº†è‡ªå·±çš„æ–¹æ³•ã€‚å³ä½¿å­—ç¬¦ä¸²ä¸æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ²¡æœ‰ç±»çš„æºä»£ç ï¼Œä½ ä»ç„¶å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ ¹æ®éœ€è¦å»æ‰©å±•æ–¹æ³•ã€‚</p><blockquote><p>æ³¨æ„ï¼Œæ‰©å±•å‡½æ•°å¹¶ä¸å…è®¸ä½ æ‰“ç ´å®ƒçš„å°è£…æ€§ã€‚å’Œåœ¨ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œæ‰©å±•å‡½æ•°ä¸èƒ½è®¿ç§æœ‰çš„æˆ–è€…æ˜¯å—ä¿æŠ¤çš„æˆå‘˜ã€‚ </p><p>å¯¹äºä½ å®šä¹‰çš„ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åœ¨æ•´ä¸ªç›®èŒƒå›´å†…ç”Ÿæ•ˆã€‚ç›¸åï¼Œå¦‚æœä½ è¦ä½¿ç”¨å®ƒï¼Œéœ€è¦è¿›è¡Œå¯¼å…¥</p><p>æ‰©å±•å‡½æ•°å¹¶ä¸å­˜åœ¨é‡å†™ï¼Œå› ä¸ºKotiinä¼šæŠŠå®ƒä»¬å½“ä½œé™æ€å‡½æ•°å¯¹å¾…</p></blockquote><p>ä¸‹é¢æ˜¯å£°æ˜ä¸€ä¸ªæ‰©å±•å±æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val String.lastChar: Char get() = get(length - 1)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå’Œæ‰©å±•å‡½æ•°ä¸€æ ·ï¼Œæ‰©å±•å±æ€§ä¹Ÿåƒæ¥æ”¶è€…çš„ä¸€ä¸ªæ™®é€šçš„æˆå‘˜å±æ€§ä¸€æ ·ã€‚è¿™é‡Œï¼Œå¿…é¡»å®šä¹‰getterå‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰æ”¯æŒå­—æ®µï¼Œå› æ­¤æ²¡æœ‰é»˜è®¤getterçš„å®ç°ã€‚åŒç†ï¼Œåˆå§‹åŒ–ä¹Ÿä¸å¯ä»¥ï¼šå› ä¸ºæ²¡æœ‰åœ°æ–¹å­˜å‚¨åˆå§‹å€¼ã€‚</p><pre><code>æ³¨æ„ï¼Œå½“ä½ éœ€è¦ä»Javaä¸­è®¿é—®æ‰©å±•å±æ€§çš„æ—¶å€™ï¼Œåº”è¯¥æ˜¾å¼åœ°è°ƒç”¨å®ƒçš„getterå‡½æ•°</code></pre><h3 id="3-å¯å˜å‚æ•°ï¼šè®©å‡½æ•°æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°"><a href="#3-å¯å˜å‚æ•°ï¼šè®©å‡½æ•°æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°" class="headerlink" title="3.å¯å˜å‚æ•°ï¼šè®©å‡½æ•°æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°"></a>3.å¯å˜å‚æ•°ï¼šè®©å‡½æ•°æ”¯æŒä»»æ„æ•°é‡çš„å‚æ•°</h3><p>å½“ä½ åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºåˆ—è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ä¼ é€’ä»»æ„ä¸ªæ•°çš„å‚æ•°ç»™å®ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val list= list0f(2, 3, 5, 7, 11)</span><br></pre></td></tr></table></figure><p>Kotlinçš„å¯å˜å‚æ•°ä¸Javaç±»ä¼¼ï¼Œä½†è¯­æ³•ç•¥æœ‰ä¸åŒï¼šKotlinåœ¨è¯¥ç±»å‹ä¹‹åä¸ä¼šå†ä½¿ç”¨ä¸‰ä¸ªç‚¹ï¼Œè€Œæ˜¯åœ¨å‚æ•°ä¸Šä½¿ç”¨varargä¿®é¥°ç¬¦ã€‚</p><p>Kotlinå’ŒJava ä¹‹é—´çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå½“éœ€è¦ä¼ é€’çš„å‚æ•°å·±ç»åŒ…è£…åœ¨æ•°ç»„ä¸­æ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°çš„è¯­æ³•ã€‚åœ¨Javaä¸­ï¼Œå¯ä»¥æŒ‰åŸæ ·ä¼ é€’æ•°ç»„ï¼Œè€ŒKotlin åˆ™è¦æ±‚ä½ æ˜¾å¼åœ°è§£åŒ…æ•°ç»„ï¼Œä»¥ä¾¿æ¯ä¸ªæ•°ç»„å…ƒç´ åœ¨å‡½æ•°ä¸­èƒ½ä½œä¸ºå•ç‹¬çš„å‚æ•°æ¥è°ƒç”¨ã€‚ä»æŠ€æœ¯çš„è§’åº¦æ¥è®²ï¼Œè¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºå±•å¼€è¿ç®—ç¬¦ï¼Œè€Œä½¿ç”¨çš„æ—¶å€™ï¼Œä¸è¿‡æ˜¯åœ¨å¯¹åº”çš„å‚æ•°å‰é¢æ”¾ä¸€ä¸ª*ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;ï¼‰&#123;</span><br><span class="line">val list = listOf(&quot;args:â€,*args) </span><br><span class="line">println(list) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-é”®å€¼å¯¹çš„å¤„ç†ï¼šä¸­ç¼€è°ƒç”¨å’Œè§£æ„å£°æ˜"><a href="#4-é”®å€¼å¯¹çš„å¤„ç†ï¼šä¸­ç¼€è°ƒç”¨å’Œè§£æ„å£°æ˜" class="headerlink" title="4.é”®å€¼å¯¹çš„å¤„ç†ï¼šä¸­ç¼€è°ƒç”¨å’Œè§£æ„å£°æ˜"></a>4.é”®å€¼å¯¹çš„å¤„ç†ï¼šä¸­ç¼€è°ƒç”¨å’Œè§£æ„å£°æ˜</h3><p>å¯ä»¥ä½¿ç”¨ mapOf å‡½æ•°æ¥åˆ›å»º map:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val map= mapOf(l to &quot;one&quot;ï¼Œ 7 to &quot;seven&quot;ï¼Œ 53 to &quot;fifty-three&quot;)</span><br></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç ä¸­çš„å•è¯toä¸æ˜¯å†…ç½®çš„ç»“æ„ï¼Œè€Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°è°ƒç”¨ï¼Œè¢«ç§°ä¸ºä¸­ç¼€è°ƒç”¨ã€‚ </p><p>åœ¨ä¸­ç¼€è°ƒç”¨ä¸­ï¼Œæ²¡æœ‰æ·»åŠ é¢å¤–çš„åˆ†éš”ç¬¦ï¼Œå‡½æ•°åç§°æ˜¯ç›´æ¥æ”¾åœ¨ç›®æ ‡å¯¹è±¡åç§°å’Œ å‚æ•°ä¹‹é—´çš„ã€‚ä»¥ä¸‹ä¸¤ç§è°ƒç”¨æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.to(&quot;one&quot;)</span><br><span class="line">1 to &quot;one&quot;</span><br></pre></td></tr></table></figure><p>ä¸­ç¼€è°ƒç”¨å¯ä»¥ä¸åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œæ— è®ºæ˜¯æ™®é€šçš„å‡½æ•°è¿˜æ˜¯æ‰©å±•å‡½ æ•°ã€‚è¦å…è®¸ä½¿ç”¨ä¸­ç¼€ç¬¦å·è°ƒç”¨å‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨ infix ä¿®é¥°ç¬¦æ¥æ ‡è®°å®ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª ç®€å•çš„ to å‡½æ•°çš„å£°æ˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">infix fun Any.to(other: Any) = Pair(this, other)</span><br></pre></td></tr></table></figure><p>to å‡½æ•°æ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€å¯¹ä»»ä½•å…ƒç´ ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯æ³›å‹æ¥æ”¶è€…çš„ æ‰©å±•ï¼šå¯ä»¥ä½¿ç”¨ 1 to â€œoneâ€ ã€â€oneâ€ to 1ã€list to list.size()ç­‰å†™æ³•ã€‚ </p><h3 id="5-è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼šå±€éƒ¨å‡½æ•°å’Œæ‰©å±•"><a href="#5-è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼šå±€éƒ¨å‡½æ•°å’Œæ‰©å±•" class="headerlink" title="5.è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼šå±€éƒ¨å‡½æ•°å’Œæ‰©å±•"></a>5.è®©ä½ çš„ä»£ç æ›´æ•´æ´ï¼šå±€éƒ¨å‡½æ•°å’Œæ‰©å±•</h3><p>Kotlinå¯ä»¥åœ¨å‡½æ•°ä¸­åµŒå¥—ç±»ä¸­æå–çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œæ—¢å¯ä»¥è·å¾—æ‰€éœ€çš„ç»“æ„ï¼Œä¹Ÿæ— é¡»é¢å¤–çš„è¯­æ³•å¼€é”€ã€‚</p><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class User(val id: Int, val name: String, val address: String) </span><br><span class="line"></span><br><span class="line">fun saveUser(user : User)&#123;</span><br><span class="line">    if(user.name.isEmpty())&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    if(user.address.isEmpty())&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    //ä¿å­˜...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå°†éªŒè¯ä»£ç æ”¾åˆ°å±€éƒ¨å‡½æ•°ä¸­ï¼Œå¯ä»¥æ‘†è„±é‡å¤ï¼Œå¹¶ä¿æŒæ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œå¯ä»¥è¿™æ ·åš ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class User(val id: Int, val name: String, val address: String) </span><br><span class="line"></span><br><span class="line">fun saveUser(user : User)&#123;</span><br><span class="line">    fun validate(user: User, value: String, fieldName: String)&#123;</span><br><span class="line">        if(value.isEmpty())&#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    validate (user, user.name, &quot;Name&quot;)</span><br><span class="line">    validate (user, user.address, &quot;Address&quot;)</span><br><span class="line">    //ä¿å­˜...</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥å¥½å¤šäº†ï¼Œè€Œä¸”å±€éƒ¨å‡½æ•°å¯ä»¥è®¿é—®æ‰€åœ¨å‡½æ•°ä¸­çš„æ‰€æœ‰å‚æ•°å’Œå˜é‡ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå»æ‰å†—ä½™çš„Userå‚æ•°ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†</p><p>æˆ‘ä»¬å¯ä»¥ç»§ç»­æ”¹è¿›ï¼ŒæŠŠéªŒè¯é€»è¾‘æ”¾åˆ° User ç±»çš„æ‰©å±•å‡½æ•°ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class User(val id: Int, val name: String, val address: String) </span><br><span class="line"></span><br><span class="line">fun User.validateBeforeSave()&#123;</span><br><span class="line">    fun validate(value: String, fieldName: String)&#123;</span><br><span class="line">        if(value.isEmpty())&#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    validate (user.name, &quot;Name&quot;)</span><br><span class="line">    validate (user.address, &quot;Address&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun saveUser(user : User)&#123;</span><br><span class="line">    user.validateBeforeSave()</span><br><span class="line">    //ä¿å­˜...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å°ç»“ï¼š</strong></p><ul><li><p>Kotlinæ²¡æœ‰å®šä¹‰è‡ªå·±çš„é›†åˆç±»ï¼Œè€Œæ˜¯åœ¨Javaé›†åˆç±»çš„åŸºç¡€ä¸Šæä¾›äº†æ›´ä¸°å¯Œçš„APIã€‚</p></li><li><p>Kotlinå¯ä»¥ç»™å‡½æ•°å‚æ•°å®šä¹‰é»˜è®¤å€¼ï¼Œè¿™æ ·å¤§å¤§é™ä½äº†é‡è½½å‡½æ•°çš„å¿…è¦æ€§ï¼Œè€Œä¸”å‘½åå‚æ•°è®©å¤šå‚æ•°å‡½æ•°çš„è°ƒç”¨æ›´åŠ æ˜“è¯»ã€‚</p></li><li><p>Kotlinå…è®¸æ›´çµæ´»çš„ä»£ç ç»“æ„ï¼šå‡½æ•°å’Œå±æ€§éƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­å£°æ˜ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç±»ä¸­ä½œä¸ºæˆå‘˜ã€‚</p></li><li><p>Kotlinå¯ä»¥ç”¨æ‰©å±•å‡½æ•°å’Œå±æ€§æ¥æ‰©å±•ä»»ä½•ç±»çš„APIï¼ŒåŒ…æ‹¬åœ¨å¤–éƒ¨åº“ä¸­å®šä¹‰çš„ç±»ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å…¶æºä»£ç ï¼Œä¹Ÿæ²¡æœ‰è¿è¡Œæ—¶å¼€é”€ã€‚ </p></li><li><p>ä¸­ç¼€è°ƒç”¨æä¾›äº†å¤„ç†å•ä¸ªå‚æ•°çš„ï¼Œç±»ä¼¼è°ƒç”¨è¿ç®—ç¬¦æ–¹æ³•çš„ç®€æ˜è¯­æ³•ã€‚</p></li><li><p>Kotlinä¸ºæ™®é€šå­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼éƒ½æä¾›äº†å¤§é‡çš„æ–¹ä¾¿å­—ç¬¦ä¸²å¤„ç†çš„å‡½æ•°ã€‚ </p></li><li><p>ä¸‰é‡å¼•å·çš„å­—ç¬¦ä¸²æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹å¼ï¼Œè§£å†³äº†åŸæœ¬åœ¨Javaä¸­éœ€è¦è¿›è¡Œå¤§é‡å•°å—¦çš„è½¬ä¹‰å’Œå®‡ç¬¦ä¸²è¿æ¥çš„é—®é¢˜ã€‚</p></li><li><p>å±€éƒ¨å‡½æ•°å¸®åŠ©ä½ ä¿æŒä»£ç æ•´æ´çš„åŒæ—¶ï¼Œé¿å…é‡å¤ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-é¡¶å±‚å‡½æ•°å’Œå±æ€§&quot;&gt;&lt;a href=&quot;#1-é¡¶å±‚å‡½æ•°å’Œå±æ€§&quot; class=&quot;headerlink&quot; title=&quot;1.é¡¶å±‚å‡½æ•°å’Œå±æ€§&quot;&gt;&lt;/a&gt;1.é¡¶å±‚å‡½æ•°å’Œå±æ€§&lt;/h3&gt;&lt;p&gt;åœ¨Kotlinä¸­ï¼Œå¯ä»¥æŠŠé‚£äº›å·¥å…·ç±»é‡Œçš„å‡½æ•°ç›´æ¥æ”¾åˆ°ä»£ç æ–‡ä»¶çš„é¡¶å±‚ï¼Œä¸ç”¨ä»å±äºä»»ä½•çš„ç±»ã€‚è¿™äº›æ”¾åœ¨æ–‡ä»¶é¡¶å±‚çš„å‡½æ•°ä¾ç„¶æ˜¯åŒ…å†…çš„æˆå‘˜ï¼Œå¦‚æœä½ éœ€è¦ä»åŒ…å¤–è®¿é—®å®ƒï¼Œåˆ™éœ€è¦importï¼Œä½†ä¸å†éœ€è¦é¢å¤–åŒ…ä¸€å±‚&lt;/p&gt;
&lt;h3 id=&quot;2-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§&quot;&gt;&lt;a href=&quot;#2-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§&quot; class=&quot;headerlink&quot; title=&quot;2.ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§&quot;&gt;&lt;/a&gt;2.ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§&lt;/h3&gt;&lt;p&gt;æ‰©å±•å‡½æ•°éå¸¸ç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œä¸è¿‡å®šä¹‰åœ¨ç±»çš„å¤–é¢ã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package strings &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fun String.lastChar(): Char = this.get(this.length - 1) //thiså¯ä»¥çœç•¥&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>è®ºå›½åº†èŠ‚çš„å‡ ç§è¿‡æ³•</title>
    <link href="http://yoursite.com/2018/10/01/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/"/>
    <id>http://yoursite.com/2018/10/01/è®ºå›½åº†èŠ‚çš„å‡ ç§è¿‡æ³•/</id>
    <published>2018-10-01T07:49:16.000Z</published>
    <updated>2018-10-01T07:50:54.126Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> ä¸­ç§‹åˆšè¿‡æ‰ä¸€ä¸ªæ˜ŸæœŸï¼Œå›½åº†å°±æ¥äº†ã€‚è¿™ä¸ƒå¤©å°é•¿å‡å¯ä¸èƒ½å°±è¿™æ ·å¯¥å¯¥è‰è‰ï¼Œå¾—å¥½å¥½å‡†å¤‡å‡†å¤‡çœ‹çœ‹æ€ä¹ˆè¿‡æ‰è¡Œï¼</p></blockquote><p><strong>ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹å›½åº†èŠ‚çš„å‡ ç§è¿‡æ³•</strong></p><a id="more"></a> <h2 id="ä¸€ã€å¹²ç²®"><a href="#ä¸€ã€å¹²ç²®" class="headerlink" title="ä¸€ã€å¹²ç²®"></a>ä¸€ã€å¹²ç²®</h2><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/%E5%B9%B2%E7%B2%AE.jpg" alt="image"></p><p>å¹²ç²®æ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰äº†è¿™ä¸ªï¼Œä½ å°±ä¸å¿…æ‹…å¿ƒé¥¿æ­»äº†ï¼</p><h2 id="äºŒã€æ¸¸æˆ"><a href="#äºŒã€æ¸¸æˆ" class="headerlink" title="äºŒã€æ¸¸æˆ"></a>äºŒã€æ¸¸æˆ</h2><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/%E6%B8%B8%E6%88%8F.jpg" alt="image"></p><p>æ‰€è°“é¥±æš–æ€æ·«æ¬²ï¼Œå½“ä½ ä¸å¿…ä¸ºäº†é£Ÿç‰©è€ŒçŠ¯æ„ä¹‹åï¼Œä½ å°±å¯ä»¥æ€è€ƒè‡ªèº«çš„å¨±ä¹éœ€æ±‚äº†ã€‚æ— è®ºæ˜¯å¬å”¤å¸ˆå³¡è°·ï¼Œè¿˜æ˜¯è‰¾æ³½æ‹‰æ–¯å¤§é™†ï¼Œéƒ½æœ‰æ‰¿è½½ä½ æ¬¢ä¹çš„åœ°æ–¹ï¼Œå¦‚æœè¿™äº›åœ°æ–¹ä½ ä¸æ»¡æ„ï¼Œè¿˜å‰©ä¸‹ç´¢å°¼å¾®è½¯ä»»å¤©å ‚å¥½äº›æ¸¸æˆå¹³å°å‘¢ï¼</p><h2 id="ä¸‰ã€é˜…è¯»"><a href="#ä¸‰ã€é˜…è¯»" class="headerlink" title="ä¸‰ã€é˜…è¯»"></a>ä¸‰ã€é˜…è¯»</h2><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/%E9%98%85%E8%AF%BB.jpg" alt="image"></p><p>åŠ³é€¸ç»“åˆä¸€ç›´æ˜¯ä¸€ç§éå¸¸è‰¯å¥½çš„ç”Ÿæ´»æ–¹å¼ï¼Œæ¸¸æˆç©è¿‡å¤´äº†åè€Œä¼šè’åºŸä½ çš„å¤§è„‘ï¼Œè¿™æ—¶å€™åº”è¯¥é™ä¸‹å¿ƒæ¥çœ‹çœ‹ä¹¦ï¼Œæ–‡å­¦ç±»ã€ç§‘å­¦ç±»ã€æ•™æç±»ï¼Œå„å¼å„æ ·ï¼Œåº”æœ‰å°½æœ‰ã€‚</p><h2 id="å››ã€è¿åŠ¨"><a href="#å››ã€è¿åŠ¨" class="headerlink" title="å››ã€è¿åŠ¨"></a>å››ã€è¿åŠ¨</h2><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/%E8%BF%90%E5%8A%A8.jpg" alt="image"></p><p>ä¸€ä¸ªäººèº«ä½“è¦æ˜¯ä¸å¥½ï¼Œé‚£å¤šå°‘äº‹æƒ…éƒ½å¹²ä¸äº†ï¼Œå­¦ä¹ ã€å¨±ä¹ä¹‹ä½™ï¼Œå¯åˆ«å¿˜äº†è¿åŠ¨ï¼Œæ¯•ç«Ÿ90åçš„å¹´è½»äººæ²¡å‡ ä¸ªå¸Œæœ›ä¸­å¹´å‘ç¦å§ï¼</p><h2 id="äº”ã€å‡ºè¡Œ"><a href="#äº”ã€å‡ºè¡Œ" class="headerlink" title="äº”ã€å‡ºè¡Œ"></a>äº”ã€å‡ºè¡Œ</h2><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/%E9%AA%91%E8%A1%8C.jpg" alt="image"></p><p>åœ¨å®¶å¾…ä¹…äº†ä¼šç”Ÿéœ‰çš„ï¼Œæ‰€ä»¥å‡ºå»è½¬è½¬è¿˜èƒ½è®©è‡ªå·±ä¿æŒæ–°é²œï¼</p><p>è€Œä¸”èŠ‚æ—¥å‡ºè¡Œä¹Ÿæ˜¯è›®åˆç†çš„ä¸€ä»¶äº‹ï¼Œå¦‚æœä½ çœŸæœ‰ä¸€é¢—ä¸å®‰åˆ†çš„å¿ƒï¼Œå¤–é¢çš„äººå±±äººæµ·åˆæ€èƒ½æ‹¦å¾—ä½ä½ ï¼Ÿ</p><hr><p><strong>é‚£ä¹ˆï¼Œå›½åº†èŠ‚çš„è¿‡æ³•å°±è°ˆåˆ°è¿™é‡Œï¼æˆ‘è¦å¼€å§‹äº«å—å›½åº†äº†ï¼</strong></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/001.jpeg" alt="image"></p><hr><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/%E8%AE%BA%E5%9B%BD%E5%BA%86%E8%8A%82%E7%9A%84%E5%A5%BD%E5%87%A0%E7%A7%8D%E8%BF%87%E6%B3%95/002.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; ä¸­ç§‹åˆšè¿‡æ‰ä¸€ä¸ªæ˜ŸæœŸï¼Œå›½åº†å°±æ¥äº†ã€‚è¿™ä¸ƒå¤©å°é•¿å‡å¯ä¸èƒ½å°±è¿™æ ·å¯¥å¯¥è‰è‰ï¼Œå¾—å¥½å¥½å‡†å¤‡å‡†å¤‡çœ‹çœ‹æ€ä¹ˆè¿‡æ‰è¡Œï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹å›½åº†èŠ‚çš„å‡ ç§è¿‡æ³•&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kotlinç¬”è®°(ä¸€):åŸºç¡€ç¯‡</title>
    <link href="http://yoursite.com/2018/09/30/Kotlin%E7%AC%94%E8%AE%B0-%E4%B8%80-%E5%9F%BA%E7%A1%80%E7%AF%87/"/>
    <id>http://yoursite.com/2018/09/30/Kotlinç¬”è®°-ä¸€-åŸºç¡€ç¯‡/</id>
    <published>2018-09-30T07:45:18.000Z</published>
    <updated>2018-09-30T07:46:31.866Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> åœ¨2017å¹´çš„Googleå¼€å‘è€…å¤§ä¼šä¸Šï¼ŒKotlinæ­£å¼ä½œä¸ºAndroidçš„å®˜æ–¹å¼€å‘è¯­è¨€é—ªäº®ç™»åœºã€‚è€Œç°åœ¨å·²ç»åˆ°äº†2018å¹´çš„ä¸‹åŠå¹´æœ«ï¼Œèº«ä¸ºä¸€åAndroidå¼€å‘è€…ï¼Œå¦‚æœä¸ä¼šä¸€ç‚¹Kotlinï¼Œæ€»æ„Ÿè§‰å°‘äº†ä»€ä¹ˆã€‚  </p><p>äºæ˜¯ä¹ï¼Œæˆ‘å‡†å¤‡åŠ¨æ‰‹å­¦ä¸€å­¦è¿™é—¨â€œå¹´è½»â€çš„æ–°è¯­è¨€äº†ã€‚ä¸è¿‡æ–°å­¦ä¸€äº›ä¸œè¥¿å¾€å¾€ä¼šå› ä¸ºçŸ¥è¯†çš„æ¶ˆåŒ–éœ€è¦æ—¶é—´è€Œå¯¼è‡´çŸ¥è¯†æ¥æ”¶çš„æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´çš„ä¼˜åŠ¿æ‰å¾—ä»¥ä½“ç°å˜›ï¼  </p><p>æ‰€ä»¥ï¼Œåˆå­¦é˜¶æ®µï¼Œæˆ‘è¿˜æ˜¯å‡†å¤‡è®°ä¸€è®°ç¬”è®°ï¼Œè¿™æ ·ä¹Ÿè®¸ä¼šå¯¹æˆ‘å­¦è¿™é—¨è¯­è¨€æœ‰æ‰€å¸®åŠ©å§ï¼Ÿ!</p></blockquote><p>å…³äºKotlinçš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ°å€å¦‚ä¸‹ï¼š</p><p><a href="https://www.kotlincn.net/docs/reference/" target="_blank" rel="noopener">Kotlinå­¦ä¹ </a><br><a id="more"></a> </p><h3 id="1-åœ¨-Kotlin-ä¸­ï¼Œifæ˜¯è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¯­å¥ã€‚"><a href="#1-åœ¨-Kotlin-ä¸­ï¼Œifæ˜¯è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¯­å¥ã€‚" class="headerlink" title="1.åœ¨ Kotlin ä¸­ï¼Œifæ˜¯è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¯­å¥ã€‚"></a>1.åœ¨ Kotlin ä¸­ï¼Œifæ˜¯è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯è¯­å¥ã€‚</h3><p> è¯­å¥å’Œè¡¨è¾¾å¼çš„åŒºåˆ«åœ¨äºï¼Œè¡¨è¾¾å¼æœ‰å€¼ï¼Œå¹¶ä¸”èƒ½ä½œä¸ºå¦ä¸€ä¸ªè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ï¼›è€Œè¯­å¥æ€»æ˜¯åŒ…å›´ç€å®ƒçš„ä»£ç å—ä¸­çš„é¡¶å±‚å…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„å€¼ã€‚</p><ul><li>åœ¨Javaä¸­ï¼Œæ‰€æœ‰çš„æ§åˆ¶ç»“æ„éƒ½æ˜¯è¯­å¥ã€‚è€Œåœ¨Kotlinä¸­ï¼Œé™¤äº†å¾ªç¯ï¼ˆ for, do å’Œ do/while ï¼‰ä»¥å¤–å¤§å¤šæ•°æ§åˆ¶ç»“æ„éƒ½æ˜¯ è¡¨è¾¾å¼ã€‚<br>è¿™ç§ç»“åˆæ§åˆ¶ç»“æ„å’Œå…¶ä»–è¡¨è¾¾å¼çš„èƒ½åŠ›è®©ä½ å¯ä»¥ç®€æ˜æ‰¼è¦åœ°è¡¨ç¤ºè®¸å¤š å¸¸è§çš„æ¨¡å¼ï¼Œç¨åä½ ä¼šåœ¨æœ¬ä¹¦ä¸­çœ‹åˆ°è¿™äº›å†…å®¹ã€‚</li><li>å¦ä¸€æ–¹é¢ï¼ŒJavaä¸­çš„èµ‹å€¼æ“ä½œæ˜¯è¡¨è¾¾å¼ï¼Œåœ¨Kotlinä¸­åè€Œå˜æˆäº†è¯­å¥ã€‚è¿™æœ‰åŠ©äºé¿å…æ¯”è¾ƒå’Œèµ‹å€¼ä¹‹é—´çš„æ··æ·†ï¼Œè€Œè¿™ç§æ··æ·†æ˜¯å¸¸è§çš„é”™è¯¯æ¥æºã€‚</li></ul><h3 id="2-å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ª-ï¼š"><a href="#2-å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ª-ï¼š" class="headerlink" title="2.å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ª ï¼š"></a>2.å£°æ˜å˜é‡çš„å…³é”®å­—æœ‰ä¸¤ä¸ª ï¼š</h3><ul><li>val ï¼ˆæ¥è‡ª valueï¼‰ ä¸€ä¸€ä¸å¯å˜å¼•ç”¨ã€‚ä½¿ç”¨ val å£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹ åå†æ¬¡èµ‹å€¼ã€‚å®ƒå¯¹åº”çš„æ˜¯ Java çš„ final å˜é‡ã€‚  </li><li>var ï¼ˆæ¥è‡ª variableï¼‰ ä¸€ä¸€å¯å˜å¼•ç”¨ã€‚è¿™ç§å˜é‡çš„å€¼å¯ä»¥è¢«æ”¹å˜ã€‚è¿™ç§å£°æ˜å¯¹ åº”çš„æ˜¯æ™®é€šï¼ˆé finalï¼‰çš„ Java å˜é‡ã€‚</li></ul><h3 id="3-å±€éƒ¨å˜é‡çš„å¼•ç”¨"><a href="#3-å±€éƒ¨å˜é‡çš„å¼•ç”¨" class="headerlink" title="3.å±€éƒ¨å˜é‡çš„å¼•ç”¨"></a>3.å±€éƒ¨å˜é‡çš„å¼•ç”¨</h3><p>å’Œè®¸å¤šè„šæœ¬è¯­è¨€ä¸€æ ·ï¼Œ Kotlin è®©ä½ å¯ ä»¥åœ¨å­—ç¬¦ä¸²å­—é¢å€¼ä¸­å¼•ç”¨å±€éƒ¨å˜é‡ï¼Œåªéœ€è¦åœ¨å˜é‡åç§°å‰é¢åŠ ä¸Šå­—ç¬¦$ã€‚</p><p>è¿™ç­‰ä»·äº Java ä¸­çš„å­—ç¬¦ä¸²è¿æ¥ï¼ˆ â€œHello,â€+ name ï¼‹â€ï¼â€ï¼‰ï¼Œæ•ˆç‡ä¸€æ ·ä½†æ˜¯æ›´ç´§å‡‘ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val name = if(args.size &gt; 0) args[0] else &quot;Kotlin&quot;</span><br><span class="line">    println(&quot;Hello, $name !&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥å¼•ç”¨æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä»…é™äºç®€å•çš„å˜é‡åç§°ï¼Œåªéœ€è¦æŠŠè¡¨è¾¾å¼ ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥.</p><h3 id="4-åœ¨Javaä¸­å¯ä»¥ç”¨switchè¯­å¥å®Œæˆçš„ï¼Œè€ŒKotlin-å¯¹åº”çš„ç»“æ„æ˜¯when"><a href="#4-åœ¨Javaä¸­å¯ä»¥ç”¨switchè¯­å¥å®Œæˆçš„ï¼Œè€ŒKotlin-å¯¹åº”çš„ç»“æ„æ˜¯when" class="headerlink" title="4.åœ¨Javaä¸­å¯ä»¥ç”¨switchè¯­å¥å®Œæˆçš„ï¼Œè€ŒKotlin å¯¹åº”çš„ç»“æ„æ˜¯when"></a>4.åœ¨Javaä¸­å¯ä»¥ç”¨switchè¯­å¥å®Œæˆçš„ï¼Œè€ŒKotlin å¯¹åº”çš„ç»“æ„æ˜¯when</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fun getMnemonic(color: Color) = </span><br><span class="line">when (color) &#123; </span><br><span class="line">Color . RED -&gt;â€Richard&quot; </span><br><span class="line">Color.ORANGE -&gt;â€Ofâ€ </span><br><span class="line">Color.YELLOW -&gt;â€York&quot; </span><br><span class="line">Color .GREEN -&gt;â€Gaveâ€ </span><br><span class="line">Color.BLUE -&gt;â€Battle&quot; </span><br><span class="line">Color ï¼å·¥NDIGO -&gt;â€Inâ€ </span><br><span class="line">Color.VIOLET -&gt;â€Vain </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  åœ¨ä¸€ä¸ª when åˆ†æ”¯ä¸Šåˆå¹¶å¤šä¸ªé€‰é¡¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun getWarmth(color: Color) = when(color) &#123;</span><br><span class="line">Color.RED, Color.ORANGE, Color.YELLOW - &gt; â€warmâ€</span><br><span class="line">Color.GREEN -&gt; â€neutralâ€</span><br><span class="line">Color.BLUE, Color.INDIGO, Color.VIOLET -&gt;â€coldâ€</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥æšä¸¾å¸¸é‡åä¸ç”¨é™å®šè¯å°±å¯ä»¥è®¿é—®ã€‚æ¯”å¦‚å»æ‰èŠ±æ‹¬å·é‡Œçš„Colorä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><blockquote><p>Kotlinä¸­çš„whenç»“æ„æ¯”Javaä¸­çš„switchå¼ºå¤§å¾—å¤šã€‚switchè¦æ±‚å¿…é¡»ä½¿ç”¨å¸¸é‡ï¼ˆæšä¸¾å¸¸é‡ã€å­—ç¬¦ä¸²æˆ–è€…æ•°å­—å­—é¢å€¼ï¼‰ä½œä¸ºåˆ†æ”¯æ¡ä»¶ï¼Œå’Œå®ƒä¸ä¸€æ ·ï¼Œ whenå…è®¸ä½¿ç”¨ä»»ä½•å¯¹è±¡ã€‚</p></blockquote><h3 id="5-ç±»å‹åˆ¤æ–­"><a href="#5-ç±»å‹åˆ¤æ–­" class="headerlink" title="5.ç±»å‹åˆ¤æ–­"></a>5.ç±»å‹åˆ¤æ–­</h3><p>åœ¨Kotlinä¸­ï¼Œä½ è¦ä½¿ç”¨isæ£€æŸ¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸç§ç±»å‹ã€‚isæ£€æŸ¥å’ŒJavaä¸­çš„instanceOfç›¸ä¼¼ï¼Œä¸è¿‡åœ¨instanceOfæ£€æŸ¥ä¹‹åè¿˜éœ€è¦æ˜¾å¼åœ°åŠ ä¸Šç±»å‹è½¬æ¢ã€‚</p><p>åœ¨Kotlinä¸­ï¼Œç¼–è¯‘å™¨å¸®ä½ å®Œæˆäº†è¿™äº›å·¥ä½œã€‚å¦‚æœä½ æ£€æŸ¥è¿‡ä¸€ä¸ªå˜é‡æ˜¯æŸç§ç±»å‹ï¼Œåé¢å°±ä¸å†éœ€è¦è½¬æ¢å®ƒï¼Œå¯ä»¥å°±æŠŠå®ƒå½“ä½œä½ æ£€æŸ¥è¿‡çš„ç±»å‹ä½¿ç”¨ã€‚</p><p>ä½¿ç”¨aså…³é”®å­—æ¥è¡¨ç¤ºåˆ°ç‰¹å®šç±»å‹çš„æ˜¾å¼è½¬æ¢ï¼›</p><h3 id="6-å¾ªç¯ä¸­çš„â€inâ€å…³é”®å­—"><a href="#6-å¾ªç¯ä¸­çš„â€inâ€å…³é”®å­—" class="headerlink" title="6.å¾ªç¯ä¸­çš„â€inâ€å…³é”®å­—"></a>6.å¾ªç¯ä¸­çš„â€inâ€å…³é”®å­—</h3><p>Kotliné‡Œé¢å…³é”®å­—â€œinâ€æœ‰è®¸å¤šä½œç”¨ï¼Œæ¯”å¦‚æ£€æŸ¥åŒºé—´çš„æˆå‘˜ï¼›ä½œä¸ºwhençš„åˆ†æ”¯ï¼›åœ¨forå¾ªç¯ä¸­ä½¿ç”¨ç­‰ã€‚å…³äºinå¦‚ä½•åœ¨listä¸­ä½¿ç”¨ï¼Œä¸‹ç« å†ä»‹ç»</p><h3 id="7-å…³äºâ€tryâ€"><a href="#7-å…³äºâ€tryâ€" class="headerlink" title="7.å…³äºâ€tryâ€"></a>7.å…³äºâ€tryâ€</h3><p>Kotlinä¸­çš„tryå…³é”®å­—å°±åƒifå’Œwhenä¸€æ ·,å¼•å…¥äº†ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥æŠŠå®ƒçš„å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚ä¸åŒäºifï¼Œä½ æ€»æ˜¯éœ€è¦ç”¨èŠ±æ‹¬å·æŠŠè¯­å¥ä¸»ä½“æ‹¬èµ·æ¥ã€‚å’Œå…¶ä»–è¯­å¥ä¸€æ ·ï¼Œå¦‚æœå…¶ä¸»ä½“åŒ…å«å¤šä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆæ•´ä¸ª try è¡¨è¾¾å¼çš„å€¼å°±æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; åœ¨2017å¹´çš„Googleå¼€å‘è€…å¤§ä¼šä¸Šï¼ŒKotlinæ­£å¼ä½œä¸ºAndroidçš„å®˜æ–¹å¼€å‘è¯­è¨€é—ªäº®ç™»åœºã€‚è€Œç°åœ¨å·²ç»åˆ°äº†2018å¹´çš„ä¸‹åŠå¹´æœ«ï¼Œèº«ä¸ºä¸€åAndroidå¼€å‘è€…ï¼Œå¦‚æœä¸ä¼šä¸€ç‚¹Kotlinï¼Œæ€»æ„Ÿè§‰å°‘äº†ä»€ä¹ˆã€‚  &lt;/p&gt;
&lt;p&gt;äºæ˜¯ä¹ï¼Œæˆ‘å‡†å¤‡åŠ¨æ‰‹å­¦ä¸€å­¦è¿™é—¨â€œå¹´è½»â€çš„æ–°è¯­è¨€äº†ã€‚ä¸è¿‡æ–°å­¦ä¸€äº›ä¸œè¥¿å¾€å¾€ä¼šå› ä¸ºçŸ¥è¯†çš„æ¶ˆåŒ–éœ€è¦æ—¶é—´è€Œå¯¼è‡´çŸ¥è¯†æ¥æ”¶çš„æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´çš„ä¼˜åŠ¿æ‰å¾—ä»¥ä½“ç°å˜›ï¼  &lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œåˆå­¦é˜¶æ®µï¼Œæˆ‘è¿˜æ˜¯å‡†å¤‡è®°ä¸€è®°ç¬”è®°ï¼Œè¿™æ ·ä¹Ÿè®¸ä¼šå¯¹æˆ‘å­¦è¿™é—¨è¯­è¨€æœ‰æ‰€å¸®åŠ©å§ï¼Ÿ!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…³äºKotlinçš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ°å€å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.kotlincn.net/docs/reference/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Kotlinå­¦ä¹ &lt;/a&gt;&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Buglyçƒ­ä¿®å¤ä½¿ç”¨åŠå¤šæ¸ é“æ‰“åŒ…</title>
    <link href="http://yoursite.com/2018/09/26/Bugly%E7%83%AD%E4%BF%AE%E5%A4%8D%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85/"/>
    <id>http://yoursite.com/2018/09/26/Buglyçƒ­ä¿®å¤ä½¿ç”¨åŠå¤šæ¸ é“æ‰“åŒ…/</id>
    <published>2018-09-26T11:54:41.000Z</published>
    <updated>2018-10-04T15:57:53.270Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¤´"><a href="#å¤´" class="headerlink" title="å¤´"></a>å¤´</h2><p>ä¸çŸ¥é“ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ä¸ªæƒ…å†µï¼Œé¡¹ç›®ä¸Šçº¿åæˆ–è€…å¼€å§‹ç»™åˆ«äººä½¿ç”¨çš„æ—¶å€™ï¼Œå†·ä¸ä¸çš„å†’å‡ºä¸ªBugï¼Œè¿™æ—¶å€™é¦–å…ˆè¦å¹²å˜›ï¼Ÿ</p><p><strong>å…ˆçœ‹å´©æºƒæ—¥å¿—å•Š</strong></p><p>çœ‹å®Œå´©æºƒæ—¥å¿—ä½ çŸ¥é“äº†é€ æˆå´©æºƒçš„åŸå› ï¼Œç„¶åå¹²å˜›ï¼Ÿ</p><p><strong>å¼€å§‹ç”©é”…å•Š</strong></p><p>å½“æŸ¥æ˜äº†æ˜¯è°é€ æˆçš„è¿™ä¸ªå´©æºƒåï¼Œä½ å‘ç°ä¸æ˜¯ä½ çš„é—®é¢˜ï¼Œäºæ˜¯ä½ å¿ƒä¸­ä¸€ä¹ï¼Œé•¿èˆ’ä¸€å£æ°”<a id="more"></a> ï¼Œä»°å¤©å¤§ç¬‘ï¼šç æµ·æ²‰æµ®åˆå‡ è½½ï¼Œæˆ‘è¾ˆå²‚æ˜¯è“¬è’¿äººï¼›ç¬‘å®Œä¾¿å‡†å¤‡èººåºŠä¸Šç¡è§‰å»â€”â€”ç§‹è±†éº»è¢‹ï¼Œæ˜¯ä¸æ˜¯å¿˜äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><p>æ˜¯çš„ï¼Œå³ä½¿ä½ å‘ç°äº†é—®é¢˜ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†é—®é¢˜çš„æ¥æºï¼Œè¿™æ—¶å€™è¿˜å·®ä¸€æ­¥ï¼šè§£å†³é—®é¢˜çš„åŠæ³•ï¼å¦‚ä½•è§£å†³ï¼Ÿ</p><p><strong>å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Ÿ</strong></p><p>è¿™æ ·ä¸è§‰å¾—å¾ˆéº»çƒ¦å—ï¼Ÿç‰¹åˆ«æ˜¯å¦‚æœä¸€ä¸ªé¡¹ç›®å¤„äºåˆæœŸé˜¶æ®µï¼ŒBugæ˜¯æƒ³ç”©éƒ½ç”©ä¸æ‰çš„ï¼Œå¦‚æœæ¯å‘ç°ä¸€æ¬¡å´©æºƒï¼Œéƒ½éœ€è¦é å‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬å»è§£å†³çš„è¯ï¼Œé‚£æœªå…å°±å¤ªéº»çƒ¦äº†ã€‚ä¸å…‰æ˜¯å¼€å‘è€…éº»çƒ¦ï¼Œä½¿ç”¨è€…ä¹Ÿä¼šå› ä¸ºé¢‘ç¹çš„å‡çº§è€Œä¸è€çƒ¦ï¼ˆjust like meï¼‰ï¼Œé‚£é—®é¢˜åˆå›æ¥äº†ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</p><p><strong>çƒ­ä¿®å¤å•Š</strong></p><p>é€šè¿‡çº¿ä¸Šä¿®å¤Bugï¼Œè®©ç”¨æˆ·åœ¨ç¥ä¸çŸ¥é¬¼ä¸è§‰çš„æƒ…å†µä¸‹å°±è¿›è¡Œäº†ä¸€æ¬¡åº”ç”¨æ›´æ–°ï¼Œéº»éº»å†ä¹Ÿä¸ç”¨æ‹…å¿ƒAppå´©æºƒå•¦ï¼ï¼ˆä¸å­˜åœ¨çš„ï¼‰</p><p>çƒ­ä¿®å¤è¿˜æœ‰ä¸ªéšè—çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯åœ¨æµ‹è¯•äººå‘˜ä¸å¤Ÿï¼ˆå¼€å‘å…¼æµ‹è¯•ï¼‰ï¼Œæµ‹è¯•æœºå‹ä¸å¤Ÿçš„æƒ…å†µä¸‹å¯ä»¥æ˜¾è‘—æ”¹å–„Appçš„å´©æºƒç‡ã€‚å¥½å§ï¼Œå‡†å¤‡å¼€å§‹ä½¿ç”¨å§ã€‚</p><h2 id="èº«"><a href="#èº«" class="headerlink" title="èº«"></a>èº«</h2><h3 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨Bugly"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨Bugly" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨Bugly"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨Bugly</h3><p>å¸‚é¢ä¸Šå…³äºçƒ­ä¿®å¤å’Œå´©æºƒæ—¥å¿—ç›‘æµ‹çš„ç›¸å…³æŠ€æœ¯å’ŒSDKç§ç±»å„ä¸ç›¸åŒï¼Œä¸ºä»€ä¹ˆååè¦ç”¨Buglyå‘¢ï¼Ÿ</p><ul><li>å¯ä»¥è·å–åˆ°Appå´©æºƒæ—¥å¿—</li><li>å¯ä»¥é›†æˆThinkçƒ­ä¿®å¤</li><li>ç•Œé¢å¥½çœ‹ï¼Œæ–¹ä¾¿ç®¡ç†ç‰ˆæœ¬</li><li>å…è´¹</li><li>ï¼ˆå‡‘å·§å°±ç”¨äº†è¿™ä¸€æ¬¾ï¼Œå…¶ä»–çš„éƒ½æ²¡æœ‰ç”¨è¿‡ï¼‰</li></ul><p>åŸºäºä»¥ä¸ŠåŸå› ï¼Œæœ€åå°±ä½¿ç”¨äº†Buglyå»è§£å†³ä¸Šé¢æåˆ°è¿‡çš„é—®é¢˜ï¼›</p><h3 id="äºŒã€Buglyçƒ­æ›´æ–°æ¥å…¥æµç¨‹"><a href="#äºŒã€Buglyçƒ­æ›´æ–°æ¥å…¥æµç¨‹" class="headerlink" title="äºŒã€Buglyçƒ­æ›´æ–°æ¥å…¥æµç¨‹"></a>äºŒã€Buglyçƒ­æ›´æ–°æ¥å…¥æµç¨‹</h3><p>å…¶å®å…³äºBuglyçƒ­æ›´æ–°çš„æ¥å…¥æµç¨‹ï¼Œå®˜æ–¹çš„æ–‡æ¡£ä»‹ç»çš„éå¸¸è¯¦ç»†ï¼Œå¯¹æ–°æ‰‹æ¯”è¾ƒå‹å¥½ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¹Ÿæ˜¯ç›´æ¥å‚ç…§çš„æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£çš„åœ°å€ï¼š</p><p><a href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/?v=20180709165613" target="_blank" rel="noopener">ã€Bugly Androidçƒ­æ›´æ–°ä½¿ç”¨æŒ‡å—ã€‘</a></p><p>è™½ç„¶å®˜æ–¹æœ‰ä¾‹å­ï¼Œè¿™é‡Œè¿˜æ˜¯å†™äº†ä¸€ä¸ªç®€åŒ–ç‰ˆï¼Œä¹Ÿæ–¹ä¾¿ä»¥åå“ªå¤©è‡ªå·±å¿˜è®°äº†ä¾æ—§èƒ½å¿«é€Ÿä½¿ç”¨ï¼š</p><h4 id="ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–æ’ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–æ’ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–æ’ä»¶"></a>ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–æ’ä»¶</h4><p>åœ¨ä½ çš„é¡¹ç›®æ›´ç›®å½•ä¸‹çš„â€œbuild.gradleâ€ä¸­æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        // tinkersupportæ’ä»¶, å…¶ä¸­lastest.releaseæŒ‡æ‹‰å–æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚1.0.4</span><br><span class="line">        classpath &quot;com.tencent.bugly:tinker-support:1.1.2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å°±æ˜¯1.1.2</p><h4 id="ç¬¬äºŒæ­¥ï¼šé…ç½®ä¾èµ–æ’ä»¶"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®ä¾èµ–æ’ä»¶" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½®ä¾èµ–æ’ä»¶"></a>ç¬¬äºŒæ­¥ï¼šé…ç½®ä¾èµ–æ’ä»¶</h4><h5 id="gradleé…ç½®"><a href="#gradleé…ç½®" class="headerlink" title="gradleé…ç½®"></a>gradleé…ç½®</h5><p>åœ¨app moduleçš„â€œbuild.gradleâ€æ–‡ä»¶ä¸­æ·»åŠ ï¼ˆç¤ºä¾‹é…ç½®ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">// ä¾èµ–æ’ä»¶è„šæœ¬</span><br><span class="line">apply from: &apos;tinker-support.gradle&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">        defaultConfig &#123;</span><br><span class="line">          ndk &#123;</span><br><span class="line">            //è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„</span><br><span class="line">            abiFilters &apos;armeabi&apos; //, &apos;x86&apos;, &apos;armeabi-v7a&apos;, &apos;x86_64&apos;, &apos;arm64-v8a&apos;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      dependencies &#123;</span><br><span class="line">         implementation &apos;com.android.support:multidex:1.0.1&apos;</span><br><span class="line">        // å¤šdexé…ç½®</span><br><span class="line">        //æ³¨é‡Šæ‰åŸæœ‰buglyçš„ä»“åº“</span><br><span class="line">        //compile &apos;com.tencent.bugly:crashreport:latest.release&apos;//å…¶ä¸­latest.releaseæŒ‡ä»£æœ€æ–°ç‰ˆæœ¬å·ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚1.3.4</span><br><span class="line">        implementation &apos;com.tencent.bugly:crashreport_upgrade:1.3.5&apos;</span><br><span class="line">        // æŒ‡å®štinkerä¾èµ–ç‰ˆæœ¬ï¼ˆæ³¨ï¼šåº”ç”¨å‡çº§1.3.5ç‰ˆæœ¬èµ·ï¼Œä¸å†å†…ç½®tinkerï¼‰</span><br><span class="line">        implementation &apos;com.tencent.tinker:tinker-android-lib:1.9.6&apos;</span><br><span class="line">        implementation &apos;com.tencent.bugly:nativecrashreport:latest.release&apos;</span><br><span class="line">        //å…¶ä¸­latest.releaseæŒ‡ä»£æœ€æ–°ç‰ˆæœ¬å·ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ˜ç¡®çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚2.2.0</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç‰ˆæœ¬çš„SDKé‡Œé¢ï¼Œå·²ç»é›†æˆäº†å´©æºƒæ—¥å¿—ä¸Šä¼ çš„åŠŸèƒ½å“¦ï¼</p><h5 id="tinker-support-gradleçš„é…ç½®"><a href="#tinker-support-gradleçš„é…ç½®" class="headerlink" title="tinker-support.gradleçš„é…ç½®"></a>tinker-support.gradleçš„é…ç½®</h5><p>æ¥ä¸‹æ¥ï¼Œä½ è¦åœ¨app moduleç›®å½•ä¸‹åˆ›å»ºå¦å¤–ä¸€ä¸ªgradleæ–‡ä»¶ï¼Œå‘½åä¸ºâ€œtinker-support.gradleâ€ï¼Œç„¶åå¯¹å®ƒè¿›è¡Œé…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;com.tencent.bugly.tinker-support&apos;</span><br><span class="line"></span><br><span class="line">def bakPath = file(&quot;$&#123;buildDir&#125;/bakApk/&quot;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * æ­¤å¤„å¡«å†™æ¯æ¬¡æ„å»ºç”Ÿæˆçš„åŸºå‡†åŒ…ç›®å½•</span><br><span class="line"> */</span><br><span class="line">def baseApkDir = &quot;app-0921-14-52-06&quot;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * å¯¹äºæ’ä»¶å„å‚æ•°çš„è¯¦ç»†è§£æè¯·å‚è€ƒ</span><br><span class="line"> */</span><br><span class="line">tinkerSupport &#123;</span><br><span class="line"></span><br><span class="line">    // å¼€å¯tinker-supportæ’ä»¶ï¼Œé»˜è®¤å€¼true</span><br><span class="line">    enable = true</span><br><span class="line"></span><br><span class="line">    // æŒ‡å®šå½’æ¡£ç›®å½•ï¼Œé»˜è®¤å€¼å½“å‰moduleçš„å­ç›®å½•tinker</span><br><span class="line">    autoBackupApkDir = &quot;$&#123;bakPath&#125;&quot;</span><br><span class="line"></span><br><span class="line">    // æ˜¯å¦å¯ç”¨è¦†ç›–tinkerPatché…ç½®åŠŸèƒ½ï¼Œé»˜è®¤å€¼false</span><br><span class="line">    // å¼€å¯åtinkerPatché…ç½®ä¸ç”Ÿæ•ˆï¼Œå³æ— éœ€æ·»åŠ tinkerPatch</span><br><span class="line">    overrideTinkerPatchConfiguration = true</span><br><span class="line"></span><br><span class="line">    // ç¼–è¯‘è¡¥ä¸åŒ…æ—¶ï¼Œå¿…éœ€æŒ‡å®šåŸºçº¿ç‰ˆæœ¬çš„apkï¼Œé»˜è®¤å€¼ä¸ºç©º</span><br><span class="line">    // å¦‚æœä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºä¸æ˜¯è¿›è¡Œè¡¥ä¸åŒ…çš„ç¼–è¯‘</span><br><span class="line">    // @&#123;link tinkerPatch.oldApk &#125;</span><br><span class="line">    baseApk = &quot;$&#123;bakPath&#125;/$&#123;baseApkDir&#125;/app-release.apk&quot;</span><br><span class="line"></span><br><span class="line">    // å¯¹åº”tinkeræ’ä»¶applyMapping</span><br><span class="line">    baseApkProguardMapping = &quot;$&#123;bakPath&#125;/$&#123;baseApkDir&#125;/app-release-mapping.txt&quot;</span><br><span class="line"></span><br><span class="line">    // å¯¹åº”tinkeræ’ä»¶applyResourceMapping</span><br><span class="line">    baseApkResourceMapping = &quot;$&#123;bakPath&#125;/$&#123;baseApkDir&#125;/app-release-R.txt&quot;</span><br><span class="line"></span><br><span class="line">    // æ„å»ºåŸºå‡†åŒ…å’Œè¡¥ä¸åŒ…éƒ½è¦æŒ‡å®šä¸åŒçš„tinkerIdï¼Œå¹¶ä¸”å¿…é¡»ä¿è¯å”¯ä¸€æ€§</span><br><span class="line">    tinkerId = &quot;1.0.1-patch&quot;                //tinkerId = &quot;1.0.1-patch&quot;            tinkerId = &quot;1.0.1-base&quot;</span><br><span class="line"></span><br><span class="line">    // æ„å»ºå¤šæ¸ é“è¡¥ä¸æ—¶ä½¿ç”¨</span><br><span class="line">    // buildAllFlavorsDir = &quot;$&#123;bakPath&#125;/$&#123;baseApkDir&#125;&quot;</span><br><span class="line"></span><br><span class="line">    // æ˜¯å¦å¯ç”¨åŠ å›ºæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalse.(tinker-spport 1.0.7èµ·æ”¯æŒï¼‰</span><br><span class="line">    // isProtectedApp = true</span><br><span class="line"></span><br><span class="line">    // æ˜¯å¦å¼€å¯åå°„Applicationæ¨¡å¼</span><br><span class="line">    enableProxyApplication = false</span><br><span class="line"></span><br><span class="line">    // æ˜¯å¦æ”¯æŒæ–°å¢éexportçš„Activityï¼ˆæ³¨æ„ï¼šè®¾ç½®ä¸ºtrueæ‰èƒ½ä¿®æ”¹AndroidManifestæ–‡ä»¶ï¼‰</span><br><span class="line">    supportHotplugComponent = true</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ä¸€èˆ¬æ¥è¯´,æˆ‘ä»¬æ— éœ€å¯¹ä¸‹é¢çš„å‚æ•°åšä»»ä½•çš„ä¿®æ”¹</span><br><span class="line"> * å¯¹äºå„å‚æ•°çš„è¯¦ç»†ä»‹ç»è¯·å‚è€ƒ:</span><br><span class="line"> * https://github.com/Tencent/tinker/wiki/Tinker-%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97</span><br><span class="line"> */</span><br><span class="line">tinkerPatch &#123;</span><br><span class="line">    //oldApk =&quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release.apk&quot;</span><br><span class="line">    ignoreWarning = false</span><br><span class="line">    useSign = true</span><br><span class="line">    dex &#123;</span><br><span class="line">        dexMode = &quot;jar&quot;</span><br><span class="line">        pattern = [&quot;classes*.dex&quot;]</span><br><span class="line">        loader = []</span><br><span class="line">    &#125;</span><br><span class="line">    lib &#123;</span><br><span class="line">        pattern = [&quot;lib/*/*.so&quot;]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res &#123;</span><br><span class="line">        pattern = [&quot;res/*&quot;, &quot;r/*&quot;, &quot;assets/*&quot;, &quot;resources.arsc&quot;, &quot;AndroidManifest.xml&quot;]</span><br><span class="line">        ignoreChange = []</span><br><span class="line">        largeModSize = 100</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    packageConfig &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    sevenZip &#123;</span><br><span class="line">        zipArtifact = &quot;com.tencent.mm:SevenZip:1.1.10&quot;</span><br><span class="line">//        path = &quot;/usr/local/bin/7za&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    buildConfig &#123;</span><br><span class="line">        keepDexApply = false</span><br><span class="line">        //tinkerId = &quot;1.0.1-base&quot;</span><br><span class="line">        //applyMapping = &quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release-mapping.txt&quot; //  å¯é€‰ï¼Œè®¾ç½®mappingæ–‡ä»¶ï¼Œå»ºè®®ä¿æŒæ—§apkçš„proguardæ··æ·†æ–¹å¼</span><br><span class="line">        //applyResourceMapping = &quot;$&#123;bakPath&#125;/$&#123;appName&#125;/app-release-R.txt&quot; // å¯é€‰ï¼Œè®¾ç½®R.txtæ–‡ä»¶ï¼Œé€šè¿‡æ—§apkæ–‡ä»¶ä¿æŒResIdçš„åˆ†é…</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„é…ç½®æ¯”è¾ƒå¤šï¼Œä¸€å¼€å§‹çœ‹è¿˜æ˜¯æœ‰ç‚¹å„¿çœ¼èŠ±ç¼­ä¹±çš„ï¼Œæ‰€ä»¥å¾—æ…¢æ…¢æ¥ï¼›</p><p>è¿™é‡Œå¯¹å…¶ä¸­çš„å‡ ç‚¹è¿›è¡Œè¯´æ˜ï¼š</p><ul><li><em>baseApkDir</em> ï¼š è¿™é‡Œå¡«å†™æ¯æ¬¡æ„å»ºç”Ÿæˆçš„åŸºå‡†åŒ…ç›®å½•ï¼Œæ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰æ–°çš„ç›®å½•å’Œæ–°çš„åŸºå‡†åŒ…ç”Ÿæˆï¼Œä½†æ˜¯åªæœ‰ä½ æ‰“ç®—å‘å¸ƒçš„é‚£ä¸€ä¸ªçš„ç›®å½•æ‰æ˜¯æœ‰æ•ˆçš„ã€‚</li><li><em>tinkerId</em> ï¼š æ„å»ºåŸºå‡†åŒ…å’Œè¡¥ä¸åŒ…éƒ½è¦æŒ‡å®šä¸åŒçš„tinkerIdï¼Œå¹¶ä¸”å¿…é¡»ä¿è¯å”¯ä¸€æ€§ã€‚æ¯”å¦‚ä½ çš„ç¬¬ä¸€ä¸ªåŸºå‡†åŒ…æ‰“åŒ…çš„æ—¶å€™å¯ä»¥æŠŠè¿™ä¸ªidè®¾ç½®ä¸ºâ€œ1.0.0-baseâ€ï¼Œå½“ä½ æƒ³æ‰“åŒ…çƒ­ä¿®å¤è¡¥ä¸åŒ…çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¿™ä¸ªidæ¢æˆ1.0.0-patchã€‚</li></ul><p>æ›´è¯¦ç»†çš„é…ç½®é¡¹å‚è€ƒï¼š<a href="https://bugly.qq.com/docs/utility-tools/plugin-gradle-hotfix/" target="_blank" rel="noopener">tinker-supporté…ç½®è¯´æ˜</a></p><h4 id="ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–SDK"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–SDK" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–SDK"></a>ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–SDK</h4><p>ä¸Šé¢çš„â€œtinker-support.gradleâ€ä¸­çš„enableProxyApplicationå±æ€§è®¾ç½®çš„æ˜¯falseï¼Œæ˜¯Tinkeræ¨èçš„æ¥å…¥æ–¹å¼ã€‚</p><h5 id="è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºfalseçš„æƒ…å†µ"><a href="#è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºfalseçš„æƒ…å†µ" class="headerlink" title="è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºfalseçš„æƒ…å†µ"></a>è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºfalseçš„æƒ…å†µ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class SampleApplication extends TinkerApplication &#123;</span><br><span class="line">    public SampleApplication() &#123;</span><br><span class="line">        super(ShareConstants.TINKER_ENABLE_ALL, &quot;xxx.xxx.SampleApplicationLike&quot;,</span><br><span class="line">                &quot;com.tencent.tinker.loader.TinkerLoader&quot;, false);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>SampleApplicationLike</strong>éœ€è¦æ˜¯è‡ªå®šä¹‰çš„ç»§æ‰¿<strong>DefaultApplicationLike</strong>çš„ç±»ï¼Œä¸è¦å¿˜äº†åœ¨<strong>AndroidManifest.xml</strong>ä¸­å£°åä¸Šé¢çš„è¿™ä¸ªApplicationå“¦ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class SampleApplicationLike extends DefaultApplicationLike &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static final String TAG = &quot;Tinker.SampleApplicationLike&quot;;</span><br><span class="line"></span><br><span class="line">    public SampleApplicationLike(Application application, int tinkerFlags,</span><br><span class="line">                                 boolean tinkerLoadVerifyFlag, long applicationStartElapsedTime,</span><br><span class="line">                                 long applicationStartMillisTime, Intent tinkerResultIntent) &#123;</span><br><span class="line">        super(application, tinkerFlags, tinkerLoadVerifyFlag, applicationStartElapsedTime, applicationStartMillisTime, tinkerResultIntent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        super.onCreate();</span><br><span class="line">        // è¿™é‡Œå®ç°SDKåˆå§‹åŒ–ï¼ŒappIdæ›¿æ¢æˆä½ çš„åœ¨Buglyå¹³å°ç”³è¯·çš„appId</span><br><span class="line">        // è°ƒè¯•æ—¶ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºtrue</span><br><span class="line">        Bugly.init(getApplication(), &quot;900029763&quot;, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)</span><br><span class="line">    @Override</span><br><span class="line">    public void onBaseContextAttached(Context base) &#123;</span><br><span class="line">        super.onBaseContextAttached(base);</span><br><span class="line">        // you must install multiDex whatever tinker is installed!</span><br><span class="line">        MultiDex.install(base);</span><br><span class="line"></span><br><span class="line">        // å®‰è£…tinker</span><br><span class="line">        // TinkerManager.installTinker(this); æ›¿æ¢æˆä¸‹é¢Buglyæä¾›çš„æ–¹æ³•</span><br><span class="line">        Beta.installTinker(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)</span><br><span class="line">    public void registerActivityLifecycleCallback(Application.ActivityLifecycleCallbacks callbacks) &#123;</span><br><span class="line">        getApplication().registerActivityLifecycleCallbacks(callbacks);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢éœ€è¦æ³¨æ„çš„æ˜¯åœ¨â€œonCreate()â€æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¡«å…¥çš„appIdæ˜¯ä½ åœ¨Buglyåˆ›å»ºçš„é¡¹ç›®çš„Appidï¼Œå…¶ä»–åœ°æ–¹åŸºæœ¬ä¸Šä¸ç”¨æ”¹äº†</p><h5 id="è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºtrueçš„æƒ…å†µ"><a href="#è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºtrueçš„æƒ…å†µ" class="headerlink" title="è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºtrueçš„æƒ…å†µ"></a>è‡ªå®šä¹‰Applicationï¼Œå½“enableProxyApplicationä¸ºtrueçš„æƒ…å†µ</h5><p>è¿™ç§çš„æ¥å…¥æ–¹å¼è¦ç®€å•è®¸å¤šï¼Œæ— é¡»ä½ æ”¹é€ Application</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class MyApplication extends Application &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        super.onCreate();</span><br><span class="line">        // è¿™é‡Œå®ç°SDKåˆå§‹åŒ–ï¼ŒappIdæ›¿æ¢æˆä½ çš„åœ¨Buglyå¹³å°ç”³è¯·çš„appId</span><br><span class="line">        // è°ƒè¯•æ—¶ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºtrue</span><br><span class="line">        Bugly.init(this, &quot;900029763&quot;, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void attachBaseContext(Context base) &#123;</span><br><span class="line">        super.attachBaseContext(base);</span><br><span class="line">        // you must install multiDex whatever tinker is installed!</span><br><span class="line">        MultiDex.install(base);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // å®‰è£…tinker</span><br><span class="line">        Beta.installTinker();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬å››æ­¥ï¼šAndroidManifest-xmlé…ç½®"><a href="#ç¬¬å››æ­¥ï¼šAndroidManifest-xmlé…ç½®" class="headerlink" title="ç¬¬å››æ­¥ï¼šAndroidManifest.xmlé…ç½®"></a>ç¬¬å››æ­¥ï¼šAndroidManifest.xmlé…ç½®</h4><h5 id="1-æƒé™é…ç½®ï¼š"><a href="#1-æƒé™é…ç½®ï¼š" class="headerlink" title="1.æƒé™é…ç½®ï¼š"></a>1.æƒé™é…ç½®ï¼š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.READ_LOGS&quot; /&gt;</span><br><span class="line">&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</span><br></pre></td></tr></table></figure><h5 id="2-Activityé…ç½®ï¼š"><a href="#2-Activityé…ç½®ï¼š" class="headerlink" title="2.Activityé…ç½®ï¼š"></a>2.Activityé…ç½®ï¼š</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity</span><br><span class="line">    android:name=&quot;com.tencent.bugly.beta.ui.BetaActivity&quot;</span><br><span class="line">    android:configChanges=&quot;keyboardHidden|orientation|screenSize|locale&quot;</span><br><span class="line">    android:theme=&quot;@android:style/Theme.Translucent&quot; /&gt;</span><br></pre></td></tr></table></figure><h5 id="3-é…ç½®FileProvider"><a href="#3-é…ç½®FileProvider" class="headerlink" title="3.é…ç½®FileProvider"></a>3.é…ç½®FileProvider</h5><pre><code>æ³¨æ„ï¼šå¦‚æœæ‚¨æƒ³å…¼å®¹Android Næˆ–è€…ä»¥ä¸Šçš„è®¾å¤‡ï¼Œå¿…é¡»è¦åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­é…ç½®FileProvideræ¥è®¿é—®å…±äº«è·¯å¾„çš„æ–‡ä»¶ã€‚</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--çƒ­æ›´æ–°éœ€è¦çš„Provider--&gt;</span><br><span class="line">&lt;provider</span><br><span class="line">    android:name=&quot;android.support.v4.content.FileProvider&quot;</span><br><span class="line">    android:authorities=&quot;$&#123;applicationId&#125;.fileProvider&quot;</span><br><span class="line">    android:exported=&quot;false&quot;</span><br><span class="line">    android:grantUriPermissions=&quot;true&quot;&gt;</span><br><span class="line">    &lt;meta-data</span><br><span class="line">        android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;</span><br><span class="line">        android:resource=&quot;@xml/provider_paths&quot;/&gt;</span><br><span class="line">&lt;/provider&gt;</span><br></pre></td></tr></table></figure><p>åœ¨resç›®å½•æ–°å»ºxmlæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºprovider_paths.xmlæ–‡ä»¶å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;!-- /storage/emulated/0/Download/$&#123;applicationId&#125;/.beta/apk--&gt;</span><br><span class="line">    &lt;external-path name=&quot;beta_external_path&quot; path=&quot;Download/&quot;/&gt;</span><br><span class="line">    &lt;!--/storage/emulated/0/Android/data/$&#123;applicationId&#125;/files/apk/--&gt;</span><br><span class="line">    &lt;external-path name=&quot;beta_external_files_path&quot; path=&quot;Android/data/&quot;/&gt;</span><br><span class="line">&lt;/paths&gt;</span><br></pre></td></tr></table></figure></p><h4 id="ç¬¬äº”æ­¥ï¼šæ··æ·†é…ç½®"><a href="#ç¬¬äº”æ­¥ï¼šæ··æ·†é…ç½®" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæ··æ·†é…ç½®"></a>ç¬¬äº”æ­¥ï¼šæ··æ·†é…ç½®</h4><p>ä¸ºäº†é¿å…æ··æ·†SDKï¼Œåœ¨Proguardæ··æ·†æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-dontwarn com.tencent.bugly.**</span><br><span class="line">-keep public class com.tencent.bugly.**&#123;*;&#125;</span><br><span class="line"># tinkeræ··æ·†è§„åˆ™</span><br><span class="line">-dontwarn com.tencent.tinker.**</span><br><span class="line">-keep class com.tencent.tinker.** &#123; *; &#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä¸‰ã€æ‰“åŒ…"><a href="#ä¸‰ã€æ‰“åŒ…" class="headerlink" title="ä¸‰ã€æ‰“åŒ…"></a>ä¸‰ã€æ‰“åŒ…</h3><p>å½“ä¸Šé¢çš„ç¯å¢ƒé…ç½®éƒ½æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œæ‰“åŒ…äº†ã€‚</p><p>æ‰“åŒ…ä¹‹å‰ï¼Œä½ è¿˜å¾—é…ç½®ä¸€ä¸‹ç¼–è¯‘æ­£å¼ç‰ˆapkæ‰€éœ€è¦çš„<strong>keystore.jks</strong>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ€ä¹ˆåˆ›å»ºçš„å°±ä¸ä»‹ç»äº†ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸€ä¸‹å¦‚ä½•é…ç½®ï¼š</p><p>åœ¨app moudleç›®å½•ä¸‹çš„â€œbuild.gradleâ€ä¸­é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            keyAlias &apos;xxxxxxxx&apos;</span><br><span class="line">            keyPassword &apos;xxxxxxxx&apos;</span><br><span class="line">            storeFile file(&apos;../keystore.jks&apos;)</span><br><span class="line">            storePassword &apos;xxxxxxxx&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled true</span><br><span class="line">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">            signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„å„é¡¹å‚æ•°å°±ä¸å¿…åšè¯´æ˜äº†</p><p>ç„¶åå°±æ˜¯æ‰“åŒ…è¿‡ç¨‹<img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-001.png" alt="image"></p><p><strong>æ‰“åŒ…è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ä¹‹å‰æåˆ°è¿‡çš„tinkerIdçš„é…ç½®ï¼Œä»¥åŠç›®å½•çš„é…ç½®ï¼Œå¾ˆé‡è¦å“¦ï¼</strong></p><p>ç”Ÿæˆçš„åŸºå‡†åŒ…ä¼šåœ¨è¿™ä¸ªç›®å½•</p><p><img src="https://bugly.qq.com/docs/img/hotfix/android/Snip20170209_2.png?v=20180709165613" alt="image"></p><p>ç”Ÿæˆçš„è¡¥ä¸åŒ…ä¼šåœ¨è¿™ä¸ªç›®å½•</p><p><img src="https://bugly.qq.com/docs/img/hotfix/android/1479216059696.png?v=20180709165613" alt="image"></p><p>ç„¶åå°±å‡†å¤‡å¼€å§‹ä½¿ç”¨å§</p><h3 id="å››ã€ä½¿ç”¨"><a href="#å››ã€ä½¿ç”¨" class="headerlink" title="å››ã€ä½¿ç”¨"></a>å››ã€ä½¿ç”¨</h3><p>æ‰¾åˆ°ä½ åˆ›å»ºçš„äº§å“ï¼Œç„¶åè¿›å…¥åˆ°ä¸‹é¢çš„ç•Œé¢</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-002.png" alt="image"></p><p>æ¥ç€ï¼Œå‘å¸ƒæ–°è¡¥ä¸å§ï¼Œçœ‹ä¸€çœ‹æ•ˆæœ<br><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-003.png" alt="image"></p><p>å…·ä½“çš„æ•ˆæœå¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ï¼Œä¸è¿‡æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°ä¸Šä¼ ä¸æˆåŠŸçš„æƒ…å†µï¼Œä¸€èˆ¬ä¸‹å‘åè¦è¿‡5åˆ°10åˆ†é’Ÿæ‰ä¼šç”Ÿæ•ˆï¼ˆå¯èƒ½æ˜¯æˆ‘çš„ç½‘ç»œé—®é¢˜ï¼‰ï¼Œå¦‚æœå¤ªä¹…æ²¡æ•ˆæœï¼Œåº”è¯¥æ˜¯å“ªé‡Œå‡ºé—®é¢˜äº†</p><h2 id="å°¾"><a href="#å°¾" class="headerlink" title="å°¾"></a>å°¾</h2><p>å‰é¢çš„æ‰€æœ‰æ“ä½œéƒ½å°è¯•è¿‡åï¼Œæ¥ä¸‹æ¥ä½ å¯èƒ½å°±ä¼šé¢ä¸´æ–°çš„éœ€æ±‚äº†ã€‚æ¯”å¦‚è¯´ï¼Œå¤šæ¸ é“æ‰“åŒ…çš„å®ç°ï¼Œæ¯”è¾ƒæ—§çš„åŠæ³•æ˜¯é€šè¿‡productFlavorså»å®ç°åˆ†åˆ«æ‰“åŒ…ï¼Œä¸è¿‡è¿™æ ·ä¼šæœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå³æœ‰å¤šå°‘æ¸ é“æ‰“åŒ…æµç¨‹å°±æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè¿™æ ·æ•ˆç‡æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼›</p><p>äºæ˜¯ä¹ï¼Œæ–°çš„æ‰“åŒ…æ–¹æ¡ˆå‡ºæ¥äº†ï¼š</p><h3 id="ä½¿ç”¨Walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…"><a href="#ä½¿ç”¨Walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…" class="headerlink" title="ä½¿ç”¨Walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…"></a>ä½¿ç”¨Walleè¿›è¡Œå¤šæ¸ é“æ‰“åŒ…</h3><p>ä¸‹é¢æ˜¯Walleçš„githubåœ°å€ï¼š</p><p><a href="https://github.com/Meituan-Dianping/walle" target="_blank" rel="noopener">Walleï¼ˆç“¦åŠ›ï¼‰ï¼šAndroid Signature V2 Schemeç­¾åä¸‹çš„æ–°ä¸€ä»£æ¸ é“åŒ…æ‰“åŒ…ç¥å™¨</a></p><p>å®ƒçš„æ¥å…¥æ–‡æ¡£å†™çš„ä¹Ÿååˆ†å‹å¥½ï¼Œæ¥ä¸‹æ¥å®é™…æ“ä½œä¸€éï¼š</p><h4 id="Walleçš„Gradleæ¥å…¥"><a href="#Walleçš„Gradleæ¥å…¥" class="headerlink" title="Walleçš„Gradleæ¥å…¥"></a>Walleçš„Gradleæ¥å…¥</h4><p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <strong>build.gradle</strong> ä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &apos;com.meituan.android.walle:plugin:1.1.6&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨app moduleä¸­çš„ <strong>build.gradle</strong> æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;walle&apos;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile &apos;com.meituan.android.walle:library:1.1.6&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶è¿›è¡Œæ’ä»¶é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">walle &#123;</span><br><span class="line">    // æŒ‡å®šæ¸ é“åŒ…çš„è¾“å‡ºè·¯å¾„</span><br><span class="line">    apkOutputFolder = new File(&quot;$&#123;project.buildDir&#125;/outputs/channels&quot;);</span><br><span class="line">    // å®šåˆ¶æ¸ é“åŒ…çš„APKçš„æ–‡ä»¶åç§°</span><br><span class="line">    apkFileNameFormat = &apos;$&#123;appName&#125;-$&#123;packageName&#125;-$&#123;channel&#125;-$&#123;buildType&#125;-v$&#123;versionName&#125;-$&#123;versionCode&#125;-$&#123;buildTime&#125;.apk&apos;;</span><br><span class="line">    // æ¸ é“é…ç½®æ–‡ä»¶</span><br><span class="line">    channelFile = new File(&quot;$&#123;project.getProjectDir()&#125;/channel&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨app moduleç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå’Œä¸Šé¢é…ç½®ä¸­è¦ä¿æŒä¸€è‡´ï¼Œå°±å« <strong>channel</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">360</span><br><span class="line">yingyongbao</span><br><span class="line">baidu</span><br><span class="line">wandoujia</span><br><span class="line">xiaomi</span><br><span class="line">oppo</span><br><span class="line">lenovo</span><br><span class="line">huawei</span><br><span class="line">default_channel</span><br><span class="line"># æ‰“åŒ…å‘½ä»¤ gradlew clean assembleReleaseChannels  æˆ–è€… gradlew assembleReleaseChannels</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œåœ¨ä½ çš„Applicationä¸­çš„<strong>onCreate</strong>æ–¹æ³•é‡Œæ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String channel = WalleChannelReader.getChannel(getApplication());</span><br><span class="line">Bugly.setAppChannel(getApplication(), channel);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å®ç°çš„æ˜¯<strong>SampleApplicationLike</strong>ï¼Œä¹Ÿæ˜¯åœ¨å®ƒçš„<strong>onCreate</strong>æ–¹æ³•é‡Œæ·»åŠ å³å¯ã€‚</p><p>æ¥ä¸‹æ¥é€šè¿‡è¿è¡Œä¸Šé¢çš„æ‰“åŒ…å‘½ä»¤æˆ–è€…é€šè¿‡å›¾ä¸­çš„æ‰‹åŠ¨æ“ä½œï¼Œéƒ½æ˜¯å¯ä»¥æ‰“åŒ…çš„</p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/bugly-004.png" alt="image"></p><h2 id="æœ«"><a href="#æœ«" class="headerlink" title="æœ«"></a>æœ«</h2><p>è‡³æ­¤ï¼ŒåŸºæœ¬ä¸Šæ•´ä¸ªé…ç½®æµç¨‹å°±åˆ°æ­¤ç»“æŸ!!!</p><p>ä¸è¿‡æœ‰ä¸€ä¸ªé—®é¢˜æˆ‘ä¸€ç›´ä¸çŸ¥é“å¦‚ä½•è§£å†³ï¼Œå°±æ˜¯æ‰“åŒ…åŸºå‡†åŒ…çš„å‘½åï¼Œåœ¨ <strong>tinker-support.gradle</strong> è¿›è¡Œé…ç½®æ˜¯ä¸èµ·æ•ˆæœçš„ï¼Œè¯•äº†å¥½ä¹…éƒ½æ²¡æ•ˆæœï¼Œçœ‹æ¥è¿˜å¾—äº¤ç»™å…¶ä»–å°ä¼™ä¼´ä»¬è§£å†³äº†</p><p><em>é‚£ä¹ˆ</em></p><p><img src="https://blog-pic-1256696029.cos.ap-guangzhou.myqcloud.com/Bugly%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B/zaihui.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¤´&quot;&gt;&lt;a href=&quot;#å¤´&quot; class=&quot;headerlink&quot; title=&quot;å¤´&quot;&gt;&lt;/a&gt;å¤´&lt;/h2&gt;&lt;p&gt;ä¸çŸ¥é“ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™ä¸ªæƒ…å†µï¼Œé¡¹ç›®ä¸Šçº¿åæˆ–è€…å¼€å§‹ç»™åˆ«äººä½¿ç”¨çš„æ—¶å€™ï¼Œå†·ä¸ä¸çš„å†’å‡ºä¸ªBugï¼Œè¿™æ—¶å€™é¦–å…ˆè¦å¹²å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…ˆçœ‹å´©æºƒæ—¥å¿—å•Š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;çœ‹å®Œå´©æºƒæ—¥å¿—ä½ çŸ¥é“äº†é€ æˆå´©æºƒçš„åŸå› ï¼Œç„¶åå¹²å˜›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¼€å§‹ç”©é”…å•Š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“æŸ¥æ˜äº†æ˜¯è°é€ æˆçš„è¿™ä¸ªå´©æºƒåï¼Œä½ å‘ç°ä¸æ˜¯ä½ çš„é—®é¢˜ï¼Œäºæ˜¯ä½ å¿ƒä¸­ä¸€ä¹ï¼Œé•¿èˆ’ä¸€å£æ°”
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸‹ï¼‰</title>
    <link href="http://yoursite.com/2018/08/14/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
    <id>http://yoursite.com/2018/08/14/Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸‹ï¼‰/</id>
    <published>2018-08-14T11:59:17.000Z</published>
    <updated>2018-08-14T12:05:14.085Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¸Šä¸€ç¯‡<a href="https://oldchen.top/2018/08/05/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="noopener">Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰</a>ä¸­ï¼Œå·²ç»ä»‹ç»äº†å¦‚ä½•æ­å»ºä¸€ä¸ªåŸºæœ¬çš„å¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ¥å£çš„ç¼–å†™ï¼Œæœ€åæ˜¯èƒ½å¤ŸæˆåŠŸè¿è¡Œçš„ã€‚</p><p>è¿™ä¸€ç¯‡å°†æ›´è¿›ä¸€æ­¥ï¼Œä¸»è¦è§£å†³ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>â‘ ï¼šå¦‚ä½•è®©åå°é¡¹ç›®è¿è¡Œåœ¨TomCatä¸Š</li><li>â‘¡ï¼šå¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²è‡ªå·±çš„é¡¹ç›®</li></ul><a id="more"></a><h2 id="Start"><a href="#Start" class="headerlink" title="Start"></a>Start</h2><h4 id="ä¸€ã€æœ¬åœ°Tomcatçš„ä½¿ç”¨"><a href="#ä¸€ã€æœ¬åœ°Tomcatçš„ä½¿ç”¨" class="headerlink" title="ä¸€ã€æœ¬åœ°Tomcatçš„ä½¿ç”¨"></a>ä¸€ã€æœ¬åœ°Tomcatçš„ä½¿ç”¨</h4><h5 id="1-1ã€å®‰è£…Tomcat"><a href="#1-1ã€å®‰è£…Tomcat" class="headerlink" title="1.1ã€å®‰è£…Tomcat"></a>1.1ã€å®‰è£…Tomcat</h5><p>ä½¿ç”¨TomCatï¼Œè‡ªç„¶æ˜¯è¦TomCatçš„å®‰è£…åŒ…å’¯</p><p><a href="https://tomcat.apache.org/download-90.cgi" target="_blank" rel="noopener">å®‰è£…åŒ…ä¸‹è½½åœ°å€</a></p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/001.png" alt="image"></p><p>ç”±äºæˆ‘ä»¬æœ¬åœ°åº”è¯¥éƒ½æ˜¯å·²ç»å®‰è£…é…ç½®è¿‡JDKäº†çš„ï¼Œæ‰€ä»¥å®‰è£…Tomcatçš„æ—¶å€™ä¸€è·¯Nextå°±è¡Œäº†</p><h5 id="1-2ã€é…ç½®Gradle"><a href="#1-2ã€é…ç½®Gradle" class="headerlink" title="1.2ã€é…ç½®Gradle"></a>1.2ã€é…ç½®Gradle</h5><p>é¦–å…ˆï¼Œåœ¨é¡¹ç›®çš„gradleæ‰€åœ¨çš„ç›®å½•ä¸‹åˆ›å»ºgradle.propertiesï¼Œç„¶ååœ¨é‡Œé¢æ·»åŠ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># trueå°±å»æ‰“åŒ…Warï¼Œå¦åˆ™ä¸æ‰“åŒ…</span><br><span class="line">BUILD_WAR=true</span><br></pre></td></tr></table></figure></p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/002.png" alt="image"></p><p>æ¥ç€åœ¨build.gradleä¸­æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (BUILD_WAR.toBoolean()) &#123;</span><br><span class="line">    apply plugin: &apos;war&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    ...</span><br><span class="line">    if (BUILD_WAR.toBoolean()) &#123;</span><br><span class="line">        providedRuntime(&apos;org.springframework.boot:spring-boot-starter-tomcat&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/003.png" alt="image"></p><p>åŒæ—¶ï¼Œä¸è¦å¿˜äº†åˆ›å»ºä¸€ä¸ªServletInitializerç±»ï¼Œç”¨äºSpringBootçš„åˆå§‹åŒ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class ServletInitializer extends SpringBootServletInitializer &#123;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected SpringApplicationBuilder configure(SpringApplicationBuilder application) &#123;</span><br><span class="line">return application.sources(TestForDemoApplication.class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/008.png" alt="image"></p><p>è¿™äº›éƒ½å®Œæˆåï¼Œåœ¨Terminalæ§åˆ¶å°è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradlew assemble</span><br></pre></td></tr></table></figure><p>ç­‰å¾…ç»“æœï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªwaråŒ…äº†</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/004.png" alt="image"></p><h5 id="1-3ã€é…ç½®Tomcat"><a href="#1-3ã€é…ç½®Tomcat" class="headerlink" title="1.3ã€é…ç½®Tomcat"></a>1.3ã€é…ç½®Tomcat</h5><p>æ‰¾åˆ°demo-0.0.1-SNAPSHOT.waræ‰€åœ¨ç›®å½•ï¼Œç„¶åå°†å…¶æ›´åä¸ºoldchen.war</p><pre><code>æ³¨æ„ï¼Œè¿™é‡Œä¿®æ”¹åçš„åå­—å°†ä¼šä¸éƒ¨ç½²åˆ°Tomcatä¸Šçš„ç½‘ç»œè¯·æ±‚åœ°å€æœ‰å…³å“¦</code></pre><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/005.png" alt="image"></p><p>ç„¶åæ‰¾åˆ°Tomcatçš„å®‰è£…ç›®å½•ä¸‹çš„webappsç›®å½•ï¼Œå°†é‡Œé¢çš„å…¶ä»–æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ é™¤ï¼ŒæŠŠoldchen.warå¤åˆ¶åˆ°è¯¥ç›®å½•</p><p>æ¥ä¸‹æ¥ï¼Œåœ¨Tomcatç›®å½•ä¸‹çš„binç›®å½•ä¸­è¿è¡ŒTomcat9w.exe</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/006.png" alt="image"></p><p>ç„¶åä½ ä¼šå‘ç°ï¼Œwebappsç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªæ–‡ä»¶</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/007.png" alt="image"></p><h5 id="1-4ã€æµ‹è¯•æœ¬åœ°Tomcat"><a href="#1-4ã€æµ‹è¯•æœ¬åœ°Tomcat" class="headerlink" title="1.4ã€æµ‹è¯•æœ¬åœ°Tomcat"></a>1.4ã€æµ‹è¯•æœ¬åœ°Tomcat</h5><p>æ¥ä¸‹æ¥ï¼Œè®¿é—®åœ°å€ï¼š</p><p><a href="http://localhost:8080/oldchen/user/user?account=oldchen" target="_blank" rel="noopener">http://localhost:8080/oldchen/user/user?account=oldchen</a></p><p>ç»“æœï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/009.png" alt="image"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°çš„Tomcatå·²ç»éƒ¨ç½²æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²Tomcatäº†ã€‚</p><h4 id="äºŒã€äº‘æœåŠ¡å™¨ä¸ŠTomcatçš„éƒ¨ç½²"><a href="#äºŒã€äº‘æœåŠ¡å™¨ä¸ŠTomcatçš„éƒ¨ç½²" class="headerlink" title="äºŒã€äº‘æœåŠ¡å™¨ä¸ŠTomcatçš„éƒ¨ç½²"></a>äºŒã€äº‘æœåŠ¡å™¨ä¸ŠTomcatçš„éƒ¨ç½²</h4><h5 id="2-1ã€è´­ä¹°äº‘æœåŠ¡å™¨"><a href="#2-1ã€è´­ä¹°äº‘æœåŠ¡å™¨" class="headerlink" title="2.1ã€è´­ä¹°äº‘æœåŠ¡å™¨"></a>2.1ã€è´­ä¹°äº‘æœåŠ¡å™¨</h5><p>æƒ³åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²Tomcatï¼Œé¦–å…ˆéœ€è¦è´­ä¹°ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä¹°çš„æ˜¯è…¾è®¯äº‘çš„æœåŠ¡å™¨ï¼Œåˆæ¬¡æ¥è§¦çš„åŒå­¦å»ºè®®å»ä½¿ç”¨è¯•ç”¨çš„äº‘æœåŠ¡å™¨ï¼Œç­‰æ“ä½œæˆåŠŸåå†ä¹°ä¹Ÿä¸è¿Ÿ</p><p>å‡ºäºå¯¹åˆå­¦è€…çš„äººæ–‡å…³æ€€ï¼ˆæ²¡é”™ï¼ŒIs meï¼‰ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Windowsç‰ˆçš„æœåŠ¡å™¨ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/010.png" alt="image"></p><p>ä¸ºäº†èƒ½å¤Ÿæ­£å¸¸è®¿é—®æœåŠ¡å™¨çš„åœ°å€ï¼Œéœ€è¦ç»™æœåŠ¡å™¨é…ç½®ä¸€ä¸‹å®‰å…¨ç»„ï¼Œå®‰å…¨ç»„ä¸­éœ€è¦æ·»åŠ è¿™æ ·ä¸€é¡¹è§„åˆ™ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/011.png" alt="image"></p><p>ç„¶åï¼Œä½¿ç”¨è¿œç¨‹è¿æ¥ï¼Œè¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œå…·ä½“æ“ä½œæ˜¯ï¼š</p><pre><code>ä¸€ã€win+RäºŒã€è¾“å…¥mstscä¸‰ã€è¾“å…¥äº‘æœåŠ¡å™¨çš„Ipåœ°å€ï¼Œç”¨æˆ·åä»¥åŠå¯†ç ï¼Œè¿æ¥</code></pre><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯windows2016ç‰ˆçš„æœåŠ¡å™¨ï¼ŒåŒæ—¶é‡åˆ°äº†â€èº«ä»½éªŒè¯é”™è¯¯ï¼Œè¦æ±‚çš„å‡½æ•°ä¸æ”¯æŒâ€ï¼Œè€Œä¸”ä½ æ°å¥½æ˜¯win10å®¶åº­ç‰ˆï¼Œé‚£ä¹ˆä¸‹é¢æœ‰è§£å†³åŠæ³•ï¼š<br><a href="https://jingyan.baidu.com/album/67508eb47ae5499ccb1ce410.html?picindex=3" target="_blank" rel="noopener">windows10å®¶åº­ç‰ˆ è¿œç¨‹æ¡Œé¢æŠ¥é”™</a></p><p>æˆåŠŸç™»å½•åï¼Œæ•´ä¸ªç•Œé¢åªæœ‰ä¸€ä¸ªå­¤ä¼¶ä¼¶çš„å›æ”¶ç«™ï¼Œåˆ°äº†è¿™æ­¥ï¼Œå°±å‡†å¤‡å¼€å§‹é…ç½®å§ã€‚</p><h5 id="2-2ã€é…ç½®äº‘æœåŠ¡å™¨"><a href="#2-2ã€é…ç½®äº‘æœåŠ¡å™¨" class="headerlink" title="2.2ã€é…ç½®äº‘æœåŠ¡å™¨"></a>2.2ã€é…ç½®äº‘æœåŠ¡å™¨</h5><p>äº‘æœåŠ¡å™¨ä¸Šé¢è¿è¡Œé¡¹ç›®åªéœ€è¦Tomcat+Mysql+Navicat+JDKï¼Œé…ç½®æ–¹æ³•å’Œä¹‹å‰åœ¨æœ¬åœ°é…ç½®æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™é‡Œä¸å»ºè®®ä½¿ç”¨ä¸Šä¼ çš„æ–¹æ³•ï¼Œå› ä¸ºä¸Šä¼ å®é™…ä¸Šå’Œä¸‹è½½æ˜¯ä¸€æ ·çš„ï¼Œæœ‰æ—¶å€™è¿˜ä¼šå—é™äºä½ è‡ªå·±å®½å¸¦çš„ä¸Šè¡Œé€Ÿåº¦ã€‚</p><p>é‡æ–°ä¸‹è½½å®‰è£…JDKæ˜¯å¾ˆå¤´ç–¼çš„ï¼Œä¸‹é¢æ˜¯è¯¦ç»†æ•™ç¨‹ï¼š</p><p><a href="https://blog.csdn.net/qq_32519693/article/details/71330930" target="_blank" rel="noopener">éå¸¸è¯¦ç»†å›¾æ–‡JDKå’ŒTomcatå®‰è£…å’Œé…ç½®çš„å›¾æ–‡æ•™ç¨‹</a></p><p>å…¨éƒ¨éœ€è¦å‡†å¤‡çš„æ–‡ä»¶å¦‚ä¸‹ï¼š<br><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/012.png" alt="image"></p><p>å…¶ä¸­ï¼Œ<strong>PatchNavicat</strong> ç”¨äºNavicatçš„ç ´è§£ï¼Œåœ¨ä¸Šä¸€ç¯‡çš„é“¾æ¥ä¸­å·²ç»è¯´æ˜ã€‚</p><p>è€Œ<strong>oldchen.sql</strong>åˆ™æ˜¯é€šè¿‡æœ¬åœ°Navicatç”ŸæˆMysqlæ–‡ä»¶ï¼Œå…·ä½“æ“ä½œæ˜¯ï¼šå³é”®ä½ é€‰ä¸­çš„æ•°æ®åº“ï¼Œé€‰æ‹©ã€è½¬å‚¨SQLæ–‡ä»¶ã€‘â†’ã€ç»“æ„å’Œæ•°æ®ã€‘ï¼Œç„¶åå°±å¯ä»¥ç”Ÿæˆäº†ã€‚ä½¿ç”¨æ–¹æ³•å°±æ˜¯åœ¨äº‘æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“åé€‰æ‹©ã€è¿è¡ŒSQLæ–‡ä»¶ã€‘å³å¯ã€‚</p><p>è¿™æ ·ï¼Œæœ¬åœ°æ•°æ®åº“çš„è¿ç§»å°±å®Œæˆäº†ã€‚å‰©ä¸‹çš„æ“ä½œä¸ä¹‹å‰ä»‹ç»çš„åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œä¸ºäº†å¼€å¯å¤–ç½‘è¿æ¥ï¼Œéœ€è¦åœ¨Tomcatå®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°confç›®å½•ï¼Œä¿®æ”¹å…¶ä¸­çš„server.xmlæ–‡ä»¶ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/013.png" alt="image"></p><p>å°†portç”±8080ä¿®æ”¹ä¸º80</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/014.png" alt="image"></p><p>å½“ä½ å®Œæˆå…¨éƒ¨çš„æ“ä½œåï¼Œå°±å¯ä»¥æµ‹è¯•æ¥å£äº†ã€‚</p><h5 id="2-3ã€æµ‹è¯•äº‘æœåŠ¡å™¨æ¥å£"><a href="#2-3ã€æµ‹è¯•äº‘æœåŠ¡å™¨æ¥å£" class="headerlink" title="2.3ã€æµ‹è¯•äº‘æœåŠ¡å™¨æ¥å£"></a>2.3ã€æµ‹è¯•äº‘æœåŠ¡å™¨æ¥å£</h5><p>åªè¦ä½ çš„æ­¥éª¤æ˜¯okçš„ï¼Œé‚£ä¹ˆäº‘æœåŠ¡å™¨ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p><p>ç”±äºåœ¨å†™è¿™ç¯‡æ–‡ç« æœŸé—´ï¼Œæˆ‘åˆå¤šå†™äº†ä¸ªç™»å½•æ¥å£ï¼Œæ‰€ä»¥è¿™é‡Œçš„æµ‹è¯•ä¾‹å­ç”¨çš„æ˜¯æ–°çš„æ¥å£ï¼Œä»…ä¾›å‚è€ƒï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/2018.8.13/015.png" alt="image"></p><p>è¯·æ±‚åœ°å€æ˜¯ï¼š<a href="http://111.230.251.115/oldchen/user/login" target="_blank" rel="noopener">http://111.230.251.115/oldchen/user/login</a></p><h2 id="åè¯­"><a href="#åè¯­" class="headerlink" title="åè¯­"></a>åè¯­</h2><p>é‚£ä¹ˆï¼Œç¼–å†™æ¥å£çš„å­¦ä¹ å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚</p><p>è™½ç„¶æœ‰å¾…å®Œå–„çš„åœ°æ–¹è¿˜ä¸å°‘ï¼Œæ¯”å¦‚é€šè¿‡æ•°æ®åº“æŒ‡ä»¤å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€æ•°æ®åº“ä¹‹é—´ç›¸äº’å…³è”ç­‰ç­‰ï¼Œè®¸å¤šçŸ¥è¯†éƒ½éœ€è¦æ…¢æ…¢å­¦çš„ã€‚</p><p>æ­¤æ–‡ç« æƒå½“å…¥é—¨ä¹‹å¾„ï¼Œå‰©ä¸‹çš„è¿˜å¾—é å¤§å®¶è‡ªå·±å¤šå¤šé’»ç ”å•¦ï¼Œæ¯•ç«Ÿä½œè€…æœ¬äººéœ€è¦å­¦çš„åœ°æ–¹ä¹Ÿå¤ªå¤šäº†ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æŒ‡å‡ºï¼Œäº’ç›¸å­¦ä¹ ï¼Œå²‚ä¸ä¹å“‰ã€‚</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%91%8A%E8%BE%9E2.jpg" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡&lt;a href=&quot;https://oldchen.top/2018/08/05/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%EF%BC%88%E4%B8%80%EF%BC%89/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰&lt;/a&gt;ä¸­ï¼Œå·²ç»ä»‹ç»äº†å¦‚ä½•æ­å»ºä¸€ä¸ªåŸºæœ¬çš„å¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ¥å£çš„ç¼–å†™ï¼Œæœ€åæ˜¯èƒ½å¤ŸæˆåŠŸè¿è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€ç¯‡å°†æ›´è¿›ä¸€æ­¥ï¼Œä¸»è¦è§£å†³ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;â‘ ï¼šå¦‚ä½•è®©åå°é¡¹ç›®è¿è¡Œåœ¨TomCatä¸Š&lt;/li&gt;
&lt;li&gt;â‘¡ï¼šå¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²è‡ªå·±çš„é¡¹ç›®&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰</title>
    <link href="http://yoursite.com/2018/08/05/Android%E5%BC%80%E5%8F%91%E8%80%85%E7%BC%96%E5%86%99%E8%87%AA%E5%B7%B1%E7%9A%84API%E6%8E%A5%E5%8F%A3%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>http://yoursite.com/2018/08/05/Androidå¼€å‘è€…ç¼–å†™è‡ªå·±çš„APIæ¥å£ï¼ˆä¸Šï¼‰/</id>
    <published>2018-08-05T13:31:04.000Z</published>
    <updated>2018-08-14T11:58:19.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åº"><a href="#åº" class="headerlink" title="åº"></a>åº</h2><p>ä½œä¸ºä¸€åAndroidå¼€å‘äººå‘˜ï¼Œæƒ³è¦å®ç°å¯¹ä¸€äº›æ•°æ®çš„æ“ä½œå’Œå±•ç¤ºï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æä¾›Apiæ¥å£çš„ç½‘ç«™å»è·å–ï¼Œè™½ç„¶Apiå¸‚åœºä¸Šç§ç±»ç¹å¤šï¼Œä¸è¿‡åˆ«äººæä¾›çš„æ¥å£æœªå¿…å°±æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œåˆ°æœ€åï¼Œè¿˜æ˜¯å¾—è‡ªå·±å»å®ç°Apiæ¥å£ã€‚</p><p>æ¯•ç«Ÿï¼Œæœ€äº†è§£è‡ªå·±éœ€æ±‚çš„äººï¼Œè¿˜å¾—æ˜¯è‡ªå·±ã€‚</p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>å¾ˆå¤šå°ä¼™ä¼´åº”è¯¥éƒ½ä¼šæœ‰ç€ç±»ä¼¼çš„éœ€æ±‚ï¼Œä¸è¿‡æƒ³å»åšçš„æ—¶å€™ï¼Œå¸¸å¸¸æ— ä»ä¸‹æ‰‹ã€‚</p><p>æ‰€ä»¥è¿™é‡Œåšäº†ä¸€ä¸ªæ•´åˆï¼Œå…³äºå¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ‰€éœ€å·¥å…·çš„ä¸‹è½½ç­‰ã€‚</p><a id="more"></a> <p>å‚è€ƒæ–‡ç« ï¼š</p><ul><li><a href="https://www.jianshu.com/p/4a0d40806ea2" target="_blank" rel="noopener">Androidç¨‹åºå‘˜æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„æœåŠ¡å™¨ï¼Œä¸å†æ±‚å„ç§å…¬å…±API</a></li><li><a href="https://www.jianshu.com/p/f91ca5814bcf" target="_blank" rel="noopener">JAVAåå°æ­å»º(springboot+mybatis+mysql)é¡¹ç›®æ­å»º</a></li></ul><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>ä¸€å¥—å¼€å‘ç¯å¢ƒä¸‹æ¥ï¼Œéœ€è¦ä¸‹é¢è¿™äº›æ­¥éª¤ï¼š</p><ul><li>1ï¼šæ­å»ºå¼€å‘ç¯å¢ƒï¼ŒIntelliJ + spring-boot + mybatis</li><li>2ï¼šæ­å»ºæ•°æ®åº“ï¼Œmysql + navicat</li><li>3ï¼šæ­å»ºè¿è¡Œç¯å¢ƒï¼Œtomcat + è…¾è®¯äº‘ï¼ˆæˆ–è€…é˜¿é‡Œäº‘ï¼‰</li></ul><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h3 id="ä¸€ã€æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#ä¸€ã€æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="ä¸€ã€æ­å»ºå¼€å‘ç¯å¢ƒ"></a>ä¸€ã€æ­å»ºå¼€å‘ç¯å¢ƒ</h3><h4 id="1-1-IntelliJ-IDEAçš„å®‰è£…"><a href="#1-1-IntelliJ-IDEAçš„å®‰è£…" class="headerlink" title="1.1 IntelliJ IDEAçš„å®‰è£…"></a>1.1 IntelliJ IDEAçš„å®‰è£…</h4><p>Androidå¼€å‘è€…æ‰€ä½¿ç”¨çš„Android studioæ˜¯åŸºäºè¿™ä¸ªIDEAå¼€å‘çš„ï¼Œæ‰€ä»¥ä¸¤è€…çš„ç•Œé¢éå¸¸éå¸¸ç›¸ä¼¼ã€‚</p><p>è€Œä¸”ç°åœ¨æ¯”è¾ƒæµè¡Œçš„Androidå¼€å‘è¯­è¨€Kotlinä¹Ÿæ˜¯ç”±IntelliJ IDEAçš„å¼€å‘å…¬å¸JetBrainsæ‰€å¼€å‘çš„ã€‚</p><h5 id="ä¸‹è½½-IntelliJ-IDEA"><a href="#ä¸‹è½½-IntelliJ-IDEA" class="headerlink" title="ä¸‹è½½ IntelliJ IDEA"></a>ä¸‹è½½ IntelliJ IDEA</h5><p>é¦–å…ˆï¼Œä¸‹è½½å®‰è£…åŒ…â€”â€”<a href="https://www.jetbrains.com/idea/download/#section=windows" target="_blank" rel="noopener">ã€IntelliJä¸‹è½½åœ°å€ã€‘</a></p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001.png" alt="image"></p><h5 id="å®‰è£…-IntelliJ-IDEA"><a href="#å®‰è£…-IntelliJ-IDEA" class="headerlink" title="å®‰è£… IntelliJ IDEA"></a>å®‰è£… IntelliJ IDEA</h5><p>ä¸‹è½½å®Œæˆåï¼Œå°±å¼€å§‹å®‰è£…äº†</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-001.png" alt="image"></p><p>Nextåˆ°ä¸‹é¢çš„ç•Œé¢ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-002.png" alt="image"></p><p>ç„¶åä¸€ç›´ä¸‹ä¸€æ­¥ï¼Œåˆ°å¯ä»¥è¿è¡ŒIDEAï¼Œç„¶åä½ åº”è¯¥ä¼šé‡åˆ°éœ€è¦è´­ä¹°çš„æç¤ºï¼Œç ´è§£çš„æ•™ç¨‹è¯·çœ‹ï¼š</p><p><a href="https://blog.csdn.net/yangying496875002/article/details/73603303" target="_blank" rel="noopener">Windows7ä¸‹å®‰è£…ä¸ç ´è§£IntelliJ IDEA2017</a></p><p>win10ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚</p><h4 id="1-2-MySQLçš„å®‰è£…"><a href="#1-2-MySQLçš„å®‰è£…" class="headerlink" title="1.2 MySQLçš„å®‰è£…"></a>1.2 MySQLçš„å®‰è£…</h4><h5 id="ä¸‹è½½MySQL"><a href="#ä¸‹è½½MySQL" class="headerlink" title="ä¸‹è½½MySQL"></a>ä¸‹è½½MySQL</h5><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯mysql-5.7.17.msiï¼Œä¸‹è½½åœ°å€æ˜¯ï¼š</p><p><a href="https://downloads.mysql.com/archives/installer/" target="_blank" rel="noopener">MYSQLä¸‹è½½åœ°å€</a></p><h5 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h5><p>ä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-006.png" alt="image"></p><p>è¿™é‡Œåªé€‰æ‹©äº†Server</p><p>ç„¶åä¸€ç›´ä¸‹ä¸€æ­¥</p><p>åˆ°äº†è®¾ç½®å¯†ç è¿™é‡Œï¼Œæˆ‘è®¾ç½®çš„å¯†ç æ˜¯ã€oldchenã€‘,åé¢é¡¹ç›®é…ç½®çš„å¯†ç ä¹Ÿæ˜¯è¿™ä¸ªï¼Œè¿™é‡Œä½ å¯ä»¥éšä¾¿è®¾ç½®è‡ªå·±çš„å¯†ç ï¼Œä¸è¿‡åé¢é…ç½®çš„æ—¶å€™è¦ä¿è¯å¯†ç è¾“å…¥ä¸€è‡´å°±æ˜¯ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-007.png" alt="image"></p><p>ç„¶åä¸€ç›´ä¸‹ä¸€æ­¥ï¼Œç›´åˆ°å®‰è£…æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•å»æ“ä½œæ•°æ®åº“ã€‚</p><h4 id="1-3-Navicatçš„å®‰è£…"><a href="#1-3-Navicatçš„å®‰è£…" class="headerlink" title="1.3 Navicatçš„å®‰è£…"></a>1.3 Navicatçš„å®‰è£…</h4><p>Navicatç”¨æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¹Ÿæ˜¯éœ€è¦ä»˜è´¹è´­ä¹°çš„ï¼Œç ´è§£åœ°å€ï¼š<br><a href="https://blog.csdn.net/wypersist/article/details/79834490" target="_blank" rel="noopener">Navicat for MySQL å®‰è£…å’Œç ´è§£ï¼ˆå®Œç¾ï¼‰</a></p><p>å¯ä»¥ä½¿ç”¨ä¹‹åï¼Œæ¥åˆ°å¦‚ä¸‹ç•Œé¢ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-008.png" alt="image"></p><p>ç„¶ååˆ›å»ºMYSQLè¿æ¥ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-009.png" alt="image"></p><p>è¾“å…¥ç›¸å…³ä¿¡æ¯ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-010.png" alt="image"></p><p>ç„¶åå°±å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„è¿æ¥äº†ï¼Œå³é”®â†’æ–°å»ºæ•°æ®åº“ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-011.png" alt="image"></p><p>æ–°å»ºçš„æ•°æ®åº“åå­—è®¾ç½®ä¸ºoldchen,æ¥ä¸‹æ¥åŒå‡»è¿™ä¸ªæ•°æ®åº“ï¼Œæ–°å»ºä¸€ä¸ªuserè¡¨,è¡¨ä¸­åŒ…å«account,password,usernameä»¥åŠè‡ªå¢ä¸»é”®idï¼Œå…·ä½“æ“ä½œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/gif/001.gif" alt="image"></p><p>åˆ›å»ºè¿™ä¸ªè¡¨åï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€æ¡æ•°æ®ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-012.png" alt="image"></p><p>ç„¶åï¼Œå¼€å§‹é…ç½®IntelliJ IDEA</p><h4 id="1-4-IntelliJ-IDEAçš„é…ç½®"><a href="#1-4-IntelliJ-IDEAçš„é…ç½®" class="headerlink" title="1.4 IntelliJ IDEAçš„é…ç½®"></a>1.4 IntelliJ IDEAçš„é…ç½®</h4><h5 id="æ­å»ºSpringBooté¡¹ç›®"><a href="#æ­å»ºSpringBooté¡¹ç›®" class="headerlink" title="æ­å»ºSpringBooté¡¹ç›®"></a>æ­å»ºSpringBooté¡¹ç›®</h5><p>æ‰“å¼€IntelliJï¼Œå·¦ä¸Šè§’ File â†’ New â†’ Projectï¼Œåˆ›å»ºæ–°é¡¹ç›®ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-013.png" alt="image"></p><p>ç„¶å</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-004.png" alt="image"></p><p>æ¥ä¸‹æ¥æ˜¯é€‰æ‹©ä¾èµ–çš„ç•Œé¢ï¼Œé€‰ä¸­å›¾ä¸­çš„å…¨éƒ¨ä¾èµ–</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-005.png" alt="image"></p><p>ä¸‹ä¸€æ­¥<br><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-019.png" alt="image"></p><p>å¼€å§‹é¡¹ç›®æ„å»ºï¼Œéœ€è¦ç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œæ„å»ºå®Œæˆåçš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-015.png" alt="image"></p><p>ç»“åˆä¹‹å‰æ–°å»ºçš„æ•°æ®åº“ï¼Œåœ¨resourcesç›®å½•ä¸‹çš„application.propertiesä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#oldchenä¸ºåˆ›å»ºçš„æ•°æ®åº“åå­—</span><br><span class="line">spring.datasource.url =jdbc:mysql://localhost:3306/oldchen</span><br><span class="line">mybatis.type-aliases-package = com.example.demo</span><br><span class="line"># æ•°æ®åº“ç”¨æˆ·å</span><br><span class="line">spring.datasource.username = root</span><br><span class="line"># æ•°æ®åº“å¯†ç </span><br><span class="line">spring.datasource.password = oldchen</span><br><span class="line"></span><br><span class="line">spring.datasource.driver-class-name=com.mysql.jdbc.Driver</span><br><span class="line"></span><br><span class="line">#ç«¯å£å·</span><br><span class="line">spring.session.store-type=none</span><br><span class="line">spring.http.encoding.charset=UTF-8</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¼€å§‹å†™æ¥å£å•¦</p><h4 id="1-5-æ¥å£çš„ç¼–å†™"><a href="#1-5-æ¥å£çš„ç¼–å†™" class="headerlink" title="1.5 æ¥å£çš„ç¼–å†™"></a>1.5 æ¥å£çš„ç¼–å†™</h4><p>ç”±äºæˆ‘ä»¬ä¹‹å‰åœ¨æ“ä½œåä¸ºã€oldchenã€‘çš„æ•°æ®åº“æ—¶ï¼Œè¿˜æ–°å»ºäº†ä¸€ä¸ªã€userã€‘è¡¨ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ªUserç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">    private Integer id;</span><br><span class="line">    private String account;</span><br><span class="line">    private String password;</span><br><span class="line">    private String userName;</span><br><span class="line"></span><br><span class="line">    public Integer getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Integer id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getAccount() &#123;</span><br><span class="line">        return account;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAccount(String account) &#123;</span><br><span class="line">        this.account = account;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUserName() &#123;</span><br><span class="line">        return userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserName(String userName) &#123;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºUserMapperï¼Œç”¨äºæŸ¥è¯¢ï¼ˆæ ¹æ®å­—æ®µaccountæŸ¥è¯¢ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line"></span><br><span class="line">    @Select(&quot;select * from user where account = #&#123;account&#125;&quot;)</span><br><span class="line">    User findByAccount(String account);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åˆ›å»ºUserControllerï¼Œç”¨äºå¯¹æ•°æ®çš„å¤„ç†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&#123;&quot;/user&quot;&#125;)</span><br><span class="line">public class UserController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(value=&quot;/user&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public String getUserInfoByName(String account) &#123;</span><br><span class="line">        User user = userMapper.findByAccount(account);</span><br><span class="line">        if (user == null)&#123;</span><br><span class="line">            return &quot;ç”¨æˆ·åä¿ä¸å­˜åœ¨&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return &quot;ç”¨æˆ·åå­˜åœ¨â€”â€”&quot; + user.getUserName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-016.png" alt="image"></p><h3 id="äºŒã€æµ‹è¯•æ¥å£"><a href="#äºŒã€æµ‹è¯•æ¥å£" class="headerlink" title="äºŒã€æµ‹è¯•æ¥å£"></a>äºŒã€æµ‹è¯•æ¥å£</h3><p>é¦–å…ˆï¼Œè¿è¡Œé¡¹ç›®</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-017.png" alt="image"></p><p>å½“é¡¹ç›®æ­£å¸¸è¿è¡Œåï¼Œæµ‹è¯•ä¸‹é¢çš„åœ°å€ï¼š</p><p><a href="http://localhost:8080/user/user?account=oldchen" target="_blank" rel="noopener">http://localhost:8080/user/user?account=oldchen</a></p><p>ç»“æœï¼š</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/001-018.png" alt="image"></p><p>æµ‹è¯•æˆåŠŸå•¦ï¼</p><h2 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h2><p>å…³äºApiæ¥å£çš„å­¦ä¹ ï¼Œå…ˆåˆ°è¿™é‡Œã€‚</p><p>åé¢è¿˜ä¼šå†™å…³äºå¦‚ä½•å°†é¡¹ç›®æ”¾åœ¨TomCatä¸Šï¼Œæœ€åæ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡å¤–ç½‘åœ°å€è®¿é—®æ¥å£</p><p>é‚£ä¹ˆï¼Œæœªå®Œå¾…ç»­â€¦</p><p><img src="https://my-blog-picture.oss-cn-beijing.aliyuncs.com/%E8%A1%A8%E6%83%85%E5%8C%85/%E5%91%8A%E8%BE%9E.jpg" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;åº&quot;&gt;&lt;a href=&quot;#åº&quot; class=&quot;headerlink&quot; title=&quot;åº&quot;&gt;&lt;/a&gt;åº&lt;/h2&gt;&lt;p&gt;ä½œä¸ºä¸€åAndroidå¼€å‘äººå‘˜ï¼Œæƒ³è¦å®ç°å¯¹ä¸€äº›æ•°æ®çš„æ“ä½œå’Œå±•ç¤ºï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æä¾›Apiæ¥å£çš„ç½‘ç«™å»è·å–ï¼Œè™½ç„¶Apiå¸‚åœºä¸Šç§ç±»ç¹å¤šï¼Œä¸è¿‡åˆ«äººæä¾›çš„æ¥å£æœªå¿…å°±æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œåˆ°æœ€åï¼Œè¿˜æ˜¯å¾—è‡ªå·±å»å®ç°Apiæ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;æ¯•ç«Ÿï¼Œæœ€äº†è§£è‡ªå·±éœ€æ±‚çš„äººï¼Œè¿˜å¾—æ˜¯è‡ªå·±ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‡†å¤‡&quot;&gt;&lt;a href=&quot;#å‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;å‡†å¤‡&quot;&gt;&lt;/a&gt;å‡†å¤‡&lt;/h2&gt;&lt;p&gt;å¾ˆå¤šå°ä¼™ä¼´åº”è¯¥éƒ½ä¼šæœ‰ç€ç±»ä¼¼çš„éœ€æ±‚ï¼Œä¸è¿‡æƒ³å»åšçš„æ—¶å€™ï¼Œå¸¸å¸¸æ— ä»ä¸‹æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™é‡Œåšäº†ä¸€ä¸ªæ•´åˆï¼Œå…³äºå¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒï¼Œä»¥åŠæ‰€éœ€å·¥å…·çš„ä¸‹è½½ç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Old Chen&#39;s Wish List</title>
    <link href="http://yoursite.com/2018/07/29/Old%20Chen&#39;s%20Wish%20List/"/>
    <id>http://yoursite.com/2018/07/29/Old Chen&#39;s Wish List/</id>
    <published>2018-07-29T14:51:44.000Z</published>
    <updated>2018-08-14T12:03:05.890Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€Old-Chençš„æ„¿æœ›"><a href="#ä¸€ã€Old-Chençš„æ„¿æœ›" class="headerlink" title="ä¸€ã€Old Chençš„æ„¿æœ›"></a>ä¸€ã€Old Chençš„æ„¿æœ›</h2><h4 id="1-ã€have-a-good-feel"><a href="#1-ã€have-a-good-feel" class="headerlink" title="(1)ã€have a good feel"></a>(1)ã€have a good feel</h4><h4 id="2-ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦"><a href="#2-ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦" class="headerlink" title="(2)ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦"></a>(2)ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦</h4><ul><li style="list-style: none"><input type="checkbox"> 1ï¼šä¸œé‡ç¡…è°·ç³»åˆ—</li><li style="list-style: none"><input type="checkbox"> 2ï¼šä¸‰ä½“ç³»åˆ—             ï¼ˆâœ”Ã—Ã—ï¼‰<a id="more"></a> </li><li style="list-style: none"><input type="checkbox"> 3ï¼šã€Šæ—¶é—´ç®€å²ã€‹</li><li style="list-style: none"><input type="checkbox"> 4ï¼šã€Šè¾¹åŸã€‹</li><li style="list-style: none"><input type="checkbox"> 5ï¼šã€Šç™¾å¹´å­¤ç‹¬ã€‹</li><li style="list-style: none"><input type="checkbox"> 6ï¼šã€ŠèŒ¶é¦†ã€‹</li></ul><h4 id="3-ã€ä¹°ä¸€äº›æƒ³ä¹°çš„ä¸œè¥¿"><a href="#3-ã€ä¹°ä¸€äº›æƒ³ä¹°çš„ä¸œè¥¿" class="headerlink" title="(3)ã€ä¹°ä¸€äº›æƒ³ä¹°çš„ä¸œè¥¿"></a>(3)ã€ä¹°ä¸€äº›æƒ³ä¹°çš„ä¸œè¥¿</h4><ul><li style="list-style: none"><input type="checkbox"> 1ï¼šã€ŠçŸ®å¤§ç´§æŒ‡åŒ—ã€‹</li><li style="list-style: none"><input type="checkbox" checked> 2ï¼šã€Šè€æ¢çš„å››å¤§åè‘—æƒ…å•†è¯¾ã€‹     </li><li style="list-style: none"><input type="checkbox" checked> 3ï¼šä¸€ä¸ªæ–°çš„æ‰‹æœº                </li><li style="list-style: none"><input type="checkbox"> 4ï¼šé¢„è´­æ¸¸æˆ</li><li style="list-style: none"><input type="checkbox" checked> 5ï¼šå¥½åƒçš„é›¶é£Ÿ</li><li style="list-style: none"><input type="checkbox"> 6ï¼šä¸€ä¸ªå¤©æ–‡æœ›è¿œé•œ</li><li style="list-style: none"><input type="checkbox" checked> 7ï¼šä¸€ä¸ªæ¸¸æˆæœº(switch)</li></ul><h4 id="4-ã€ç©å®Œå·²ç»ä¹°äº†çš„æ¸¸æˆ"><a href="#4-ã€ç©å®Œå·²ç»ä¹°äº†çš„æ¸¸æˆ" class="headerlink" title="(4)ã€ç©å®Œå·²ç»ä¹°äº†çš„æ¸¸æˆ"></a>(4)ã€ç©å®Œå·²ç»ä¹°äº†çš„æ¸¸æˆ</h4><ul><li style="list-style: none"><input type="checkbox"> 1ï¼šã€Šå·«å¸ˆ3ã€‹</li><li style="list-style: none"><input type="checkbox" checked> 2ï¼šã€Šé»‘é­‚3ã€‹                 ï¼ˆå…¨æˆå°±ï¼‰</li><li style="list-style: none"><input type="checkbox"> 3ï¼šåˆºå®¢ä¿¡æ¡ç³»åˆ—</li><li style="list-style: none"><input type="checkbox"> 4ï¼šã€Šå¤å¢“ä¸½å½±ï¼šå´›èµ·ã€‹</li><li style="list-style: none"><input type="checkbox" checked> 5:ã€Šæ€æˆ®å°–å¡”ã€‹ ï¼ˆå…¨æˆå°±ï¼‰</li><li style="list-style: none"><input type="checkbox" checked> 5:ã€Šå¡å°”è¾¾ä¼ è¯´ï¼šæ—·é‡ä¹‹æ¯ã€‹ ï¼ˆæ•‘å‡ºå…¬ä¸»ï¼‰</li></ul><h4 id="5-ã€å†™APP"><a href="#5-ã€å†™APP" class="headerlink" title="(5)ã€å†™APP"></a>(5)ã€å†™APP</h4><ul><li style="list-style: none"><input type="checkbox"> å†™ä¸€ä¸ªæ—¥è®°æœ¬APP    (Wringting)</li><li style="list-style: none"><input type="checkbox"> å†™ä¸€ä¸ªå•è¯ç”Ÿè¯æœ¬APP</li></ul><h4 id="6-ã€å…»å® ç‰©-Hard"><a href="#6-ã€å…»å® ç‰©-Hard" class="headerlink" title="(6)ã€å…»å® ç‰©(Hard)"></a>(6)ã€å…»å® ç‰©(Hard)</h4><ul><li style="list-style: none"><input type="checkbox"> å…»ä¸€åªçŒ«  </li></ul><h2 id="äºŒã€Old-Chençš„é•¿æœŸæ„¿æœ›-Hard"><a href="#äºŒã€Old-Chençš„é•¿æœŸæ„¿æœ›-Hard" class="headerlink" title="äºŒã€Old Chençš„é•¿æœŸæ„¿æœ›(Hard)"></a>äºŒã€Old Chençš„é•¿æœŸæ„¿æœ›(Hard)</h2><h4 id="1-ã€å­¦ä¹ å•¦"><a href="#1-ã€å­¦ä¹ å•¦" class="headerlink" title="(1)ã€å­¦ä¹ å•¦"></a>(1)ã€å­¦ä¹ å•¦</h4><h4 id="2-ã€å……å®è‡ªå·±"><a href="#2-ã€å……å®è‡ªå·±" class="headerlink" title="(2)ã€å……å®è‡ªå·±"></a>(2)ã€å……å®è‡ªå·±</h4><h4 id="3-ã€è‡ªå¾—å…¶ä¹"><a href="#3-ã€è‡ªå¾—å…¶ä¹" class="headerlink" title="(3)ã€è‡ªå¾—å…¶ä¹"></a>(3)ã€è‡ªå¾—å…¶ä¹</h4><h2 id="ä¸‰ã€è€æ™¨å­çš„ç»ˆææ„¿æœ›"><a href="#ä¸‰ã€è€æ™¨å­çš„ç»ˆææ„¿æœ›" class="headerlink" title="ä¸‰ã€è€æ™¨å­çš„ç»ˆææ„¿æœ›"></a>ä¸‰ã€è€æ™¨å­çš„ç»ˆææ„¿æœ›</h2><p><strong>è«æ˜¥è€…ï¼Œæ˜¥æœæ—¢æˆï¼Œå† è€…äº”å…­äººï¼Œç«¥å­å…­ä¸ƒäººï¼Œæµ´ä¹æ²‚ï¼Œé£ä¹èˆé›©ï¼Œå’è€Œå½’</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸€ã€Old-Chençš„æ„¿æœ›&quot;&gt;&lt;a href=&quot;#ä¸€ã€Old-Chençš„æ„¿æœ›&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€Old Chençš„æ„¿æœ›&quot;&gt;&lt;/a&gt;ä¸€ã€Old Chençš„æ„¿æœ›&lt;/h2&gt;&lt;h4 id=&quot;1-ã€have-a-good-feel&quot;&gt;&lt;a href=&quot;#1-ã€have-a-good-feel&quot; class=&quot;headerlink&quot; title=&quot;(1)ã€have a good feel&quot;&gt;&lt;/a&gt;(1)ã€have a good feel&lt;/h4&gt;&lt;h4 id=&quot;2-ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦&quot;&gt;&lt;a href=&quot;#2-ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;(2)ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦&quot;&gt;&lt;/a&gt;(2)ã€çœ‹å®Œæ‰€æœ‰ä¹°çš„æ–‡å­¦ä¹¦&lt;/h4&gt;&lt;ul&gt;
&lt;li style=&quot;list-style: none&quot;&gt;&lt;input type=&quot;checkbox&quot;&gt; 1ï¼šä¸œé‡ç¡…è°·ç³»åˆ—&lt;/li&gt;
&lt;li style=&quot;list-style: none&quot;&gt;&lt;input type=&quot;checkbox&quot;&gt; 2ï¼šä¸‰ä½“ç³»åˆ—             ï¼ˆâœ”Ã—Ã—ï¼‰
    
    </summary>
    
    
  </entry>
  
</feed>
